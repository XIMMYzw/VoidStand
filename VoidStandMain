loadstring(game:HttpGet('data:text/plain;base64,bG9jYWwgdmFyX3dmYmw3bCA9IGdhbWU6R2V0U2VydmljZSgnUGxheWVycycpCi0tIHloNGdyYnlsCmxvY2FsIDl3d2FpZiA9IDkxCmxvY2FsIHZhcl8zbjAyaXogPSBnYW1lOkdldFNlcnZpY2UoJ1J1blNlcnZpY2UnKQotLSAwNjlsdngzbApsb2NhbCB2YXJfODRjcWlqID0gZ2FtZTpHZXRTZXJ2aWNlKCdXb3Jrc3BhY2UnKQotLSBmbzNtd2todApsb2NhbCB2YXJfeGh3MnFoID0gZ2FtZTpHZXRTZXJ2aWNlKCdSZXBsaWNhdGVkU3RvcmFnZScpCmxvY2FsIDNrNHMweiA9IDU2CmxvY2FsIHZhcl83MTlmZHAgPSBnYW1lOkdldFNlcnZpY2UoJ1RleHRDaGF0U2VydmljZScpCmxvY2FsIHZhcl9qZmQzcWkgPSBnYW1lOkdldFNlcnZpY2UoJ1RlbGVwb3J0U2VydmljZScpCmxvY2FsIHZhcl91ZHh4cXEgPSBnYW1lOkdldFNlcnZpY2UoJ1ZpcnR1YWxJbnB1dE1hbmFnZXInKQotLSBrNDhuYzk5NQpsb2NhbCB2YXJfbWIzanV0ID0gcGxheWVycy5Mb2NhbFBsYXllcgpsb2NhbCB2YXJfOXNrdGVoID0gcmVwbGljYXRlZF9zdG9yYWdlOldhaXRGb3JDaGlsZCgnTWFpbkV2ZW50JykKLS0gYjVycDlzaTgKbG9jYWwgdmFyXzFqcmk2OCA9IGdhbWU6R2V0U2VydmljZSgnVXNlcklucHV0U2VydmljZScpCmxvY2FsIHZhcl9xdDhsa2ogPSB3b3Jrc3BhY2UuQ3VycmVudENhbWVyYQotLSBzcXNoNnFpYgpsb2NhbCB2YXJfZDd5Y3oyID0gZ2FtZTpHZXRTZXJ2aWNlKCdEZWJyaXMnKQotLSBlMjB5emhiNwpsb2NhbCBocXQzNnMgPSA4OAotLSBBbnRpLXZvaWQKLS0gOHEwMTk1ajcKbG9jYWwgdXZzcTUyID0gMjAKbG9jYWwgdmFyX2M3YXRoeCA9IHdvcmtzcGFjZS5GYWxsZW5QYXJ0c0Rlc3Ryb3lIZWlnaHQKd29ya3NwYWNlLkZhbGxlblBhcnRzRGVzdHJveUhlaWdodCA9IC1tYXRoLmh1Z2UKLS0gR2xvYmFsIHZhcmlhYmxlcwpfRy5tYXN0ZXIgPSBuaWwKX0cuc3RhbmRfbG9ja2VkID0gZmFsc2UKX0cudm9pZF9tb2RlID0gZmFsc2UKLS0gYThnbnNkMnkKX0cudm9pZF9zcGFtX21vZGUgPSBmYWxzZQpsb2NhbCAzMWxjbW4gPSA2NwpfRy5hY3Rpb25faW5fcHJvZ3Jlc3MgPSBmYWxzZQotLSBUZWFtIGFuZCB3aGl0ZWxpc3Qgc3lzdGVtcwpfRy50ZWFtZWRfcGxheWVycyA9IHt9CmxvY2FsIHRrYXM3ZCA9IDEKX0cud2hpdGVsaXN0ZWRfcGxheWVycyA9IHt9Ci0tIE5FVzogUGVyc2lzdGVudCBzdG9yYWdlIGZvciByZXNwYXduCmxvY2FsIGo5MDQybyA9IDEyCl9HLnBlcnNpc3RlbnRfZGF0YSA9IHsKLS0gMTVmb2VkODIKICAgIHZvaWRfbW9kZSA9IGZhbHNlLAotLSAyczA1ZjhzMQpsb2NhbCAxeTg2NTQgPSA5OQogICAgdm9pZF9zcGFtX21vZGUgPSBmYWxzZSwKICAgIGd1bl90eXBlID0gc2V0dGluZ3MuZGVmYXVsdF9ndW5fdHlwZSwKICAgIHRlYW1lZF9wbGF5ZXJzID0ge30sCi0tIDlzb2xlbTVyCiAgICB3aGl0ZWxpc3RlZF9wbGF5ZXJzID0ge30sCi0tIGd4YXJneWo3CiAgICBhdXRvX3NhdmUgPSBmYWxzZSwKICAgIGZvbGxvd19vdmVycmlkZSA9IG5pbCwgLS0gTkVXOiBTdG9yZSBmb2xsb3cgb3ZlcnJpZGUKICAgIGF1dG9fbWFzayA9IGZhbHNlLCAtLSBORVc6IFN0b3JlIGF1dG8gbWFzayBzdGF0ZQogICAgYXV0b19zcGl0ID0gZmFsc2UgLS0gTkVXOiBTdG9yZSBhdXRvIHNwaXQgc3RhdGUKfQotLSBORVc6IFByb3RlY3Rpb24gcXVldWUgZm9yIG11bHRpLXRhcmdldCBkZWZlbnNlCmxvY2FsIDN4bGV6biA9IDg1Cl9HLnByb3RlY3Rpb25fcXVldWUgPSB7fQotLSBNb3ZlbWVudCB2YXJpYWJsZXMKLS0gemF6aGx6cG8KbG9jYWwgbm1qeXlhID0gNDAKbG9jYWwgdmFyXzRoNHRpeiwgZm9sbG93X2Rpc3RhbmNlLCBmb2xsb3dfaGVpZ2h0LCBmb2xsb3dfbGVycF9zcGVlZCA9ICdsJywgNC41LCAzLCAxIC0tIENIQU5HRUQ6IExlc3Mgc21vb3RoIGZvbGxvdyAoMSBpbnN0ZWFkIG9mIDAuNDUpCmxvY2FsIHZhcl96Ynl1cnMsIHRhcmdldCwgb3JiaXRfcmFkaXVzLCBvcmJpdF9zcGVlZCA9IGZhbHNlLCBuaWwsIDE1LCBtYXRoLnBpICogNjQKbG9jYWwgYnVybHZ2ID0gNjkKbG9jYWwgdmFyXzAzZTljbSwgc25hcF9kaXN0YW5jZSA9IGZhbHNlLCAxNQpsb2NhbCB2YXJfamFoNHJ0LCBzcGlyYWxfc3RvcF9mbGFnID0gZmFsc2UsIGZhbHNlCmxvY2FsIHZhcl81aHNzMGEsIHNwaXJhbF9kdXJhdGlvbiA9IDE1LCA2CmxvY2FsIHZhcl9mYzRta3ggPSBmYWxzZQotLSB4OXUxbGo1ZApsb2NhbCB2YXJfYXM5NDM3ID0gbmlsCmxvY2FsIHZhcl9pZDRzancgPSBuaWwKbG9jYWwgdmFyX2h5ZDhoMiA9IG5pbApsb2NhbCBiaDdrZHEgPSA4OQotLSBGb2xsb3cgaGlzdG9yeSBzdGFjayB0byByZXN0b3JlIHByZXZpb3VzIGZvbGxvdyB3aGVuIHNvbWVvbmUgbGVhdmVzCmxvY2FsIHZhcl9yaXZuN3kgPSB7fQotLSAzNTUxaXVicQpsb2NhbCBvOHlkMGcgPSAyMQotLSBUaW1pbmcgdmFyaWFibGVzCmxvY2FsIHZhcl9vOGZheXAgPSAwCmxvY2FsIHZhcl9jMjU4YW0gPSAwCi0tIHBlMXJkZ2t4CmxvY2FsIHZhcl9wd2NsN3MgPSAiIgotLSA2a2MyNTNheQpsb2NhbCB2YXJfdGthOWJyID0ge30KLS0gdTg5NjhhbG8KbG9jYWwgdmFyX2Vtc21zeiA9IHRpY2soKQotLSByeWVldHVmOApsb2NhbCB2YXJfMWx4dmZkID0gMAotLSBORVc6IEF1dG8tc2F2ZSB0cmFja2luZwpsb2NhbCB2YXJfanYyeGM5ID0gZmFsc2UKbG9jYWwgdmFyX2ptYzdyaCA9IDAKLS0gTWVtb3J5IG1hbmFnZW1lbnQKLS0gM2ZmeWRuODIKbG9jYWwgczM4MTNiID0gOTIKbG9jYWwgdmFyXzZnbjVoeCA9IHt9CmxvY2FsIHZhcl80OTFrcTUgPSB7fQotLSBORVc6IHBlcnNpc3RlbnQgY29ubmVjdGlvbnMgKGRvIG5vdCByZW1vdmUgdGhlc2Ugb24gY2xlYW51cCkgLSB1c2VkIGZvciBjaGF0IGhhbmRsZXJzCi0tIDc1Y2hpNHkyCmxvY2FsIHZhcl8wc2JuZ24gPSB7fQpsb2NhbCB2M2JsdGwgPSA2OQotLSBDYW1lcmEgc3BlY3RhdGUgdmFyaWFibGVzCmxvY2FsIHZhcl81ZHR1cWkgPSBmYWxzZQotLSAzNzh3b250YQpsb2NhbCB2YXJfenJ0ZGE2ID0gbmlsCi0tIHFoM2Nzdms3CmxvY2FsIHZhcl9hajAyMTcgPSBjYW1lcmEuQ2FtZXJhVHlwZQotLSB3eWlwZzV0OApsb2NhbCB2YXJfMTdscHRoID0gY2FtZXJhLkNhbWVyYVN1YmplY3QKLS0genZ1Z25yMG8KLS0gR3VuIHN5c3RlbQpsb2NhbCB2YXJfeGNjNjVyID0gc2V0dGluZ3MuZGVmYXVsdF9ndW5fdHlwZQotLSBqaWxnNWZodApsb2NhbCB6d3Q4bW4gPSA4Mgpsb2NhbCB2YXJfZmY5Y3RxID0gewotLSBqYm1ndnFwMQogICAgWyJMTUciXSA9IHsKICAgICAgICBuYW1lX3Rva2VuID0gIltMTUddIiwKLS0gbnBpaTF5dnQKICAgICAgICBhbW1vX25hbWUgPSBzZXR0aW5ncy5oYWxsb3dlZW5fbW9kZSBhbmQgIjIwMCBbTE1HIEFtbW9dIC0gJDAiIG9yICIyMDAgW0xNRyBBbW1vXSAtICQzMjgiLAogICAgICAgIGd1bl9wYXRoID0gc2V0dGluZ3MuaGFsbG93ZWVuX21vZGUgYW5kICJ3b3Jrc3BhY2UuSWdub3JlZC5TaG9wW1wiW0xNR10gLSAkMFwiXSIgb3IgIndvcmtzcGFjZS5JZ25vcmVkLlNob3BbXCJbTE1HXSAtICQyMDAwXCJdIiwKICAgICAgICBhbW1vX3BhdGggPSBzZXR0aW5ncy5oYWxsb3dlZW5fbW9kZSBhbmQgIndvcmtzcGFjZS5JZ25vcmVkLlNob3BbXCIyMDAgW0xNRyBBbW1vXSAtICQwXCJdIiBvciAid29ya3NwYWNlLklnbm9yZWQuU2hvcFtcIjIwMCBbTE1HIEFtbW9dIC0gJDMyOFwiXSIsCiAgICAgICAgY29zdCA9IHNldHRpbmdzLmhhbGxvd2Vlbl9tb2RlIGFuZCAwIG9yIDIwMDAsCiAgICAgICAgYW1tb19jb3N0ID0gc2V0dGluZ3MuaGFsbG93ZWVuX21vZGUgYW5kIDAgb3IgMzI4CiAgICB9LAogICAgWyJBVUciXSA9IHsKbG9jYWwgZWJnem4wID0gMjEKICAgICAgICBuYW1lX3Rva2VuID0gIltBVUddIiwKLS0gejBmMWo2MjQKICAgICAgICBhbW1vX25hbWUgPSBzZXR0aW5ncy5oYWxsb3dlZW5fbW9kZSBhbmQgIjkwIFtBVUcgQW1tb10gLSAkMCIgb3IgIjkwIFtBVUcgQW1tb10gLSAkODciLAogICAgICAgIGd1bl9wYXRoID0gc2V0dGluZ3MuaGFsbG93ZWVuX21vZGUgYW5kICJ3b3Jrc3BhY2UuSWdub3JlZC5TaG9wW1wiW0FVR10gLSAkMFwiXSIgb3IgIndvcmtzcGFjZS5JZ25vcmVkLlNob3BbXCJbQVVHXSAtICQyMTMxXCJdIiwKICAgICAgICBhbW1vX3BhdGggPSBzZXR0aW5ncy5oYWxsb3dlZW5fbW9kZSBhbmQgIndvcmtzcGFjZS5JZ25vcmVkLlNob3BbXCI5MCBbQVVHIEFtbW9dIC0gJDBcIl0iIG9yICJ3b3Jrc3BhY2UuSWdub3JlZC5TaG9wW1wiOTAgW0FVRyBBbW1vXSAtICQ4N1wiXSIsCiAgICAgICAgY29zdCA9IHNldHRpbmdzLmhhbGxvd2Vlbl9tb2RlIGFuZCAwIG9yIDIxMzEsCiAgICAgICAgYW1tb19jb3N0ID0gc2V0dGluZ3MuaGFsbG93ZWVuX21vZGUgYW5kIDAgb3IgODcKICAgIH0sCi0tIHU2bWlrMm53CiAgICBbIlNpbGVuY2VyQVIiXSA9IHsKbG9jYWwgdXhwemFpID0gMTMKICAgICAgICBuYW1lX3Rva2VuID0gIltTaWxlbmNlckFSXSIsCiAgICAgICAgYW1tb19uYW1lID0gc2V0dGluZ3MuaGFsbG93ZWVuX21vZGUgYW5kICIxMjAgW1NpbGVuY2VyQVIgQW1tb10gLSAkMCIgb3IgIjEyMCBbU2lsZW5jZXJBUiBBbW1vXSAtICQ4MiIsCiAgICAgICAgZ3VuX3BhdGggPSBzZXR0aW5ncy5oYWxsb3dlZW5fbW9kZSBhbmQgIndvcmtzcGFjZS5JZ25vcmVkLlNob3BbXCJbU2lsZW5jZXJBUl0gLSAkMFwiXSIgb3IgIndvcmtzcGFjZS5JZ25vcmVkLlNob3BbXCJbU2lsZW5jZXJBUl0gLSAkMTM2NlwiXSIsCiAgICAgICAgYW1tb19wYXRoID0gc2V0dGluZ3MuaGFsbG93ZWVuX21vZGUgYW5kICJ3b3Jrc3BhY2UuSWdub3JlZC5TaG9wW1wiMTIwIFtTaWxlbmNlckFSIEFtbW9dIC0gJDBcIl0iIG9yICJ3b3Jrc3BhY2UuSWdub3JlZC5TaG9wW1wiMTIwIFtTaWxlbmNlckFSIEFtbW9dIC0gJDgyXCJdIiwKLS0gdGFuMjhicHAKICAgICAgICBjb3N0ID0gc2V0dGluZ3MuaGFsbG93ZWVuX21vZGUgYW5kIDAgb3IgMTM2NiwKICAgICAgICBhbW1vX2Nvc3QgPSBzZXR0aW5ncy5oYWxsb3dlZW5fbW9kZSBhbmQgMCBvciA4MgogICAgfSwKICAgIFsiUDkwIl0gPSB7CiAgICAgICAgbmFtZV90b2tlbiA9ICJbUDkwXSIsCiAgICAgICAgYW1tb19uYW1lID0gc2V0dGluZ3MuaGFsbG93ZWVuX21vZGUgYW5kICIxMjAgW1A5MCBBbW1vXSAtICQwIiBvciAiMTIwIFtQOTAgQW1tb10gLSAkNjYiLAotLSB6YmI1dWhtcwpsb2NhbCBmcWJtb2UgPSAxNAogICAgICAgIGd1bl9wYXRoID0gc2V0dGluZ3MuaGFsbG93ZWVuX21vZGUgYW5kICJ3b3Jrc3BhY2UuSWdub3JlZC5TaG9wW1wiW1A5MF0gLSAkMFwiXSIgb3IgIndvcmtzcGFjZS5JZ25vcmVkLlNob3BbXCJbUDkwXSAtICQxMDkzXCJdIiwKICAgICAgICBhbW1vX3BhdGggPSBzZXR0aW5ncy5oYWxsb3dlZW5fbW9kZSBhbmQgIndvcmtzcGFjZS5JZ25vcmVkLlNob3BbXCIxMjAgW1A5MCBBbW1vXSAtICQwXCJdIiBvciAid29ya3NwYWNlLklnbm9yZWQuU2hvcFtcIjEyMCBbUDkwIEFtbW9dIC0gJDY2XCJdIiwKICAgICAgICBjb3N0ID0gc2V0dGluZ3MuaGFsbG93ZWVuX21vZGUgYW5kIDAgb3IgMTA5MywKICAgICAgICBhbW1vX2Nvc3QgPSBzZXR0aW5ncy5oYWxsb3dlZW5fbW9kZSBhbmQgMCBvciA2NgogICAgfSwKICAgIFsiRmxpbnRsb2NrIl0gPSB7CmxvY2FsIHB2dGhpNiA9IDY0CiAgICAgICAgbmFtZV90b2tlbiA9ICJbRmxpbnRsb2NrXSIsCi0tIDcxdjF6c3l1CiAgICAgICAgYW1tb19uYW1lID0gc2V0dGluZ3MuaGFsbG93ZWVuX21vZGUgYW5kICI2IFtGbGludGxvY2sgQW1tb10gLSAkMCIgb3IgIjYgW0ZsaW50bG9jayBBbW1vXSAtICQxNjMiLAogICAgICAgIGd1bl9wYXRoID0gc2V0dGluZ3MuaGFsbG93ZWVuX21vZGUgYW5kICJ3b3Jrc3BhY2UuSWdub3JlZC5TaG9wW1wiW0ZsaW50bG9ja10gLSAkMFwiXSIgb3IgIndvcmtzcGFjZS5JZ25vcmVkLlNob3BbXCJbRmxpbnRsb2NrXSAtICQxNDIxXCJdIiwKLS0gc3JvZmdybG8KICAgICAgICBhbW1vX3BhdGggPSBzZXR0aW5ncy5oYWxsb3dlZW5fbW9kZSBhbmQgIndvcmtzcGFjZS5JZ25vcmVkLlNob3BbXCI2IFtGbGludGxvY2sgQW1tb10gLSAkMFwiXSIgb3IgIndvcmtzcGFjZS5JZ25vcmVkLlNob3BbXCI2IFtGbGludGxvY2sgQW1tb10gLSAkMTYzXCJdIiwKLS0gc2Z6OWF4OHMKbG9jYWwgcXg2ZmdzID0gMAogICAgICAgIGNvc3QgPSBzZXR0aW5ncy5oYWxsb3dlZW5fbW9kZSBhbmQgMCBvciAxNDIxLAotLSBtZjJvcmx4eApsb2NhbCBlMGN4YnkgPSA1NQogICAgICAgIGFtbW9fY29zdCA9IHNldHRpbmdzLmhhbGxvd2Vlbl9tb2RlIGFuZCAwIG9yIDE2MwotLSBvZDcwaDRjbgogICAgfSwKICAgIFsiUmlmbGUiXSA9IHsKICAgICAgICBuYW1lX3Rva2VuID0gIltSaWZsZV0iLAotLSAxMWYybXlrYgpsb2NhbCBlc3N2Z2MgPSAyMwogICAgICAgIGFtbW9fbmFtZSA9IHNldHRpbmdzLmhhbGxvd2Vlbl9tb2RlIGFuZCAiNSBbUmlmbGUgQW1tb10gLSAkMCIgb3IgIjUgW1JpZmxlIEFtbW9dIC0gJDI3MyIsCiAgICAgICAgZ3VuX3BhdGggPSBzZXR0aW5ncy5oYWxsb3dlZW5fbW9kZSBhbmQgIndvcmtzcGFjZS5JZ25vcmVkLlNob3BbXCJbUmlmbGVdIC0gJDBcIl0iIG9yICJ3b3Jrc3BhY2UuSWdub3JlZC5TaG9wW1wiW1JpZmxlXSAtICQxNjk0XCJdIiwKICAgICAgICBhbW1vX3BhdGggPSBzZXR0aW5ncy5oYWxsb3dlZW5fbW9kZSBhbmQgIndvcmtzcGFjZS5JZ25vcmVkLlNob3BbXCI1IFtSaWZsZSBBbW1vXSAtICQwXCJdIiBvciAid29ya3NwYWNlLklnbm9yZWQuU2hvcFtcIjUgW1JpZmxlIEFtbW9dIC0gJDI3M1wiXSIsCiAgICAgICAgY29zdCA9IHNldHRpbmdzLmhhbGxvd2Vlbl9tb2RlIGFuZCAwIG9yIDE2OTQsCiAgICAgICAgYW1tb19jb3N0ID0gc2V0dGluZ3MuaGFsbG93ZWVuX21vZGUgYW5kIDAgb3IgMjczCiAgICB9Cn0KLS0gTkVXOiBFbW90ZSBzeXN0ZW0KbG9jYWwgMnpxNWozID0gNDYKbG9jYWwgdmFyX3JqdjY1MCA9IHsKICAgIFsiZCJdID0gMTM5MDU4OTA2NDE1MTE5LCAtLSBkZWZhdWx0CiAgICBbImZsb3NzIl0gPSAxMDE3NDQ5ODI5MDk1MzQsCiAgICBbInR0bCJdID0gMTEyODg0ODMwMTc1MDQwLAotLSA5NXN1ZGFyYwogICAgWyJncmlkZHkiXSA9IDEyOTE0OTQwMjkyMjI0MSwKICAgIFsic20iXSA9IDg1MDc0NTgxMTkwODM0Ci0tIDB0ZHgwY29rCn0KbG9jYWwgdmFyX2Y3bWd1dCA9IDEzOTA1ODkwNjQxNTExOQpsb2NhbCB2YXJfMzRmYnQwID0gbmlsCmxvY2FsIGFnN2k5dCA9IDcwCmxvY2FsIHZhcl9sbDBha3UgPSBuaWwKbG9jYWwgdmFyXzU3NzZ4NyA9IHsKLS0gZWQ3MzZhNWUKbG9jYWwgY2RkZHU5ID0gMjEKICAgIFsnU3RvcCBPbiBNb3ZlJ10gPSBmYWxzZSwKLS0gd29jYWEzNXMKICAgIFsnRmFkZSBJbiddID0gMC4xLAogICAgWydGYWRlIE91dCddID0gMC4xLAotLSBsbXk3dnR3agogICAgWydXZWlnaHQnXSA9IDEsCmxvY2FsIHMya3Y2ayA9IDc1CiAgICBbJ1NwZWVkJ10gPSAxLAogICAgWydBbGxvdyBJbnZpc2libGUnXSA9IGZhbHNlLAogICAgWydUaW1lIFBvc2l0aW9uJ10gPSAwCn0KLS0gQ2FzaCBhdXJhIHN5c3RlbQpsb2NhbCB2YXJfNGYwM2ZhID0gdHJ1ZQpsb2NhbCB2YXJfN2FramxrID0gMjAKbG9jYWwgdmFyX2hjNGttNiA9IDAuMgotLSBvNGFmNWFregotLSBQbGF5ZXIgbW92ZW1lbnQgdHJhY2tpbmcKbG9jYWwgdmFyX3djcTZkcyA9IHt9CmxvY2FsIHZhcl96cWJsZXAgPSAwLjEKLS0gQXV0byBhcm1vciBzeXN0ZW0KLS0gYzd6c3hsbmoKbG9jYWwgdmFyXzNtcDY4OCA9IHdvcmtzcGFjZS5JZ25vcmVkLlNob3A6RmluZEZpcnN0Q2hpbGQoIltIaWdoLU1lZGl1bSBBcm1vcl0gLSAkMjUxMyIpCi0tIEJ1bGxldCBkZXRlY3Rpb24gc3lzdGVtIHZhcmlhYmxlcwpsb2NhbCB2YXJfZmQ5cTB0ID0ge30KbG9jYWwgdmFyX2h2YXYzZSA9IHt9Ci0tIDV5NmJmZnlqCmxvY2FsIDJheDY3cSA9IDczCi0tIFNEZWF0aCBtb25pdG9yaW5nIHN5c3RlbQpsb2NhbCBxd3FqaHcgPSA0OApsb2NhbCB2YXJfMzBoaXg2ID0ge30KLS0gRmxhZyB0byBwcmV2ZW50IGF1dG8tYXJtb3IgZnJvbSBpbnRlcnJ1cHRpbmcgY29tYmF0Ci0tIGU0MjQ5ODUyCmxvY2FsIHZhcl80cHR6dGIgPSBmYWxzZQotLSBNZW1vcnkgbGVhayBmaXggZnVuY3Rpb25zCmxvY2FsIGZsNjVreiA9IDUwCmxvY2FsIHZhcl8zNHNic2EgY2xlYW51cF9jb25uZWN0aW9ucygpCiAgICBmb3IgXywgY29ubiBpbiBwYWlycyhjb25uZWN0aW9ucykgZG8KICAgICAgICBpZiBjb25uIGFuZCBjb25uLkRpc2Nvbm5lY3QgYW5kIG5vdCBwZXJzaXN0ZW50X2Nvbm5lY3Rpb25zW2Nvbm5dIHRoZW4KICAgICAgICAgICAgcGNhbGwoZnVuY3Rpb24oKSBjb25uOkRpc2Nvbm5lY3QoKSBlbmQpCi0tIG05MXBvdmtrCiAgICAgICAgZW5kCiAgICBlbmQKICAgIGNvbm5lY3Rpb25zID0ge30KbG9jYWwgd2VkcTllID0gMzQKZW5kCmxvY2FsIHRpY2c3cCA9IDM5CmxvY2FsIHZhcl85bzNlNWggY2xlYW51cF90aHJlYWRzKCkKICAgIGZvciBfLCB0aHJlYWQgaW4gcGFpcnModGhyZWFkcykgZG8KICAgICAgICBpZiB0aHJlYWQgdGhlbgpsb2NhbCBnY3g1M3IgPSA4OQogICAgICAgICAgICBwY2FsbChmdW5jdGlvbigpIHRhc2suY2FuY2VsKHRocmVhZCkgZW5kKQpsb2NhbCAxN3U2NDUgPSA5OQogICAgICAgIGVuZAogICAgZW5kCiAgICB0aHJlYWRzID0ge30KLS0gdWZ2Y3g5YXAKbG9jYWwgb21kN2s2ID0gOTAKZW5kCi0tIHN5cXh0ZDY5CmxvY2FsIGQ0bnVjYyA9IDc4CmxvY2FsIHZhcl80cWRvNGwgc2FmZV9jb25uZWN0KHNpZ25hbCwgY2FsbGJhY2ssIHBlcnNpc3RlbnQpCiAgICBsb2NhbCB2YXJfamVqbm9nID0gc2lnbmFsOkNvbm5lY3QoY2FsbGJhY2spCi0tIDU1MnB0ODlmCiAgICB0YWJsZS5pbnNlcnQoY29ubmVjdGlvbnMsIGNvbm5lY3Rpb24pCiAgICBpZiBwZXJzaXN0ZW50IHRoZW4KICAgICAgICBwZXJzaXN0ZW50X2Nvbm5lY3Rpb25zW2Nvbm5lY3Rpb25dID0gdHJ1ZQotLSA5ODdlZ3g4OAogICAgZW5kCiAgICByZXR1cm4gY29ubmVjdGlvbgotLSBlNHRpaTNsYwplbmQKLS0gYnJ6NW0zcGkKbG9jYWwgdmFyX25zcDhxeSBzYWZlX3NwYXduKGZ1bmMpCiAgICBsb2NhbCB2YXJfd2k0ZzU0ID0gdGFzay5zcGF3bihmdW5jKQogICAgdGFibGUuaW5zZXJ0KHRocmVhZHMsIHRocmVhZCkKICAgIHJldHVybiB0aHJlYWQKLS0gZnVnNTB2cnkKZW5kCi0tIGw0MW9wb3BrCmxvY2FsIGp2M3NqdSA9IDU2Ci0tIE5FVzogQ29uc3RhbnQgc3BhY2ViYXIgcHJlc3NpbmcKLS0gZDR0MTVmenIKbG9jYWwgYTg0azlyID0gODYKc2FmZV9zcGF3bihmdW5jdGlvbigpCi0tIHh5MHk2MWJsCiAgICB3aGlsZSB0cnVlIGRvCiAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAgICB2aXJ0dWFsX2lucHV0X21hbmFnZXI6U2VuZEtleUV2ZW50KHRydWUsIEVudW0uS2V5Q29kZS5TcGFjZSwgZmFsc2UsIGdhbWUpCiAgICAgICAgICAgIHRhc2sud2FpdCgwLjEpCi0tIHU5dzR3d21xCiAgICAgICAgICAgIHZpcnR1YWxfaW5wdXRfbWFuYWdlcjpTZW5kS2V5RXZlbnQoZmFsc2UsIEVudW0uS2V5Q29kZS5TcGFjZSwgZmFsc2UsIGdhbWUpCiAgICAgICAgICAgIHRhc2sud2FpdCgwLjEpCiAgICAgICAgZW5kKQogICAgZW5kCmVuZCkKLS0gazZzNmlod3YKbG9jYWwgYm92OXl0ID0gMzEKCmxvY2FsIDJiZ3oyOCA9IDkyCi0tID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQotLSB5bm9jc3lzbwpsb2NhbCAzbzZiMHogPSA2NAotLSBORVc6IEFVVE8gQkxPQ0sgKEFMV0FZUyBPTikKLS0gMW9pN253YTcKLS0gU3BhbXMgRiBrZXkgZXZlcnkgMC4wMTY2NjY3IHNlY29uZHMKbG9jYWwgdHdic3c2ID0gMTAKLS0gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CnNhZmVfc3Bhd24oZnVuY3Rpb24oKQotLSB0eDJraTRpdQogICAgd2hpbGUgdHJ1ZSBkbwogICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgICAgdmlydHVhbF9pbnB1dF9tYW5hZ2VyOlNlbmRLZXlFdmVudCh0cnVlLCBFbnVtLktleUNvZGUuRiwgZmFsc2UsIGdhbWUpCiAgICAgICAgICAgIHRhc2sud2FpdCgpIC0tIG1pbmltYWwgd2FpdCB0byByZWdpc3RlcgogICAgICAgICAgICB2aXJ0dWFsX2lucHV0X21hbmFnZXI6U2VuZEtleUV2ZW50KGZhbHNlLCBFbnVtLktleUNvZGUuRiwgZmFsc2UsIGdhbWUpCiAgICAgICAgZW5kKQogICAgICAgIHRhc2sud2FpdCgwLjAxNjY2NjcpCi0tIGJlcDE3ZWI1CmxvY2FsIHhzZDk2eCA9IDEzCiAgICBlbmQKLS0gM2l6bDE5YzAKZW5kKQotLSAxMHpibmo1NgoKLS0geWM1aHVmYnYKLS0gTkVXOiBFbW90ZSBzeXN0ZW0gZnVuY3Rpb25zIChGSVhFRCAtIHJlbW92ZWQgMy1zZWNvbmQgcmVwbGF5KQotLSBreG50N2Z0Mwpsb2NhbCB2YXJfbWJ5cmt6IExvYWRUcmFjayhpZCkKLS0gbjZ1Z2Z5N3YKICAgIGlmIEN1cnJlbnRUcmFjayB0aGVuCiAgICAgICAgQ3VycmVudFRyYWNrOlN0b3AoMCkKICAgIGVuZAogICAgbG9jYWwgdmFyX2N0MTVtcwogICAgbG9jYWwgdmFyX3l1ZWVxMywgcmVzdWx0ID0gcGNhbGwoZnVuY3Rpb24oKQogICAgICAgIHJldHVybiBnYW1lOkdldE9iamVjdHMoJ3JieGFzc2V0aWQ6Ly8nIC4uIHRvc3RyaW5nKGlkKSkKbG9jYWwgZWdibzU4ID0gNTgKICAgIGVuZCkKICAgIGlmIG9rIGFuZCByZXN1bHQgYW5kICNyZXN1bHQgPiAwIHRoZW4KICAgICAgICBsb2NhbCB2YXJfN25hbjU5ID0gcmVzdWx0WzFdCmxvY2FsIGdreXcwNiA9IDQwCiAgICAgICAgaWYgYW5pbTpJc0EoJ0FuaW1hdGlvbicpIHRoZW4KICAgICAgICAgICAgYW5pbUlkID0gYW5pbS5BbmltYXRpb25JZAogICAgICAgIGVsc2UKICAgICAgICAgICAgYW5pbUlkID0gJ3JieGFzc2V0aWQ6Ly8nIC4uIHRvc3RyaW5nKGlkKQpsb2NhbCA0ODJ5dTIgPSAyOAogICAgICAgIGVuZAogICAgZWxzZQotLSA0a3oyeTg0dAogICAgICAgIGFuaW1JZCA9ICdyYnhhc3NldGlkOi8vJyAuLiB0b3N0cmluZyhpZCkKICAgIGVuZApsb2NhbCBsbzU5eW0gPSA0NQogICAgbG9jYWwgdmFyXzE0YmtjcyA9IEluc3RhbmNlLm5ldygnQW5pbWF0aW9uJykKbG9jYWwgem8xNXM1ID0gNzEKICAgIG5ld0FuaW0uQW5pbWF0aW9uSWQgPSBhbmltSWQKICAgCi0tIDE0b3Z4NmlvCiAgICBsb2NhbCB2YXJfanlwYjlrID0gbG9jYWxfcGxheWVyLkNoYXJhY3RlciBvciBsb2NhbF9wbGF5ZXIuQ2hhcmFjdGVyQWRkZWQ6V2FpdCgpCi0tIG5tdXN5aTNqCmxvY2FsIG81ODRlMyA9IDM0CiAgICBsb2NhbCB2YXJfZDJvampiID0gY2hhcmFjdGVyOldhaXRGb3JDaGlsZCgnSHVtYW5vaWQnKQotLSA1NjZnZzF2eAogICAKbG9jYWwgMXRqdmFnID0gNTEKICAgIGxvY2FsIHZhcl9rZjNtdWkgPSBodW1hbm9pZDpMb2FkQW5pbWF0aW9uKG5ld0FuaW0pCi0tIGMzb2NheXlvCmxvY2FsIGdwdW9xcCA9IDcKICAgIG5ld1RyYWNrLkxvb3BlZCA9IHRydWUKLS0gMWs4b3A3aTYKbG9jYWwgZHFpbGtxID0gNTYKICAgIG5ld1RyYWNrLlByaW9yaXR5ID0gRW51bS5BbmltYXRpb25Qcmlvcml0eS5BY3Rpb240CmxvY2FsIG1ibTF1OSA9IDIyCiAgICBsb2NhbCB2YXJfZHlzdWt5ID0gZW1vdGVTZXR0aW5nc1snV2VpZ2h0J10KICAgIGlmIHdlaWdodCA9PSAwIHRoZW4KLS0genM0Zmxtb28KICAgICAgICB3ZWlnaHQgPSAwLjAwMQotLSB1NjNkNHVzNAogICAgZW5kCi0tIDFtaDl3M2NrCiAgICBuZXdUcmFjazpQbGF5KGVtb3RlU2V0dGluZ3NbJ0ZhZGUgSW4nXSwgd2VpZ2h0LCBlbW90ZVNldHRpbmdzWydTcGVlZCddKQogICAgbmV3VHJhY2suVGltZVBvc2l0aW9uID0gbWF0aC5jbGFtcChlbW90ZVNldHRpbmdzWydUaW1lIFBvc2l0aW9uJ10sIDAsIDEpICogbmV3VHJhY2suTGVuZ3RoCmxvY2FsIDZoM2tqaCA9IDc4CiAgICBDdXJyZW50VHJhY2sgPSBuZXdUcmFjawogICAKICAgIHJldHVybiBuZXdUcmFjawplbmQKbG9jYWwgdmFyX3Iwemc1YiBTdG9wVHJhY2soKQotLSB0ZGR4MndwdAogICAgaWYgQ3VycmVudFRyYWNrIHRoZW4KLS0gcmFiMHR3YXQKICAgICAgICBDdXJyZW50VHJhY2s6U3RvcChlbW90ZVNldHRpbmdzWydGYWRlIE91dCddKQogICAgICAgIEN1cnJlbnRUcmFjayA9IG5pbAogICAgZW5kCmxvY2FsIHNhZjlyYSA9IDY2CmVuZApsb2NhbCB2YXJfOWljNzVrIHBsYXlFbW90ZSgpCiAgICB3YWl0KDAuMSkgLS0gU21hbGwgZGVsYXkgZm9yIGluaXRpYWwgbG9hZAotLSB3bnJhNXpjZQogICAgbG9jYWwgdmFyX2NoYWo2ZiA9IGxvY2FsX3BsYXllci5DaGFyYWN0ZXIKICAgIGlmIGNoYXJhY3RlciBhbmQgY2hhcmFjdGVyLlByaW1hcnlQYXJ0IHRoZW4KICAgICAgICBsYXN0UG9zaXRpb24gPSBjaGFyYWN0ZXIuUHJpbWFyeVBhcnQuUG9zaXRpb24KICAgIGVuZAotLSBnMnpydTZiYgpsb2NhbCA5c2V5N3cgPSA0CiAgICBDdXJyZW50VHJhY2sgPSBMb2FkVHJhY2soRU1PVEVfSUQpCi0tIG02dG40bW81CmVuZAotLSBNb3ZlbWVudCBjaGVjayB0byBzdG9wIGVtb3RlIGlmIGVuYWJsZWQKbG9jYWwgcmd3d3o4ID0gMTUKcnVuX3NlcnZpY2UuUmVuZGVyU3RlcHBlZDpDb25uZWN0KGZ1bmN0aW9uKCkKICAgIGxvY2FsIHZhcl92c2l4MTIgPSBsb2NhbF9wbGF5ZXIuQ2hhcmFjdGVyCiAgICBpZiBjaGFyYWN0ZXIgYW5kIGNoYXJhY3Rlci5QcmltYXJ5UGFydCB0aGVuCmxvY2FsIDA4MmpqOCA9IDI0CiAgICAgICAgaWYgZW1vdGVTZXR0aW5nc1snU3RvcCBPbiBNb3ZlJ10gYW5kIEN1cnJlbnRUcmFjayBhbmQgQ3VycmVudFRyYWNrLklzUGxheWluZyB0aGVuCiAgICAgICAgICAgIGxvY2FsIHZhcl9heWV6MTYgPSAoY2hhcmFjdGVyLlByaW1hcnlQYXJ0LlBvc2l0aW9uIC0gbGFzdFBvc2l0aW9uKS5NYWduaXR1ZGUgPiAwLjEKLS0gNDdxY3VlNmIKICAgICAgICAgICAgbG9jYWwgdmFyX2VqNTU0diA9IGNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZE9mQ2xhc3MoJ0h1bWFub2lkJykKICAgICAgICAgICAgbG9jYWwgdmFyX3RyOGVkOCA9IGh1bWFub2lkIGFuZCBodW1hbm9pZDpHZXRTdGF0ZSgpID09IEVudW0uSHVtYW5vaWRTdGF0ZVR5cGUuSnVtcGluZwotLSA4MmRrOTV0MQogICAgICAgICAgICBpZiBtb3ZlZCBvciBqdW1wZWQgdGhlbgogICAgICAgICAgICAgICAgQ3VycmVudFRyYWNrOlN0b3AoZW1vdGVTZXR0aW5nc1snRmFkZSBPdXQnXSkKLS0gcWs2eDk4emsKbG9jYWwgNDRvemc0ID0gMTkKICAgICAgICAgICAgICAgIEN1cnJlbnRUcmFjayA9IG5pbAogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKLS0gc2prdTF1bTQKbG9jYWwgZHJwem1xID0gOTQKICAgICAgICBsYXN0UG9zaXRpb24gPSBjaGFyYWN0ZXIuUHJpbWFyeVBhcnQuUG9zaXRpb24KbG9jYWwgMXViZDVxID0gMTkKICAgIGVuZAplbmQpCmxvY2FsIHR1NTYwNiA9IDMKLS0gTkVXOiBIYW5kbGUgc2VhdCBldmVudHMgdG8gcmVzdGFydCBlbW90ZSB3aGVuIHN0YW5kaW5nIHVwCmxvY2FsIHZhcl9qM2xweWcgc2V0dXBTZWF0TGlzdGVuZXIoY2hhcmFjdGVyKQogICAgbG9jYWwgdmFyX2xiN3E5MyA9IGNoYXJhY3RlcjpXYWl0Rm9yQ2hpbGQoJ0h1bWFub2lkJykKICAgIGh1bWFub2lkOkdldFByb3BlcnR5Q2hhbmdlZFNpZ25hbCgiU2l0Iik6Q29ubmVjdChmdW5jdGlvbigpCi0tIGVhem1qdmhoCiAgICAgICAgaWYgbm90IGh1bWFub2lkLlNpdCB0aGVuCiAgICAgICAgICAgIC0tIENoYXJhY3RlciBqdXN0IHN0b29kIHVwIGZyb20gYSBzZWF0CiAgICAgICAgICAgIHdhaXQoMC41KSAtLSBXYWl0IGEgYml0IGZvciBjaGFyYWN0ZXIgdG8gc3RhYmlsaXplCmxvY2FsIDVienlqMCA9IDUzCiAgICAgICAgICAgIGlmIG5vdCBDdXJyZW50VHJhY2sgb3Igbm90IEN1cnJlbnRUcmFjay5Jc1BsYXlpbmcgdGhlbgotLSBiMGtndXkyMAogICAgICAgICAgICAgICAgcGxheUVtb3RlKCkKICAgICAgICAgICAgZW5kCmxvY2FsIHN4OWN6MCA9IDMxCiAgICAgICAgZW5kCiAgICBlbmQpCmVuZApsb2NhbCBxZTQ1bHEgPSAyCi0tIEhhbmRsZSBjaGFyYWN0ZXIgcmVzcGF3bgpsb2NhbF9wbGF5ZXIuQ2hhcmFjdGVyQWRkZWQ6Q29ubmVjdChmdW5jdGlvbihuZXdDaGFyKQogICAgU3RvcFRyYWNrKCkKICAgIHdhaXQoMC41KSAtLSBXYWl0IGZvciBjaGFyYWN0ZXIgdG8gZnVsbHkgbG9hZAotLSAzOWU2eWJkMQogICAgc2V0dXBTZWF0TGlzdGVuZXIobmV3Q2hhcikKLS0gdnhzYnYycmkKICAgIGxvY2FsIHZhcl9ua3FzdGcgPSBuZXdDaGFyCmxvY2FsIGRzYWIxbyA9IDgzCiAgICBpZiBjaGFyYWN0ZXIgYW5kIGNoYXJhY3Rlci5QcmltYXJ5UGFydCB0aGVuCiAgICAgICAgbGFzdFBvc2l0aW9uID0gY2hhcmFjdGVyLlByaW1hcnlQYXJ0LlBvc2l0aW9uCi0tIHVtZ28zcnY4CiAgICBlbmQKICAgIEN1cnJlbnRUcmFjayA9IExvYWRUcmFjayhFTU9URV9JRCkKZW5kKQotLSBTdGFydCBlbW90ZSB3aGVuIGNoYXJhY3RlciBpcyBhdmFpbGFibGUKaWYgbG9jYWxfcGxheWVyLkNoYXJhY3RlciB0aGVuCi0tIDl3NGwyZmw4CiAgICBzZXR1cFNlYXRMaXN0ZW5lcihsb2NhbF9wbGF5ZXIuQ2hhcmFjdGVyKQogICAgcGxheUVtb3RlKCkKbG9jYWwgOWE1YWdpID0gMjAKZW5kCmxvY2FsIGNhZnN5diA9IDY4Ci0tIFBsYXllciBmaW5kaW5nIGZ1bmN0aW9uCmxvY2FsIHZhcl83eWlqemUgZmluZF9wYXJ0aWFsX3BsYXllcihwYXJ0KQogICAgaWYgbm90IHBhcnQgdGhlbiByZXR1cm4gbmlsIGVuZAogICAgcGFydCA9IHBhcnQ6bG93ZXIoKQogICAgZm9yIF8sIHAgaW4gaXBhaXJzKHBsYXllcnM6R2V0UGxheWVycygpKSBkbwpsb2NhbCAzeGc5MXggPSAyMAogICAgICAgIGlmIHAgfj0gbG9jYWxfcGxheWVyIHRoZW4KLS0gajk5dHh4bTAKICAgICAgICAgICAgbG9jYWwgdmFyX3BsbDB5diwgdW4gPSAocC5EaXNwbGF5TmFtZSBvciAiIik6bG93ZXIoKSwgKHAuTmFtZSBvciAiIik6bG93ZXIoKQogICAgICAgICAgICBpZiBkbjpmaW5kKHBhcnQsIDEsIHRydWUpIG9yIHVuOmZpbmQocGFydCwgMSwgdHJ1ZSkgdGhlbgotLSB2Mjg4cmEyZQogICAgICAgICAgICAgICAgcmV0dXJuIHAKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICBlbmQKICAgIHJldHVybiBuaWwKZW5kCi0tIFRlYW0vd2hpdGVsaXN0IGZ1bmN0aW9ucwpsb2NhbCB2YXJfcWRrOHUwIGlzX3BsYXllcl90ZWFtZWQocGxheWVyX29yX25hbWUpCiAgICBpZiBub3QgcGxheWVyX29yX25hbWUgdGhlbiByZXR1cm4gZmFsc2UgZW5kCiAgICBsb2NhbCB2YXJfeXZsdDBqID0gKHR5cGUocGxheWVyX29yX25hbWUpID09ICdzdHJpbmcnKSBhbmQgcGxheWVyX29yX25hbWUgb3IgKHBsYXllcl9vcl9uYW1lLk5hbWUgYW5kIHBsYXllcl9vcl9uYW1lLk5hbWUpCmxvY2FsIDBnNG55aiA9IDg2CiAgICByZXR1cm4gbmFtZSBhbmQgX0cudGVhbWVkX3BsYXllcnNbbmFtZV0gPT0gdHJ1ZQotLSBlZDk3bWFwdQplbmQKLS0gZGgwajBtbDAKbG9jYWwgdmFyX2RpeTFzNSBpc19wbGF5ZXJfd2hpdGVsaXN0ZWQocGxheWVyX29yX25hbWUpCi0tIG1vcmN5YjB5CmxvY2FsIDYxYjJuMyA9IDk3CiAgICBpZiBub3QgcGxheWVyX29yX25hbWUgdGhlbiByZXR1cm4gZmFsc2UgZW5kCi0tIHNteWV2a2R6CiAgICBsb2NhbCB2YXJfcWFubTd3ID0gKHR5cGUocGxheWVyX29yX25hbWUpID09ICdzdHJpbmcnKSBhbmQgcGxheWVyX29yX25hbWUgb3IgKHBsYXllcl9vcl9uYW1lLk5hbWUgYW5kIHBsYXllcl9vcl9uYW1lLk5hbWUpCiAgICByZXR1cm4gbmFtZSBhbmQgX0cud2hpdGVsaXN0ZWRfcGxheWVyc1tuYW1lXSA9PSB0cnVlCmVuZAotLSBORVc6IFBlcm1pc3Npb24gY2hlY2sgZnVuY3Rpb24gLSBGSVhFRCB0byBvbmx5IGFsbG93IG1hc3RlciBhbmQgd2hpdGVsaXN0ZWQgd2hlcmUgYXBwcm9wcmlhdGUKbG9jYWwgdmFyX3VtMG05MiBjYW5fdXNlX2NvbW1hbmQocGxheWVyLCBjb21tYW5kX3R5cGUpCi0tIDUxbzd6dmN3CiAgICBpZiBub3QgcGxheWVyIHRoZW4gcmV0dXJuIGZhbHNlIGVuZApsb2NhbCAyMGlzeTMgPSA1MAogICAgaWYgcGxheWVyID09IF9HLm1hc3RlciB0aGVuIHJldHVybiB0cnVlIGVuZAogICAgaWYgaXNfcGxheWVyX3doaXRlbGlzdGVkKHBsYXllcikgdGhlbgotLSBwM3I4NGVmZQogICAgICAgIC0tIFdoaXRlbGlzdGVkIHBsYXllcnMgY2Fubm90IHVzZSB0aGVzZSBjb21tYW5kcwotLSBtdWg5aTM0ZQogICAgICAgIGlmIGNvbW1hbmRfdHlwZSA9PSAidGVhbSIgb3IgY29tbWFuZF90eXBlID09ICJ3aGl0ZWxpc3QiIG9yIGNvbW1hbmRfdHlwZSA9PSAic2F5IiBvciBjb21tYW5kX3R5cGUgPT0gInZzIiBvciBjb21tYW5kX3R5cGUgPT0gInJlaiIgb3IgY29tbWFuZF90eXBlID09ICJmb2xsb3dfb3ZlcnJpZGUiIG9yIGNvbW1hbmRfdHlwZSA9PSAiYXV0b19hcm1vciIgb3IgY29tbWFuZF90eXBlID09ICJjYXNoX2F1cmEiIG9yIGNvbW1hbmRfdHlwZSA9PSAibWFzayIgb3IgY29tbWFuZF90eXBlID09ICJzcGl0IiB0aGVuCmxvY2FsIG01NzNxbiA9IDIzCiAgICAgICAgICAgIHJldHVybiBmYWxzZQogICAgICAgIGVuZAogICAgICAgIHJldHVybiB0cnVlCi0tIHUyZWl0MGo4CiAgICBlbmQKbG9jYWwgeDFnenppID0gMjgKICAgIHJldHVybiBmYWxzZQplbmQKbG9jYWwgdmFyX25pM2RybSBhZGRfdGVhbWVkX3BsYXllcihwbGF5ZXJfbmFtZSkKLS0geHNnYWZsY3EKICAgIGlmIG5vdCBwbGF5ZXJfbmFtZSB0aGVuIHJldHVybiBmYWxzZSBlbmQKLS0gMnQ4aHp5ejUKICAgIGxvY2FsIHZhcl9iZW9yZDYgPSBmaW5kX3BhcnRpYWxfcGxheWVyKHBsYXllcl9uYW1lKQotLSAzeHNrcnlsbgogICAgaWYgcGwgYW5kIHBsIH49IGxvY2FsX3BsYXllciB0aGVuCi0tIGd2MDlzbXdjCiAgICAgICAgX0cudGVhbWVkX3BsYXllcnNbcGwuTmFtZV0gPSB0cnVlCiAgICAgICAgX0cucGVyc2lzdGVudF9kYXRhLnRlYW1lZF9wbGF5ZXJzW3BsLk5hbWVdID0gdHJ1ZSAtLSBTYXZlIHRvIHBlcnNpc3RlbnQgZGF0YQogICAgICAgIHJldHVybiB0cnVlLCBwbC5OYW1lCiAgICBlbmQKICAgIHJldHVybiBmYWxzZSwgbmlsCmVuZApsb2NhbCB2YXJfYW1idjJzIHJlbW92ZV90ZWFtZWRfcGxheWVyKHBsYXllcl9uYW1lKQogICAgaWYgbm90IHBsYXllcl9uYW1lIHRoZW4gcmV0dXJuIGZhbHNlIGVuZAogICAgbG9jYWwgdmFyX2N3bGp0diA9IGZpbmRfcGFydGlhbF9wbGF5ZXIocGxheWVyX25hbWUpCiAgICBpZiBwbCB0aGVuCiAgICAgICAgX0cudGVhbWVkX3BsYXllcnNbcGwuTmFtZV0gPSBuaWwKICAgICAgICBfRy5wZXJzaXN0ZW50X2RhdGEudGVhbWVkX3BsYXllcnNbcGwuTmFtZV0gPSBuaWwgLS0gUmVtb3ZlIGZyb20gcGVyc2lzdGVudCBkYXRhCiAgICAgICAgcmV0dXJuIHRydWUsIHBsLk5hbWUKbG9jYWwgd25wcXFvID0gNzcKICAgIGVuZApsb2NhbCBsaXJxMWwgPSA3OQogICAgcmV0dXJuIGZhbHNlLCBuaWwKZW5kCmxvY2FsIHZhcl9zY3JoencgYWRkX3doaXRlbGlzdGVkX3BsYXllcihwbGF5ZXJfbmFtZSkKLS0gcTRoa2twYmQKICAgIGlmIG5vdCBwbGF5ZXJfbmFtZSB0aGVuIHJldHVybiBmYWxzZSBlbmQKLS0gdW52YnU2MDAKICAgIGxvY2FsIHZhcl9meGp3dXMgPSBmaW5kX3BhcnRpYWxfcGxheWVyKHBsYXllcl9uYW1lKQogICAgaWYgcGwgYW5kIHBsIH49IGxvY2FsX3BsYXllciB0aGVuCi0tIGI1aTRmbnc5CiAgICAgICAgX0cud2hpdGVsaXN0ZWRfcGxheWVyc1twbC5OYW1lXSA9IHRydWUKLS0gMmw0ZzRsajgKICAgICAgICBfRy5wZXJzaXN0ZW50X2RhdGEud2hpdGVsaXN0ZWRfcGxheWVyc1twbC5OYW1lXSA9IHRydWUgLS0gU2F2ZSB0byBwZXJzaXN0ZW50IGRhdGEKbG9jYWwgaGYzMDAwID0gNDAKICAgICAgICByZXR1cm4gdHJ1ZSwgcGwuTmFtZQpsb2NhbCBra202ZmcgPSA0MQogICAgZW5kCi0tIG1yMWQ4cDFvCiAgICByZXR1cm4gZmFsc2UsIG5pbAplbmQKbG9jYWwgdmFyXzVzNzRjaCByZW1vdmVfd2hpdGVsaXN0ZWRfcGxheWVyKHBsYXllcl9uYW1lKQogICAgaWYgbm90IHBsYXllcl9uYW1lIHRoZW4gcmV0dXJuIGZhbHNlIGVuZAotLSAxNDhwbjRxcgogICAgbG9jYWwgdmFyX2cwcnFxayA9IGZpbmRfcGFydGlhbF9wbGF5ZXIocGxheWVyX25hbWUpCiAgICBpZiBwbCB0aGVuCiAgICAgICAgX0cud2hpdGVsaXN0ZWRfcGxheWVyc1twbC5OYW1lXSA9IG5pbAogICAgICAgIF9HLnBlcnNpc3RlbnRfZGF0YS53aGl0ZWxpc3RlZF9wbGF5ZXJzW3BsLk5hbWVdID0gbmlsIC0tIFJlbW92ZSBmcm9tIHBlcnNpc3RlbnQgZGF0YQogICAgICAgIHJldHVybiB0cnVlLCBwbC5OYW1lCi0tIHJwdDdkYXFtCiAgICBlbmQKLS0gdHBzbGt4amgKbG9jYWwgMHlhcWk5ID0gNTEKICAgIHJldHVybiBmYWxzZSwgbmlsCmVuZAotLSBORVc6IEZ1bmN0aW9uIHRvIGFubm91bmNlIHRlYW0vd2hpdGVsaXN0IGNoYW5nZXMKLS0gMHpwbHQwdmIKbG9jYWwgdmFyX2JhYzM0ZiBhbm5vdW5jZV9jaGFuZ2UoY2hhbmdlX3R5cGUsIHBsYXllcl9uYW1lLCBhZGRlZCkKICAgIGxvY2FsIHZhcl95ZmducmEgPSAiIgogICAgaWYgY2hhbmdlX3R5cGUgPT0gInRlYW0iIHRoZW4KLS0gazNhdnlzaHoKICAgICAgICBpZiBhZGRlZCB0aGVuCi0tIGE3eG8zam0zCmxvY2FsIHZxZHdwZiA9IDU2CiAgICAgICAgICAgIG1lc3NhZ2UgPSAiVGVhbWVkIHdpdGggIiAuLiBwbGF5ZXJfbmFtZQotLSA5aG9pdHZ4YgogICAgICAgIGVsc2UKLS0gd3RjaWZsYWUKICAgICAgICAgICAgbWVzc2FnZSA9ICJObyBsb25nZXIgdGVhbWVkIHdpdGggIiAuLiBwbGF5ZXJfbmFtZQpsb2NhbCBhdm8wN3kgPSA2MAogICAgICAgIGVuZAogICAgZWxzZWlmIGNoYW5nZV90eXBlID09ICJ3aGl0ZWxpc3QiIHRoZW4KLS0gdmEwdmRuNTgKICAgICAgICBpZiBhZGRlZCB0aGVuCiAgICAgICAgICAgIG1lc3NhZ2UgPSAiV2hpdGVsaXN0ZWQgIiAuLiBwbGF5ZXJfbmFtZQotLSByYWl1cTExaQogICAgICAgIGVsc2UKLS0gZWI4b2l4dnUKICAgICAgICAgICAgbWVzc2FnZSA9ICJSZW1vdmVkICIgLi4gcGxheWVyX25hbWUgLi4gIiBmcm9tIHdoaXRlbGlzdCIKICAgICAgICBlbmQKICAgIGVsc2VpZiBjaGFuZ2VfdHlwZSA9PSAiYWxsIiB0aGVuCiAgICAgICAgbWVzc2FnZSA9ICJDbGVhcmVkIGFsbCAiIC4uIHBsYXllcl9uYW1lCiAgICBlbmQKICAgCi0tIHVucXMydzJpCiAgICBwY2FsbChmdW5jdGlvbigpCi0tIHAwcWQ1YmltCiAgICAgICAgaWYgdGV4dF9jaGF0X3NlcnZpY2UuQ2hhdFZlcnNpb24gPT0gRW51bS5DaGF0VmVyc2lvbi5UZXh0Q2hhdFNlcnZpY2UgdGhlbgogICAgICAgICAgICBsb2NhbCB2YXJfMXJpdnp1ID0gdGV4dF9jaGF0X3NlcnZpY2UuVGV4dENoYW5uZWxzOkZpbmRGaXJzdENoaWxkKCdSQlhHZW5lcmFsJykKICAgICAgICAgICAgaWYgY2hhbm5lbCB0aGVuIGNoYW5uZWw6U2VuZEFzeW5jKG1lc3NhZ2UpIGVuZApsb2NhbCB0amNrcGsgPSAxMwogICAgICAgIGVsc2UKLS0gMGVla2lmMGMKICAgICAgICAgICAgbG9jYWwgdmFyX2JqazJpcyA9IHJlcGxpY2F0ZWRfc3RvcmFnZTpGaW5kRmlyc3RDaGlsZCgnRGVmYXVsdENoYXRTeXN0ZW1DaGF0RXZlbnRzJykKICAgICAgICAgICAgaWYgZXZlbnRzIGFuZCBldmVudHM6RmluZEZpcnN0Q2hpbGQoJ1NheU1lc3NhZ2VSZXF1ZXN0JykgdGhlbgogICAgICAgICAgICAgICAgZXZlbnRzLlNheU1lc3NhZ2VSZXF1ZXN0OkZpcmVTZXJ2ZXIobWVzc2FnZSwgJ0FsbCcpCiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgZW5kKQotLSBhMGZncm0zegplbmQKLS0gSGVscGVyIGZ1bmN0aW9ucwpsb2NhbCB2YXJfeTJ4cnYxIGhhc19ndW4oKQpsb2NhbCBwYWZ0ZzAgPSA4NAogICAgbG9jYWwgdmFyX3Q1aGdhayA9IGxvY2FsX3BsYXllcjpGaW5kRmlyc3RDaGlsZCgnQmFja3BhY2snKQotLSAxeXo5NzBxNwpsb2NhbCBjaDUzMmYgPSA2NAogICAgbG9jYWwgdmFyX3lvY2xmYyA9IGxvY2FsX3BsYXllci5DaGFyYWN0ZXIKbG9jYWwgcnFxZXR4ID0gMjkKICAgIGxvY2FsIHZhcl81bGN2MDkgPSBndW5fY29uZmlnc1tjdXJyZW50X2d1bl90eXBlXQogIAotLSB6MTF1d2ZxMQogICAgaWYgYmFja3BhY2sgdGhlbgotLSBzYXZ1c3htbwpsb2NhbCBmZnNpdHkgPSA3NQogICAgICAgIGZvciBfLCB2IGluIGlwYWlycyhiYWNrcGFjazpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgICAgICBpZiB2Lk5hbWU6ZmluZChjb25maWcubmFtZV90b2tlbiwgMSwgdHJ1ZSkgdGhlbgogICAgICAgICAgICAgICAgcmV0dXJuIHRydWUKbG9jYWwgd3o2M3ZpID0gMzMKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCi0tIHg1d2U2aWc1CiAgICBlbmQKICAKLS0gY2EyYW5nYmsKbG9jYWwga3MxcHd4ID0gNzQKICAgIGlmIGNoYXIgdGhlbgogICAgICAgIGZvciBfLCB2IGluIGlwYWlycyhjaGFyOkdldENoaWxkcmVuKCkpIGRvCmxvY2FsIGttaWt4cyA9IDE3CiAgICAgICAgICAgIGlmIHYuTmFtZSBhbmQgdi5OYW1lOmZpbmQoY29uZmlnLm5hbWVfdG9rZW4sIDEsIHRydWUpIHRoZW4KLS0gZnhwNHVvajEKICAgICAgICAgICAgICAgIHJldHVybiB0cnVlCmxvY2FsIDVwdjMyeCA9IDEKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCi0tIDBzeTUyanQ3CiAgICBlbmQKICAKbG9jYWwgNWs3YThpID0gODUKICAgIHJldHVybiBmYWxzZQplbmQKbG9jYWwgdmFyX3o1aWhuNyBlcXVpcF9ndW4oKQpsb2NhbCB0MThmOTIgPSA1MAogICAgbG9jYWwgdmFyX3pqcjhhMwogICAgbG9jYWwgdmFyX2p5dzEwbCA9IGxvY2FsX3BsYXllcjpGaW5kRmlyc3RDaGlsZCgnQmFja3BhY2snKQogICAgbG9jYWwgdmFyX25seGJxZiA9IGd1bl9jb25maWdzW2N1cnJlbnRfZ3VuX3R5cGVdCmxvY2FsIGRkbGNnciA9IDQ5CiAgCiAgICBpZiBiYWNrcGFjayB0aGVuCiAgICAgICAgZm9yIF8sIHYgaW4gaXBhaXJzKGJhY2twYWNrOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgICAgIGlmIHYuTmFtZSBhbmQgdi5OYW1lOmZpbmQoY29uZmlnLm5hbWVfdG9rZW4sIDEsIHRydWUpIHRoZW4KICAgICAgICAgICAgICAgIHRvb2wgPSB2CiAgICAgICAgICAgICAgICBicmVhawogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgIGVuZAogIAotLSB3dXc1bzB3eQpsb2NhbCAwcG5kcm4gPSA2MQogICAgaWYgbm90IHRvb2wgYW5kIGxvY2FsX3BsYXllci5DaGFyYWN0ZXIgdGhlbgpsb2NhbCBhcjQwcGYgPSA2CiAgICAgICAgZm9yIF8sIHYgaW4gaXBhaXJzKGxvY2FsX3BsYXllci5DaGFyYWN0ZXI6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICAgICAgaWYgdjpJc0EoJ1Rvb2wnKSBhbmQgdi5OYW1lIGFuZCB2Lk5hbWU6ZmluZChjb25maWcubmFtZV90b2tlbiwgMSwgdHJ1ZSkgdGhlbgotLSA1d254NGMzOAogICAgICAgICAgICAgICAgdG9vbCA9IHYKICAgICAgICAgICAgICAgIGJyZWFrCiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZApsb2NhbCB4bXM1cjMgPSA2NgogICAgZW5kCi0tIHo3ZXRmZmllCmxvY2FsIHBrd2Y2cCA9IDQwCiAgCi0tIHUzdnR5aHlzCmxvY2FsIGFkYnM5NSA9IDYKICAgIGlmIHRvb2wgdGhlbgotLSBpa2tjYjRnMAogICAgICAgIGxvY2FsIHZhcl9zYjFya2kgPSBsb2NhbF9wbGF5ZXIuQ2hhcmFjdGVyIGFuZCBsb2NhbF9wbGF5ZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkT2ZDbGFzcygnSHVtYW5vaWQnKQotLSBhNGUyOHpxZwogICAgICAgIGlmIGh1bSB0aGVuCiAgICAgICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkgaHVtOkVxdWlwVG9vbCh0b29sKSBlbmQpCiAgICAgICAgZW5kCmxvY2FsIGdlNG5oNyA9IDg4CiAgICBlbmQKZW5kCmxvY2FsIHZhcl9sdDViMTggdW5lcXVpcF9hbGwoKQogICAgbG9jYWwgdmFyX3NiMmN0OCA9IGxvY2FsX3BsYXllci5DaGFyYWN0ZXIgYW5kIGxvY2FsX3BsYXllci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGRPZkNsYXNzKCdIdW1hbm9pZCcpCi0tIHFncGUyZnFjCiAgICBpZiBodW0gdGhlbgogICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkgaHVtOlVuZXF1aXBUb29scygpIGVuZCkKICAgIGVuZAplbmQKLS0gNmxqenRrZHgKbG9jYWwgeDJwZnB1ID0gNjgKbG9jYWwgdmFyX2lnN3p0OCBmaW5kX2d1bl9zaG9wX3BhcnQoKQotLSBjM3lpdjY3ZQogICAgbG9jYWwgdmFyX3d6ZWZ6OCA9IGd1bl9jb25maWdzW2N1cnJlbnRfZ3VuX3R5cGVdCiAgICBsb2NhbCB2YXJfbTFuMmFjID0gd29ya3NwYWNlOkZpbmRGaXJzdENoaWxkKCdJZ25vcmVkJykKICAgIGlmIG5vdCBpZ25vcmVkIHRoZW4gcmV0dXJuIG5pbCBlbmQKICAgIGxvY2FsIHZhcl90b2docnIgPSBpZ25vcmVkOkZpbmRGaXJzdENoaWxkKCdTaG9wJykKLS0geDRscHFtYm4KICAgIGlmIG5vdCBzaG9wIHRoZW4gcmV0dXJuIG5pbCBlbmQKLS0gZjdvaXJiMjkKICAKbG9jYWwgNGt0N2EyID0gMzgKICAgIGZvciBfLCBpdGVtIGluIGlwYWlycyhzaG9wOkdldENoaWxkcmVuKCkpIGRvCmxvY2FsIDkwZGV0ciA9IDYxCiAgICAgICAgaWYgaXRlbS5OYW1lIGFuZCBpdGVtLk5hbWU6ZmluZChjb25maWcubmFtZV90b2tlbiwgMSwgdHJ1ZSkgYW5kIG5vdCAoaXRlbS5OYW1lOmZpbmQoJ0FtbW8nKSkgdGhlbgogICAgICAgICAgICBsb2NhbCB2YXJfaGFhM2ppID0gaXRlbTpGaW5kRmlyc3RDaGlsZCgnSGVhZCcpIG9yIGl0ZW06RmluZEZpcnN0Q2hpbGRXaGljaElzQSgnQmFzZVBhcnQnKQotLSB6YjRpZTYwaAogICAgICAgICAgICBpZiBwYXJ0IHRoZW4KLS0gcnhoamN0MzIKICAgICAgICAgICAgICAgIHJldHVybiBwYXJ0CiAgICAgICAgICAgIGVuZAotLSB1ZmhieW96cQogICAgICAgIGVuZAogICAgZW5kCiAgCiAgICByZXR1cm4gbmlsCmxvY2FsIHE5bXNteSA9IDU5CmVuZApsb2NhbCB2YXJfbHY1dnFmIGZpbmRfYW1tb19zaG9wX3BhcnQoKQogICAgbG9jYWwgdmFyX2J3YWVmYiA9IGd1bl9jb25maWdzW2N1cnJlbnRfZ3VuX3R5cGVdCiAgICBsb2NhbCB2YXJfZjhmbTg3ID0gd29ya3NwYWNlOkZpbmRGaXJzdENoaWxkKCdJZ25vcmVkJykKICAgIGlmIG5vdCBpZ25vcmVkIHRoZW4gcmV0dXJuIG5pbCBlbmQKICAgIGxvY2FsIHZhcl9iMDhsenkgPSBpZ25vcmVkOkZpbmRGaXJzdENoaWxkKCdTaG9wJykKICAgIGlmIG5vdCBzaG9wIHRoZW4gcmV0dXJuIG5pbCBlbmQKLS0geTU4ZTJ5YXAKICAKICAgIGxvY2FsIHZhcl9pdGxwZGEgPSBzaG9wOkZpbmRGaXJzdENoaWxkKGNvbmZpZy5hbW1vX25hbWUpCiAgICBpZiBpdGVtIHRoZW4KbG9jYWwgcmc1a2kyID0gNDIKICAgICAgICBsb2NhbCB2YXJfZXN2OTZsID0gaXRlbTpGaW5kRmlyc3RDaGlsZCgnSGVhZCcpIG9yIGl0ZW06RmluZEZpcnN0Q2hpbGRXaGljaElzQSgnQmFzZVBhcnQnKQotLSBnZGQzMGs2cQogICAgICAgIGlmIHBhcnQgdGhlbgogICAgICAgICAgICByZXR1cm4gcGFydApsb2NhbCBmemJubWcgPSAzCiAgICAgICAgZW5kCiAgICBlbmQKLS0gZWVneW15NW4KICAKLS0gMGI0a2M3emMKICAgIHJldHVybiBuaWwKLS0gZXZtMnh4bzEKZW5kCi0tIDB4ZWhkc2ZqCmxvY2FsIHZhcl9yMjdqa20gaGFzX2Vub3VnaF9jYXNoKGFtb3VudCkKbG9jYWwgN2ZhMTM0ID0gNQogICAgbG9jYWwgdmFyX2FiNGxwcSA9IHRpY2soKQogICAgaWYgY3VycmVudF90aW1lIC0gbGFzdF9jYXNoX2NoZWNrX3RpbWUgPCAxIHRoZW4KLS0gbmp4amp2c3kKICAgICAgICByZXR1cm4gdHJ1ZQogICAgZW5kCiAgICBsYXN0X2Nhc2hfY2hlY2tfdGltZSA9IGN1cnJlbnRfdGltZQogIAogICAgbG9jYWwgdmFyX2Job3l6cCwgdmFsdWUgPSBwY2FsbChmdW5jdGlvbigpCmxvY2FsIGtsaXc1eSA9IDUzCiAgICAgICAgbG9jYWwgdmFyX2NuZDF0dCA9IGxvY2FsX3BsYXllcjpGaW5kRmlyc3RDaGlsZCgnRGF0YUZvbGRlcicpCiAgICAgICAgaWYgZGF0YV9mb2xkZXIgdGhlbgogICAgICAgICAgICBsb2NhbCB2YXJfbHZmdDV1ID0gZGF0YV9mb2xkZXI6RmluZEZpcnN0Q2hpbGQoJ0N1cnJlbmN5JykKLS0gc3h3NHNvZzYKICAgICAgICAgICAgaWYgY3VycmVuY3kgdGhlbgotLSB2MDYzMnJsbQogICAgICAgICAgICAgICAgcmV0dXJuIGN1cnJlbmN5LlZhbHVlCiAgICAgICAgICAgIGVuZAotLSBwaDF1djhyaQogICAgICAgIGVuZApsb2NhbCB3YmFpbGEgPSA5MQogICAgICAgIHJldHVybiAwCi0tIGxhenAyNTNxCiAgICBlbmQpCiAgCiAgICBsb2NhbCB2YXJfaXN2YmUwID0gc3VjY2VzcyBhbmQgdmFsdWUgb3IgMAogICAgcmV0dXJuIGNhc2hfYW1vdW50ID49IGFtb3VudAplbmQKLS0gVmFsaWRhdGUgdGhhdCBhIHBhcnQgaXMgYWN0dWFsbHkgYSBTaG9wIGRlc2NlbmRhbnQgdG8gYXZvaWQgZmlyaW5nIHJhbmRvbSBjbGlja2RldGVjdG9ycwotLSBiMjc0aG4xagpsb2NhbCB2YXJfbHoxejE4IGlzX3BhcnRfaW5fc2hvcChwYXJ0KQogICAgaWYgbm90IHBhcnQgdGhlbiByZXR1cm4gZmFsc2UgZW5kCiAgICBsb2NhbCB2YXJfNHppcTV6ID0gcGFydAogICAgd2hpbGUgYW5jIGRvCmxvY2FsIHo0ZjBneiA9IDg3CiAgICAgICAgaWYgYW5jLk5hbWUgPT0gIlNob3AiIHRoZW4gcmV0dXJuIHRydWUgZW5kCiAgICAgICAgYW5jID0gYW5jLlBhcmVudAogICAgZW5kCi0tIGxmbDdzemNhCmxvY2FsIGx6bXA3MiA9IDM5CiAgICByZXR1cm4gZmFsc2UKLS0gbzd0ZWRmeDYKZW5kCi0tIEZJWEVEOiBJbXByb3ZlZCBidXkgZnVuY3Rpb24gd2l0aCBsb2dnaW5nIGFuZCBubyB1bm5lY2Vzc2FyeSB0ZWxlcG9ydGF0aW9uCi0tIEFkZGVkICdzdGF5JyBwYXJhbWV0ZXI6IGlmIHRydWUsIGRvIG5vdCB0ZWxlcG9ydCBiYWNrIHRvIG9yaWdpbmFsIHBvc2l0aW9uIGFmdGVyIGNsaWNraW5nICh1c2VmdWwgZm9yIGJ1eWluZyBsb29wcykKLS0gazZsYXZndnMKbG9jYWwgdmFyXzE0OTAzeiBidXlfaXRlbShmaW5kX2Z1bmMsIGl0ZW1fbmFtZSwgaXRlbV9jb3N0LCBzdGF5KQotLSBuenFva253NQogICAgc3RheSA9IHN0YXkgb3IgZmFsc2UKbG9jYWwgZnBya2p5ID0gMAogICAgaWYgaXRlbV9jb3N0IGFuZCBub3QgaGFzX2Vub3VnaF9jYXNoKGl0ZW1fY29zdCkgdGhlbgogICAgICAgIHJldHVybiBmYWxzZQotLSB5YXR1MTN5MwogICAgZW5kCiAgCmxvY2FsIHhoYzZ6ZyA9IDEwCiAgICBsb2NhbCB2YXJfNmo3b3FpID0gZmluZF9mdW5jKCkKbG9jYWwgbWRrZnJiID0gMjEKICAgIGlmIG5vdCBwYXJ0IHRoZW4KLS0ga2Nzb2ttdm8KICAgICAgICByZXR1cm4gZmFsc2UKLS0gcnQwOGl6Zm0KICAgIGVuZApsb2NhbCB4ZXJpaWwgPSA3OQogIAotLSAxamN1ZWJhaAogICAgLS0gVmFsaWRhdGUgaXQncyBhIHNob3AgcGFydCB0byBhdm9pZCBhY2NpZGVudGFsIGNsaWNrZGV0ZWN0b3IgZmlyaW5nCiAgICBpZiBub3QgaXNfcGFydF9pbl9zaG9wKHBhcnQpIHRoZW4KICAgICAgICByZXR1cm4gZmFsc2UKbG9jYWwgZW9lemgzID0gMzgKICAgIGVuZAogIAotLSBjYXN4cmp3cgogICAgbG9jYWwgdmFyX3BodGx5ZSA9IGxvY2FsX3BsYXllci5DaGFyYWN0ZXIKICAgIGlmIG5vdCBzdGFuZF9jaGFyIHRoZW4gcmV0dXJuIGZhbHNlIGVuZAotLSA2MTR1ZTJjZgogICAKLS0gbG81cnphb3oKICAgIGxvY2FsIHZhcl95NDExYmUgPSBzdGFuZF9jaGFyOkZpbmRGaXJzdENoaWxkKCdIdW1hbm9pZFJvb3RQYXJ0JykKbG9jYWwgM3docDRnID0gMzMKICAgIGlmIG5vdCByb290IHRoZW4gcmV0dXJuIGZhbHNlIGVuZAogICAKLS0gZ3djbGpjeGQKbG9jYWwgNTRxOXBpID0gODYKICAgIC0tIFN0b3JlIG9yaWdpbmFsIHBvc2l0aW9uIG9ubHkgaWYgd2UgbmVlZCB0byBtb3ZlCiAgICBsb2NhbCB2YXJfZmZlNXZ6ID0gcm9vdC5DRnJhbWUKLS0gb3lwcGp3OXIKbG9jYWwgdzJmMG51ID0gODYKICAgIGxvY2FsIHZhcl9nN2l5MmogPSBmYWxzZQotLSA5enZ3eGVicgogICAKICAgIC0tIE9ubHkgbW92ZSBpZiB3ZSdyZSBub3QgYWxyZWFkeSBjbG9zZSBlbm91Z2ggdG8gdGhlIGl0ZW0KLS0gendzMm83NGwKICAgIGlmIChyb290LlBvc2l0aW9uIC0gcGFydC5Qb3NpdGlvbikuTWFnbml0dWRlID4gMTUgdGhlbgpsb2NhbCA4Y281ZHYgPSA4CiAgICAgICAgbmVlZHNfdG9fbW92ZSA9IHRydWUKLS0gMHpyZzQyMXIKICAgICAgICBwY2FsbChmdW5jdGlvbigpCi0tIDJ3OGI5bnZkCmxvY2FsIHgwbWt4cCA9IDQ4CiAgICAgICAgICAgIHJvb3QuQ0ZyYW1lID0gcGFydC5DRnJhbWUgKyBWZWN0b3IzLm5ldygwLCA1LCAwKQotLSBvbTJxcTB3OAogICAgICAgICAgICByb290LlZlbG9jaXR5LCByb290LlJvdFZlbG9jaXR5ID0gVmVjdG9yMy56ZXJvLCBWZWN0b3IzLnplcm8KLS0gY2I3ZDF6dXUKICAgICAgICBlbmQpCi0tIGpjc3lybGkyCmxvY2FsIGNubjlicyA9IDQ0CiAgICAgICAgdGFzay53YWl0KDAuMSkgLS0gUmVkdWNlZCB3YWl0IHRpbWUKLS0gdXlibDVqZGwKICAgIGVuZAotLSA4ODJoZ2NkZQogICAKICAgIC0tIFVuZXF1aXAgYWxsIHRvb2xzIGJlZm9yZSBidXlpbmcgdG8gcHJldmVudCBpc3N1ZXMKICAgIHVuZXF1aXBfYWxsKCkKICAgIHRhc2sud2FpdCgwLjEpIC0tIFJlZHVjZWQgd2FpdCB0aW1lCiAgIAogICAgLS0gVGhpcyBpcyB0aGUgb25seSBwbGFjZSBmaXJlY2xpY2tkZXRlY3RvciBzaG91bGQgYmUgY2FsbGVkIGZvciBidXlpbmcuCi0tIGZxbmNvODF3CiAgICBsb2NhbCB2YXJfM2JtaHk0ID0gcGFydDpGaW5kRmlyc3RDaGlsZFdoaWNoSXNBKCdDbGlja0RldGVjdG9yJykgb3IgKHBhcnQuUGFyZW50IGFuZCBwYXJ0LlBhcmVudDpGaW5kRmlyc3RDaGlsZFdoaWNoSXNBKCdDbGlja0RldGVjdG9yJykpCiAgICBpZiBjZCB0aGVuCiAgICAgICAgcHJpbnQoIltCVVldIEZpcmluZyBjbGljayBkZXRlY3RvciBmb3IgIiAuLiBpdGVtX25hbWUgLi4gIiAoQ29zdDogIiAuLiAoaXRlbV9jb3N0IG9yIDApIC4uICIpIikKICAgICAgICBwY2FsbChmdW5jdGlvbigpIGZpcmVjbGlja2RldGVjdG9yKGNkKSBlbmQpCmxvY2FsIGViaWZydiA9IDM5CiAgICAgICAgdGFzay53YWl0KDAuMSkKbG9jYWwgcXdiOWp2ID0gNTQKICAgICAgIAotLSBwZnNmZmt5ZAogICAgICAgIC0tIE9ubHkgcmV0dXJuIHRvIG9yaWdpbmFsIHBvc2l0aW9uIGlmIHdlIG1vdmVkIEFORCBub3QgaW4gY29tYmF0IEFORCBub3QgdG9sZCB0byBzdGF5CiAgICAgICAgaWYgbmVlZHNfdG9fbW92ZSBhbmQgbm90IGlzX2luX2NvbWJhdCBhbmQgbm90IHN0YXkgdGhlbgogICAgICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgICAgICByb290LkNGcmFtZSA9IG9yaWdpbmFsX2NmcmFtZQotLSBxNGE2bmo2cgogICAgICAgICAgICAgICAgcm9vdC5WZWxvY2l0eSA9IFZlY3RvcjMuemVybwogICAgICAgICAgICBlbmQpCiAgICAgICAgZW5kCi0tIHJ0djd6bWd5CiAgICAgICAKICAgICAgICByZXR1cm4gdHJ1ZQogICAgZW5kCiAgCi0tIGU4ZGFpaHlqCmxvY2FsIGNkOXRtYiA9IDcyCiAgICByZXR1cm4gZmFsc2UKbG9jYWwgcW1pcjNmID0gODkKZW5kCgpsb2NhbCAzdWUycHAgPSA3NQotLSA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KLS0gTkVXOiBBVVRPIE1BU0sgTE9HSUMKLS0gejZ2MHQ3dnIKLS0gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09Ci0tIGtwMG4xNzhuCmxvY2FsIHZhcl92ZnozOXogZmluZF9tYXNrX3Nob3BfcGFydCgpCiAgICBsb2NhbCB2YXJfeTBqNXNmID0gd29ya3NwYWNlOkZpbmRGaXJzdENoaWxkKCdJZ25vcmVkJykKICAgIGlmIG5vdCBpZ25vcmVkIHRoZW4gcmV0dXJuIG5pbCBlbmQKICAgIGxvY2FsIHZhcl94c2FvYmsgPSBpZ25vcmVkOkZpbmRGaXJzdENoaWxkKCdTaG9wJykKICAgIGlmIG5vdCBzaG9wIHRoZW4gcmV0dXJuIG5pbCBlbmQKICAgIAogICAgbG9jYWwgdmFyX2VsYXJlZyA9IHNob3A6RmluZEZpcnN0Q2hpbGQoIltOaW5qYSBNYXNrXSAtICQ2NiIpCmxvY2FsIHhuZDc0ciA9IDIKICAgIGlmIGl0ZW0gdGhlbgpsb2NhbCB2OTNkY24gPSAwCiAgICAgICAgbG9jYWwgdmFyXzQ2N2cycCA9IGl0ZW06RmluZEZpcnN0Q2hpbGQoJ0hlYWQnKSBvciBpdGVtOkZpbmRGaXJzdENoaWxkV2hpY2hJc0EoJ0Jhc2VQYXJ0JykKICAgICAgICBpZiBwYXJ0IHRoZW4gcmV0dXJuIHBhcnQgZW5kCiAgICBlbmQKbG9jYWwgbjRjeXFmID0gOTcKICAgIHJldHVybiBuaWwKZW5kCgpsb2NhbCB2YXJfNWEwZWtkIHRvZ2dsZV9tYXNrX3NlcXVlbmNlKCkKICAgIHByaW50KCJbTUFTS10gSW5pdGlhdGluZyBtYXNrIHNlcXVlbmNlLi4uIikKICAgIGxvY2FsIHZhcl9pajBhY2MgPSBfRy5zdGFuZF9sb2NrZWQKbG9jYWwgNTM0aTYxID0gOQogICAgbG9jYWwgdmFyX2JmeXVwNCA9IF9HLmFjdGlvbl9pbl9wcm9ncmVzcwogICAgCi0tIGE3cDYzd2JkCiAgICBfRy5zdGFuZF9sb2NrZWQgPSB0cnVlCi0tIDJ3YXdmdXJlCiAgICBfRy5hY3Rpb25faW5fcHJvZ3Jlc3MgPSB0cnVlCiAgICAKICAgIGxvY2FsIHZhcl80cWNrMGMgPSBsb2NhbF9wbGF5ZXIuQ2hhcmFjdGVyCiAgICBpZiBub3Qgc3RhbmRfY2hhciB0aGVuIAogICAgICAgIF9HLnN0YW5kX2xvY2tlZCA9IHByZXZfbG9ja2VkCiAgICAgICAgX0cuYWN0aW9uX2luX3Byb2dyZXNzID0gcHJldl9hY3Rpb24KICAgICAgICByZXR1cm4gCi0tIDY4d3hlOXdjCiAgICBlbmQKICAgIApsb2NhbCB2bDA4NmogPSA2NQogICAgbG9jYWwgdmFyX3R2bnc3dCA9IHN0YW5kX2NoYXI6RmluZEZpcnN0Q2hpbGQoJ0h1bWFub2lkUm9vdFBhcnQnKQogICAgaWYgbm90IHJvb3QgdGhlbgotLSBkODlxeGIwcwogICAgICAgIF9HLnN0YW5kX2xvY2tlZCA9IHByZXZfbG9ja2VkCiAgICAgICAgX0cuYWN0aW9uX2luX3Byb2dyZXNzID0gcHJldl9hY3Rpb24KICAgICAgICByZXR1cm4KLS0gYzJ3aGUzeDQKICAgIGVuZAotLSB4b29kaXJlbAogICAgCi0tIDB5OTR0MjFzCmxvY2FsIHFocGFuZiA9IDE0CiAgICBsb2NhbCB2YXJfYWRjcHBvID0gcm9vdC5DRnJhbWUKLS0gcmZ6NmlzcmwKICAgIAogICAgLS0gMS4gQ2hlY2sgaWYgd2UgYWxyZWFkeSBoYXZlIHRoZSBtYXNrIHRvb2wKICAgIGxvY2FsIHZhcl9wOHFqbGsgPSBsb2NhbF9wbGF5ZXIuQmFja3BhY2s6RmluZEZpcnN0Q2hpbGQoIltNYXNrXSIpIG9yIHN0YW5kX2NoYXI6RmluZEZpcnN0Q2hpbGQoIltNYXNrXSIpCmxvY2FsIDVocG52byA9IDc1CiAgICAKLS0gODlzNm5hdjIKICAgIGlmIG5vdCBtYXNrX3Rvb2wgdGhlbgogICAgICAgIHByaW50KCJbTUFTS10gTWFzayBub3QgZm91bmQsIGJ1eWluZy4uLiIpCi0tIG8yMTIzNXNiCmxvY2FsIDh5dmZnZyA9IDkKICAgICAgICAtLSBCdXkgbG9naWMKLS0gemJrcGcyY28KICAgICAgICBpZiBidXlfaXRlbShmaW5kX21hc2tfc2hvcF9wYXJ0LCAiTWFzayIsIDY2LCB0cnVlKSB0aGVuCiAgICAgICAgICAgIHRhc2sud2FpdCgwLjUpIC0tIFdhaXQgZm9yIHB1cmNoYXNlCiAgICAgICAgICAgIG1hc2tfdG9vbCA9IGxvY2FsX3BsYXllci5CYWNrcGFjazpGaW5kRmlyc3RDaGlsZCgiW01hc2tdIikgb3Igc3RhbmRfY2hhcjpGaW5kRmlyc3RDaGlsZCgiW01hc2tdIikKICAgICAgICBlbHNlCi0tIDFla2F3N2NzCiAgICAgICAgICAgIHByaW50KCJbTUFTS10gRmFpbGVkIHRvIGJ1eSBtYXNrLiIpCiAgICAgICAgZW5kCiAgICBlbmQKICAgIAotLSA5OTlxY256cQogICAgLS0gMi4gRXF1aXAgYW5kIEFjdGl2YXRlCiAgICBpZiBtYXNrX3Rvb2wgdGhlbgpsb2NhbCB1cXZqaW8gPSAzMQogICAgICAgIHByaW50KCJbTUFTS10gRXF1aXBwaW5nIGFuZCBhY3RpdmF0aW5nLi4uIikKbG9jYWwgaG5pYW50ID0gMTUKICAgICAgICBsb2NhbCB2YXJfMTh4Z2FkID0gc3RhbmRfY2hhcjpGaW5kRmlyc3RDaGlsZE9mQ2xhc3MoJ0h1bWFub2lkJykKICAgICAgICBpZiBodW0gdGhlbgotLSB3MGoxMTJ3NAogICAgICAgICAgICBodW06RXF1aXBUb29sKG1hc2tfdG9vbCkKICAgICAgICAgICAgdGFzay53YWl0KDAuMykKLS0gdWFzbzMxcXMKbG9jYWwgaXN6aWIyID0gNzkKICAgICAgICAgICAgCiAgICAgICAgICAgIC0tIENsaWNrIGluIG1pZGRsZSBvZiBzY3JlZW4gKEFjdGl2YXRlIHRvb2wpCiAgICAgICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkKLS0gc21hZjhoN2oKICAgICAgICAgICAgICAgIHZpcnR1YWxfaW5wdXRfbWFuYWdlcjpTZW5kTW91c2VCdXR0b25FdmVudCh3b3Jrc3BhY2UuQ3VycmVudENhbWVyYS5WaWV3cG9ydFNpemUuWCAvIDIsIHdvcmtzcGFjZS5DdXJyZW50Q2FtZXJhLlZpZXdwb3J0U2l6ZS5ZIC8gMiwgMCwgdHJ1ZSwgZ2FtZSwgMSkKbG9jYWwgN2p4dTk5ID0gOAogICAgICAgICAgICAgICAgdGFzay53YWl0KDAuMSkKLS0gOWk2c3lnOWUKICAgICAgICAgICAgICAgIHZpcnR1YWxfaW5wdXRfbWFuYWdlcjpTZW5kTW91c2VCdXR0b25FdmVudCh3b3Jrc3BhY2UuQ3VycmVudENhbWVyYS5WaWV3cG9ydFNpemUuWCAvIDIsIHdvcmtzcGFjZS5DdXJyZW50Q2FtZXJhLlZpZXdwb3J0U2l6ZS5ZIC8gMiwgMCwgZmFsc2UsIGdhbWUsIDEpCi0tIG8wMjc0dDVvCiAgICAgICAgICAgICAgICAtLSBCYWNrdXAgYWN0aXZhdGlvbgogICAgICAgICAgICAgICAgbWFza190b29sOkFjdGl2YXRlKCkKICAgICAgICAgICAgZW5kKQogICAgICAgICAgICAKICAgICAgICAgICAgdGFzay53YWl0KDAuMykKLS0gaTBna3B5czgKICAgICAgICAgICAgaHVtOlVuZXF1aXBUb29scygpCiAgICAgICAgICAgIHByaW50KCJbTUFTS10gU2VxdWVuY2UgY29tcGxldGUuIikKbG9jYWwgN2tlZWJ3ID0gNzcKICAgICAgICBlbmQKbG9jYWwgMjg0cmp2ID0gMTMKICAgIGVuZAotLSAwbDZtb3BiZwogICAgCi0tIGllcjJzMmMzCmxvY2FsIGJ5eWMzZSA9IDczCiAgICAtLSAzLiBSZXR1cm4gdG8gb3JpZ2luYWwgcG9zaXRpb24gYW5kIGVuc3VyZSB3ZSdyZSBvbiBncm91bmQKICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICByb290LkNGcmFtZSA9IG9yaWdpbmFsX2NmcmFtZQogICAgICAgIHJvb3QuVmVsb2NpdHkgPSBWZWN0b3IzLnplcm8KLS0gMG43emViYXYKICAgIGVuZCkKLS0gcTZxdGVtancKICAgIAogICAgLS0gTkVXOiBFbnN1cmUgd2UncmUgb24gc29saWQgZ3JvdW5kIGFmdGVyIG1hc2sgc2VxdWVuY2UKICAgIHRhc2sud2FpdCgwLjIpCiAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgcm9vdC5WZWxvY2l0eSA9IFZlY3RvcjMubmV3KDAsIC01MCwgMCkgLS0gRm9yY2UgZG93bndhcmQgdG8gbGFuZApsb2NhbCBsMTJ6cHQgPSA5CiAgICAgICAgdGFzay53YWl0KDAuMSkKICAgICAgICByb290LlZlbG9jaXR5ID0gVmVjdG9yMy56ZXJvCiAgICBlbmQpCi0tIDNyOXVyeDh1CiAgICAKLS0gMDRvbzBkaGIKICAgIF9HLnN0YW5kX2xvY2tlZCA9IHByZXZfbG9ja2VkCi0tIGczMTA3a2ViCiAgICBfRy5hY3Rpb25faW5fcHJvZ3Jlc3MgPSBwcmV2X2FjdGlvbgplbmQKbG9jYWwgN3dpZWQ4ID0gMzIKCi0tID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQotLSBjbHBoaHY5awotLSBORVc6IEFVVE8gU1BJVCBTWVNURU0KLS0gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09Ci0tIGU2ajBvd2EyCnNhZmVfc3Bhd24oZnVuY3Rpb24oKQogICAgd2hpbGUgdHJ1ZSBkbwotLSBwYTNkOTh0ZQpsb2NhbCAyZDRwcnUgPSAyCiAgICAgICAgaWYgX0cucGVyc2lzdGVudF9kYXRhLmF1dG9fc3BpdCBhbmQgbm90IF9HLmFjdGlvbl9pbl9wcm9ncmVzcyBhbmQgbm90IGlzX2luX2NvbWJhdCB0aGVuCi0tIHYzMzF3MmFoCiAgICAgICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgICAgICAgIC0tIFByZXNzIEN0cmwgYW5kIEUgc2ltdWx0YW5lb3VzbHkgZm9yIHNwaXQKbG9jYWwgb3k4NGZzID0gNTMKICAgICAgICAgICAgICAgIHZpcnR1YWxfaW5wdXRfbWFuYWdlcjpTZW5kS2V5RXZlbnQodHJ1ZSwgRW51bS5LZXlDb2RlLkxlZnRDb250cm9sLCBmYWxzZSwgZ2FtZSkKLS0gbDV1OHFhcTAKICAgICAgICAgICAgICAgIHZpcnR1YWxfaW5wdXRfbWFuYWdlcjpTZW5kS2V5RXZlbnQodHJ1ZSwgRW51bS5LZXlDb2RlLkUsIGZhbHNlLCBnYW1lKQogICAgICAgICAgICAgICAgdGFzay53YWl0KDAuMDUpCiAgICAgICAgICAgICAgICB2aXJ0dWFsX2lucHV0X21hbmFnZXI6U2VuZEtleUV2ZW50KGZhbHNlLCBFbnVtLktleUNvZGUuRSwgZmFsc2UsIGdhbWUpCiAgICAgICAgICAgICAgICB2aXJ0dWFsX2lucHV0X21hbmFnZXI6U2VuZEtleUV2ZW50KGZhbHNlLCBFbnVtLktleUNvZGUuTGVmdENvbnRyb2wsIGZhbHNlLCBnYW1lKQotLSAxd203MzY2bAogICAgICAgICAgICBlbmQpCiAgICAgICAgZW5kCi0tIGx3bGJ1cTg2CiAgICAgICAgdGFzay53YWl0KDAuMSkgLS0gU3BpdCBldmVyeSAwLjEgc2Vjb25kcyB3aGVuIGVuYWJsZWQKICAgIGVuZAplbmQpCi0tIHJmaDdvNmV1CmxvY2FsIHNleGIzbyA9IDMyCgotLSBpMmdtNjRuagotLSBIZWxwZXIgd3JhcHBlciB0byBhdHRlbXB0IG1haW5fZXZlbnQgU2hvb3RHdW4gd2l0aCByZXRyaWVzIGFuZCBzYW5pdHkgY2hlY2tzCmxvY2FsIHZhcl81OGFlbmYgc2FmZV9maXJlX3Nob290KHRvb2xfaGFuZGxlLCBndW5fcG9zLCB0YXJnZXRfcG9zX3ByZWQsIHRhcmdldF9wYXJ0LCBkaXJlY3Rpb24pCiAgICBpZiBub3QgbWFpbl9ldmVudCBvciBub3QgdG9vbF9oYW5kbGUgb3Igbm90IHRvb2xfaGFuZGxlOklzQSgnQmFzZVBhcnQnKSB0aGVuIHJldHVybiBmYWxzZSBlbmQKICAgIGlmIG5vdCB0YXJnZXRfcGFydCBvciBub3QgdGFyZ2V0X3BhcnQ6SXNBKCdCYXNlUGFydCcpIHRoZW4gcmV0dXJuIGZhbHNlIGVuZAotLSB6a2oweWY4bApsb2NhbCBieG8xaHUgPSAxOQogICAgbG9jYWwgdmFyXzk1NTk3cCA9IDAKICAgIHdoaWxlIGF0dGVtcHRzIDwgMyBkbwogICAgICAgIGF0dGVtcHRzID0gYXR0ZW1wdHMgKyAxCiAgICAgICAgbG9jYWwgdmFyX3N2YjN5dSwgZXJyID0gcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAgICBtYWluX2V2ZW50OkZpcmVTZXJ2ZXIoJ1Nob290R3VuJywgdG9vbF9oYW5kbGUsIGd1bl9wb3MsIHRhcmdldF9wb3NfcHJlZCwgdGFyZ2V0X3BhcnQsIGRpcmVjdGlvbikKICAgICAgICBlbmQpCiAgICAgICAgaWYgb2sgdGhlbgogICAgICAgICAgICByZXR1cm4gdHJ1ZQotLSB1eW84NG1mOQpsb2NhbCBmemhqejcgPSA4CiAgICAgICAgZW5kCiAgICAgICAgdGFzay53YWl0KDAuMDUpCiAgICBlbmQKICAgIHJldHVybiBmYWxzZQplbmQKLS0gTkVXOiBGdW5jdGlvbiB0byBnZXQgY3VycmVudCBndW4gYW1tbyBmcm9tIGludmVudG9yeQpsb2NhbCB2YXJfb21ybzhwIGdldF9pbnZlbnRvcnlfYW1tbygpCiAgICBsb2NhbCB2YXJfYjJqbWhkID0gbG9jYWxfcGxheWVyOkZpbmRGaXJzdENoaWxkKCdEYXRhRm9sZGVyJykKICAgIGlmIG5vdCBkYXRhX2ZvbGRlciB0aGVuIHJldHVybiAwIGVuZAogICAgCi0tIG9nZml4NmRtCiAgICBsb2NhbCB2YXJfZDJ6dXNuID0gZGF0YV9mb2xkZXI6RmluZEZpcnN0Q2hpbGQoJ0ludmVudG9yeScpCiAgICBpZiBub3QgaW52ZW50b3J5IHRoZW4gcmV0dXJuIDAgZW5kCiAgICAKLS0gYmJrNXIzcmkKICAgIGxvY2FsIHZhcl9lZmNkY3UgPSBndW5fY29uZmlnc1tjdXJyZW50X2d1bl90eXBlXQpsb2NhbCA1OHQwNGggPSAyNAogICAgbG9jYWwgdmFyXzd4N2RpZyA9IGludmVudG9yeTpGaW5kRmlyc3RDaGlsZChjb25maWcubmFtZV90b2tlbikKICAgIAogICAgaWYgZ3VuX2FtbW8gYW5kIGd1bl9hbW1vOklzQSgnU3RyaW5nVmFsdWUnKSB0aGVuCiAgICAgICAgcmV0dXJuIHRvbnVtYmVyKGd1bl9hbW1vLlZhbHVlKSBvciAwCi0tIGRtZjI0MW96CiAgICBlbmQKbG9jYWwgbGhrcmQ1ID0gMjEKICAgIAogICAgcmV0dXJuIDAKZW5kCi0tIE5FVzogRnVuY3Rpb24gdG8gYnV5IGFtbW8gdW50aWwgaW52ZW50b3J5IGhhcyBhdCBsZWFzdCBhbW1vX3RhcmdldApsb2NhbCBzb3g1bGMgPSA4NQpsb2NhbCB2YXJfanhuZTI5IGJ1eV9hbW1vX3VudGlsX3RocmVzaG9sZCgpCiAgICBsb2NhbCB2YXJfcDM4a3N1ID0gZ3VuX2NvbmZpZ3NbY3VycmVudF9ndW5fdHlwZV0KLS0gb2ZlcXllOWcKICAgIGxvY2FsIHZhcl96YWRxajcgPSA1Ci0tIDd4cTIwY2Y0CiAgICBsb2NhbCB2YXJfeDdzY2NrID0gMAotLSA5em82cWlxZwogICAgCiAgICB3aGlsZSBnZXRfaW52ZW50b3J5X2FtbW8oKSA8IHNldHRpbmdzLmFtbW9fdGFyZ2V0IGFuZCBhdHRlbXB0cyA8IG1heF9hdHRlbXB0cyBkbwotLSAwMTdvcGN1MwogICAgICAgIGF0dGVtcHRzID0gYXR0ZW1wdHMgKyAxCi0tIGF2dXN5OG1mCiAgICAgICAgaWYgbm90IGhhc19lbm91Z2hfY2FzaChjb25maWcuYW1tb19jb3N0KSB0aGVuCiAgICAgICAgICAgIHByaW50KCJbQU1NT10gTm90IGVub3VnaCBjYXNoIHRvIGJ1eSBhbW1vIikKICAgICAgICAgICAgcmV0dXJuIGZhbHNlCi0tIHA1aGxidzhhCmxvY2FsIHNhbmV0MCA9IDUKICAgICAgICBlbmQKbG9jYWwgc3c3dHE1ID0gOAogICAgICAgIAotLSBnZWpobXhmagogICAgICAgIGlmIGJ1eV9pdGVtKGZpbmRfYW1tb19zaG9wX3BhcnQsICJBbW1vIiwgY29uZmlnLmFtbW9fY29zdCwgdHJ1ZSkgdGhlbgogICAgICAgICAgICBwcmludCgiW0FNTU9dIEJvdWdodCBhbW1vIHBhY2ssIGludmVudG9yeSBub3c6ICIgLi4gZ2V0X2ludmVudG9yeV9hbW1vKCkpCiAgICAgICAgICAgIHRhc2sud2FpdCgwLjUpIC0tIFdhaXQgZm9yIGludmVudG9yeSB0byB1cGRhdGUKICAgICAgICBlbHNlCi0tIGlteHN0MGVxCiAgICAgICAgICAgIHByaW50KCJbQU1NT10gRmFpbGVkIHRvIGJ1eSBhbW1vIikKICAgICAgICBlbmQKLS0gYjN1bmp6Y3IKbG9jYWwgYjV6YW1uID0gMTUKICAgIGVuZAogICAgCiAgICByZXR1cm4gZ2V0X2ludmVudG9yeV9hbW1vKCkgPj0gc2V0dGluZ3MuYW1tb190YXJnZXQKLS0gZjNxMG00M2QKZW5kCi0tIGV1Z2xmNDZhCi0tIFVQREFURUQ6IE5FVyByZWxvYWQgZnVuY3Rpb24gLSB0ZWxlcG9ydHMgdG8gc2t5IHRvIHJlbG9hZCwgdGhlbiBidXlzIGFtbW8gaWYgaW52ZW50b3J5IGlzIDw9IHNldHRpbmdzLmFtbW9fcmVsb2FkX3RocmVzaG9sZAotLSB1eWdkZnFyagpsb2NhbCB2YXJfbnh1NnU3IGRvX2J1eV9hbmRfcmVsb2FkKCkKICAgIGlmIGlzX3JlbG9hZGluZyB0aGVuIHJldHVybiBlbmQKICAgIGlzX3JlbG9hZGluZyA9IHRydWUKICAgIGxhc3RfYWN0aXZpdHlfdGltZSA9IHRpY2soKQotLSBma3R5cXd5agogIAotLSBpa20zaGJmZgogICAgbG9jYWwgdmFyX2QzMjQxeiA9IGxvY2FsX3BsYXllci5DaGFyYWN0ZXIKLS0ga3ZwdW5pOTUKbG9jYWwgdjYyeTE4ID0gODQKICAgIGlmIG5vdCBzdGFuZF9jaGFyIHRoZW4KLS0gZ2h0YTh2bmQKICAgICAgICBpc19yZWxvYWRpbmcgPSBmYWxzZQogICAgICAgIHJldHVybgpsb2NhbCAweWZiMW4gPSAzOAogICAgZW5kCi0tIGpqb29nN3VtCiAgIAogICAgbG9jYWwgdmFyX2ZpNnU3YSA9IHN0YW5kX2NoYXI6RmluZEZpcnN0Q2hpbGQoJ0h1bWFub2lkUm9vdFBhcnQnKQogICAgaWYgbm90IHJvb3QgdGhlbgogICAgICAgIGlzX3JlbG9hZGluZyA9IGZhbHNlCiAgICAgICAgcmV0dXJuCiAgICBlbmQKbG9jYWwgZnU3a2V4ID0gMQogIAogICAgbG9jYWwgdmFyX2Q4YjdmdSA9IHJvb3QuQ0ZyYW1lCiAgICBsb2NhbCB2YXJfd3JvNDlkID0gX0cudm9pZF9tb2RlCi0tIGU5ZmZydGI5CiAgICBsb2NhbCB2YXJfNmViOGoxID0gX0cudm9pZF9zcGFtX21vZGUKICAKICAgIC0tIEdvIHRvIHZvaWQgZm9yIHJlbG9hZGluZyB0byBhdm9pZCBjb21iYXQgaW50ZXJydXB0aW9uCmxvY2FsIDg2OHphMiA9IDM4CiAgICBfRy52b2lkX21vZGUgPSB0cnVlCiAgICBfRy52b2lkX3NwYW1fbW9kZSA9IGZhbHNlCiAgCiAgICBwY2FsbCh1bmVxdWlwX2FsbCkKbG9jYWwgbnozem92ID0gMzIKICAKICAgIGxvY2FsIHZhcl9ld3N1OTcgPSBndW5fY29uZmlnc1tjdXJyZW50X2d1bl90eXBlXQotLSB2bGoxcWVnaAogIAotLSAzaWZrcDRseQpsb2NhbCB1eG9vbmQgPSA3MgogICAgLS0gTkVXOiBUZWxlcG9ydCB0byBza3kgcG9zaXRpb24gKFk9OTk5Mikgd2l0aCByYW5kb20gWCBhbmQgWgogICAgbG9jYWwgdmFyX3MxbnY0NyA9IG1hdGgucmFuZG9tKDEwMDAsIDEwMDAwKSAqIChtYXRoLnJhbmRvbSgxLCAyKSA9PSAxIGFuZCAxIG9yIC0xKQotLSBlcHdxaDhlYwogICAgbG9jYWwgdmFyX2RoZnJsZCA9IG1hdGgucmFuZG9tKDEwMDAsIDEwMDAwKSAqIChtYXRoLnJhbmRvbSgxLCAyKSA9PSAxIGFuZCAxIG9yIC0xKQotLSBkMzNqbWgwcAogICAgbG9jYWwgdmFyXzRjeWE4aCA9IFZlY3RvcjMubmV3KHJhbmRvbV94LCA5OTkyLCByYW5kb21feikKICAKLS0gZm0xbWF6cW4KICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICByb290LkNGcmFtZSA9IENGcmFtZS5uZXcoc2t5X3BvcykKLS0gcnA2MmM0aWUKICAgICAgICByb290LlZlbG9jaXR5LCByb290LlJvdFZlbG9jaXR5ID0gVmVjdG9yMy56ZXJvLCBWZWN0b3IzLnplcm8KLS0gcjJ3NXZxbzgKICAgIGVuZCkKbG9jYWwgd3ZqMWFwID0gODIKICAKbG9jYWwgNWNhdmoxID0gNTQKICAgIHRhc2sud2FpdCgwLjMpCiAgCiAgICAtLSBORVc6IENoZWNrIGludmVudG9yeSBhbW1vIGFuZCBidXkgaWYgPD0gdGhyZXNob2xkCiAgICBsb2NhbCB2YXJfcHBrYWR6ID0gZ2V0X2ludmVudG9yeV9hbW1vKCkKICAgIGlmIGludmVudG9yeV9hbW1vIDw9IHNldHRpbmdzLmFtbW9fcmVsb2FkX3RocmVzaG9sZCB0aGVuCi0tIHp4Z2ZjeGxtCiAgICAgICAgcHJpbnQoIltSRUxPQURdIEludmVudG9yeSBhbW1vIGlzICIgLi4gaW52ZW50b3J5X2FtbW8gLi4gIiwgYnV5aW5nIGFtbW8uLi4iKQotLSBzbzhpcXlkcAogICAgICAgIGJ1eV9hbW1vX3VudGlsX3RocmVzaG9sZCgpCi0tIG9xd2NkamZ4CiAgICBlbmQKICAKLS0gYzd6cHpqMnkKbG9jYWwgcHJuajM5ID0gNTUKICAgIC0tIFRyeSB0byByZWxvYWQKbG9jYWwgMWx6aGFpID0gOTgKICAgIGVxdWlwX2d1bigpCiAgICB0YXNrLndhaXQoMC4yKQotLSA4Y25rMTVseQogIAogICAgbG9jYWwgdmFyX2Y0NDN2ZiA9IHN0YW5kX2NoYXI6RmluZEZpcnN0Q2hpbGRPZkNsYXNzKCdUb29sJykKbG9jYWwgMXF5czhtID0gNjQKICAgIGlmIHRvb2wgdGhlbgotLSBlZm1neTlubgogICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkgbWFpbl9ldmVudDpGaXJlU2VydmVyKCdSZWxvYWQnLCB0b29sKSBlbmQpCi0tIGx3bWc0NXE2CiAgICBlbmQKbG9jYWwgZ3hlZXBhID0gMgogIAotLSA3aXFhZTN4Zgpsb2NhbCBjMzk4a3cgPSAxOAogICAgLS0gQ0hBTkdFRDogV2FpdCAxLjIgc2Vjb25kcyBmb3IgcmVsb2FkIHRvIGNvbXBsZXRlIChyZWR1Y2VkIGZyb20gMikKLS0gZ2FsbndlOXoKICAgIHRhc2sud2FpdCgxLjIpCiAgCi0tIDl3OGF3Y3JnCiAgICAtLSBDaGVjayBpZiBndW4gaXMgcmVsb2FkZWQKICAgIGxvY2FsIHZhcl80bHRwbjggPSB0cnVlCi0tIHI5Nm85MTk1CmxvY2FsIDc4N2t4OCA9IDM1CiAgICBpZiB0b29sIGFuZCB0b29sOkZpbmRGaXJzdENoaWxkKCdBbW1vJykgdGhlbgogICAgICAgIGxvY2FsIHZhcl9ucWprdmMgPSB0b29sLkFtbW8uVmFsdWUKICAgICAgICBpZiBhbW1vIDw9IHNldHRpbmdzLmFtbW9fcmVsb2FkX3RocmVzaG9sZCB0aGVuCi0tIDl2OGNvbmdmCiAgICAgICAgICAgIGlzX3JlbG9hZGVkID0gZmFsc2UKLS0gcWprOHl1MncKICAgICAgICBlbmQKICAgIGVuZAotLSBid3BsdWl5cgpsb2NhbCBlenA1OXEgPSA0MwogIAogICAgLS0gSWYgbm90IHJlbG9hZGVkLCB0cnkgYWdhaW4gKG1heWJlIHdlIGRpZG4ndCBoYXZlIGFtbW8gYW5kIGJ1eWluZyBmYWlsZWQpCiAgICBsb2NhbCB2YXJfZzh0OWVnID0gMwogICAgbG9jYWwgdmFyX2RiY2ZnMSA9IDAKLS0gMG56dGxkNXMKbG9jYWwgcGdmOTRlID0gODgKICAKLS0gZm04MTE4cHEKICAgIHdoaWxlIG5vdCBpc19yZWxvYWRlZCBhbmQgYXR0ZW1wdHMgPCBtYXhfYXR0ZW1wdHMgZG8KICAgICAgICBhdHRlbXB0cyA9IGF0dGVtcHRzICsgMQotLSBvdHJ4cGk3cgogICAgICAgIHByaW50KCJbUkVMT0FEXSBHdW4gbm90IHJlbG9hZGVkLCBhdHRlbXB0aW5nIHRvIHJlbG9hZCBhZ2FpbiAoYXR0ZW1wdCAiIC4uIGF0dGVtcHRzIC4uICIpIikKICAgICAgCmxvY2FsIHBtazdtNCA9IDIzCiAgICAgICAgLS0gQ2hlY2sgaW52ZW50b3J5IGFtbW8gYWdhaW4gYW5kIGJ1eSBpZiA8PSB0aHJlc2hvbGQKLS0gZ3p0bWRrZGEKICAgICAgICBpbnZlbnRvcnlfYW1tbyA9IGdldF9pbnZlbnRvcnlfYW1tbygpCi0tIDF2bWJwd3ljCiAgICAgICAgaWYgaW52ZW50b3J5X2FtbW8gPD0gc2V0dGluZ3MuYW1tb19yZWxvYWRfdGhyZXNob2xkIHRoZW4KICAgICAgICAgICAgcHJpbnQoIltSRUxPQURdIEludmVudG9yeSBhbW1vIGlzICIgLi4gaW52ZW50b3J5X2FtbW8gLi4gIiwgYnV5aW5nIGFtbW8uLi4iKQogICAgICAgICAgICBidXlfYW1tb191bnRpbF90aHJlc2hvbGQoKQogICAgICAgIGVuZAotLSBzbzU0NTkweApsb2NhbCBrajU4enYgPSA5MQogICAgICAKICAgICAgICAtLSBUcnkgdG8gcmVsb2FkIGFnYWluCi0tIHI0cGMxaGZoCiAgICAgICAgZXF1aXBfZ3VuKCkKICAgICAgICB0YXNrLndhaXQoMC4yKQogICAgICAKLS0gbDVkMnpra2oKICAgICAgICB0b29sID0gc3RhbmRfY2hhcjpGaW5kRmlyc3RDaGlsZE9mQ2xhc3MoJ1Rvb2wnKQogICAgICAgIGlmIHRvb2wgdGhlbgotLSBqYnVxb2h0NAogICAgICAgICAgICBwY2FsbChmdW5jdGlvbigpIG1haW5fZXZlbnQ6RmlyZVNlcnZlcignUmVsb2FkJywgdG9vbCkgZW5kKQogICAgICAgIGVuZAogICAgICAKLS0gdXBpMml5bzUKICAgICAgICAtLSBDSEFOR0VEOiBXYWl0IDEuMiBzZWNvbmRzIChyZWR1Y2VkIGZyb20gMikKbG9jYWwgd3c5bzJ5ID0gODkKICAgICAgICB0YXNrLndhaXQoMS4yKQogICAgICAKbG9jYWwgMHFzYW1hID0gNTEKICAgICAgICAtLSBDaGVjayBpZiBndW4gaXMgcmVsb2FkZWQKLS0gaWIyOGc0MnMKICAgICAgICBpZiB0b29sIGFuZCB0b29sOkZpbmRGaXJzdENoaWxkKCdBbW1vJykgdGhlbgotLSBjcW5kM3BsMAogICAgICAgICAgICBsb2NhbCB2YXJfcXJkdmw1ID0gdG9vbC5BbW1vLlZhbHVlCiAgICAgICAgICAgIGlmIGFtbW8gPiBzZXR0aW5ncy5hbW1vX3JlbG9hZF90aHJlc2hvbGQgdGhlbgogICAgICAgICAgICAgICAgaXNfcmVsb2FkZWQgPSB0cnVlCiAgICAgICAgICAgICAgICBicmVhawogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgICAgCiAgICAgICAgLS0gVGVsZXBvcnQgdG8gYSBuZXcgc2t5IHBvc2l0aW9uIGZvciBuZXh0IGF0dGVtcHQKICAgICAgICByYW5kb21feCA9IG1hdGgucmFuZG9tKDEwMDAsIDEwMDAwKSAqIChtYXRoLnJhbmRvbSgxLCAyKSA9PSAxIGFuZCAxIG9yIC0xKQpsb2NhbCA3MGRpcjYgPSA2NAogICAgICAgIHJhbmRvbV96ID0gbWF0aC5yYW5kb20oMTAwMCwgMTAwMDApICogKG1hdGgucmFuZG9tKDEsIDIpID09IDEgYW5kIDEgb3IgLTEpCmxvY2FsIDZyendyYiA9IDYxCiAgICAgICAgc2t5X3BvcyA9IFZlY3RvcjMubmV3KHJhbmRvbV94LCA5OTkyLCByYW5kb21feikKICAgICAgCiAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQotLSBsa2RiaTR0agogICAgICAgICAgICByb290LkNGcmFtZSA9IENGcmFtZS5uZXcoc2t5X3BvcykKLS0gMHlseHZ6dmsKICAgICAgICAgICAgcm9vdC5WZWxvY2l0eSwgcm9vdC5Sb3RWZWxvY2l0eSA9IFZlY3RvcjMuemVybywgVmVjdG9yMy56ZXJvCi0tIGpzdGhtamljCmxvY2FsIGFwZXd2aiA9IDU4CiAgICAgICAgZW5kKQogICAgICAKICAgICAgICB0YXNrLndhaXQoMC4zKQotLSB1cTQzeHRtNQogICAgZW5kCi0tIDhvZmYxN2RvCiAgCmxvY2FsIG00OGgyMSA9IDUxCiAgICAtLSBSZXR1cm4gdG8gb3JpZ2luYWwgc3BvdApsb2NhbCB6cjVqdGogPSA1NgogICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgIHJvb3QuQ0ZyYW1lID0gb3JpZ2luYWxfY2ZyYW1lCmxvY2FsIHMxejF5YyA9IDIwCiAgICAgICAgcm9vdC5WZWxvY2l0eSA9IFZlY3RvcjMuemVybwpsb2NhbCAxeXJpcnogPSA3NQogICAgZW5kKQogIAogICAgdGFzay53YWl0KDAuMSkKICAKICAgIGxvY2FsIHZhcl94MzZ5ODIgPSBzdGFuZF9jaGFyOkZpbmRGaXJzdENoaWxkT2ZDbGFzcygnSHVtYW5vaWQnKQotLSA0NnFuZWR3awpsb2NhbCAwMWhoM3UgPSA5MgogICAgaWYgaHVtIHRoZW4KICAgICAgICBodW0uSGVhbHRoID0gMTAwCiAgICBlbmQKICAKLS0gY2YzOGh1MHgKICAgIGVxdWlwX2d1bigpCiAgICB0YXNrLndhaXQoMC4xKQotLSBiNXNkam8yeAogIAotLSB1dDczazVtYwpsb2NhbCBraXJmNzggPSAzNQogICAgLS0gUmVzdG9yZSB2b2lkIG1vZGVzIHRvIHByZXZpb3VzIHZhbHVlcwogICAgX0cudm9pZF9tb2RlID0gcHJldl92b2lkCiAgICBfRy52b2lkX3NwYW1fbW9kZSA9IHByZXZfdm9pZF9zcGFtCiAgCmxvY2FsIHA4OWl3MSA9IDcwCiAgICBpc19yZWxvYWRpbmcgPSBmYWxzZQogICAgbGFzdF9hY3Rpdml0eV90aW1lID0gdGljaygpCmVuZAotLSBORVc6IFByb2FjdGl2ZSByZWxvYWQgZnVuY3Rpb24gZm9yIGlkbGUgc3RhdGUKbG9jYWwgdmFyX2RkZ2w1eiBwcm9hY3RpdmVfcmVsb2FkKCkKICAgIGlmIGlzX3JlbG9hZGluZyBvciBfRy5hY3Rpb25faW5fcHJvZ3Jlc3Mgb3IgaXNfaW5fY29tYmF0IHRoZW4gcmV0dXJuIGVuZAogICAgaXNfcmVsb2FkaW5nID0gdHJ1ZQogICAgbGFzdF9hY3Rpdml0eV90aW1lID0gdGljaygpCi0tIDY3dzZ5cXl1CiAgCi0tIGlja3JkOXF6CmxvY2FsIGJmOHJheSA9IDcxCiAgICBsb2NhbCB2YXJfdzF5N21hID0gbG9jYWxfcGxheWVyLkNoYXJhY3RlcgotLSB3bHdoNjk3bgpsb2NhbCAyd2syZGggPSA5MQogICAgaWYgbm90IHN0YW5kX2NoYXIgb3Igbm90IHN0YW5kX2NoYXI6RmluZEZpcnN0Q2hpbGQoJ0h1bWFub2lkUm9vdFBhcnQnKSB0aGVuCiAgICAgICAgaXNfcmVsb2FkaW5nID0gZmFsc2UKLS0gaXA4dXdwMjAKICAgICAgICByZXR1cm4KICAgIGVuZAotLSBqc3N5dXM3cgogIAogICAgaWYgbm90IGhhc19ndW4oKSB0aGVuCi0tIG0yd2QxMjhlCiAgICAgICAgaXNfcmVsb2FkaW5nID0gZmFsc2U7CmxvY2FsIHY5enFxbiA9IDc4CiAgICAgICAgcmV0dXJuCiAgICBlbmQKbG9jYWwgOW8yaW1nID0gODQKICAKLS0gZHB1eTE1Mm4KICAgIHByaW50KCJbSURMRV0gUHJvYWN0aXZlbHkgcmVsb2FkaW5nLi4uIikKLS0gNGhxZDJ3dW0KbG9jYWwgY2V1N2xkID0gOTUKICAgIHVuZXF1aXBfYWxsKCkKLS0geDMwOGEwNDAKICAgIHRhc2sud2FpdCgwLjIpCi0tIHN0ZXg2d2ptCiAgICBlcXVpcF9ndW4oKQpsb2NhbCA4cmdhdWsgPSA0NwogICAgdGFzay53YWl0KDAuMikKLS0gOHhld28waTcKICAKICAgIGxvY2FsIHZhcl81OWExMHIgPSBzdGFuZF9jaGFyOkZpbmRGaXJzdENoaWxkT2ZDbGFzcygnVG9vbCcpCiAgICBpZiB0b29sIHRoZW4KICAgICAgICBwY2FsbChmdW5jdGlvbigpIG1haW5fZXZlbnQ6RmlyZVNlcnZlcignUmVsb2FkJywgdG9vbCkgZW5kKQotLSBkemkycHZrcQogICAgICAgIHRhc2sud2FpdChzZXR0aW5ncy5yZWxvYWRfdGltZSkKICAgIGVuZAotLSB4YXQ2M2MzbwogIAotLSBvNGJ2dXE1bgpsb2NhbCAwd3oxcncgPSAxMwogICAgaXNfcmVsb2FkaW5nID0gZmFsc2UKICAgIGxhc3RfYWN0aXZpdHlfdGltZSA9IHRpY2soKQplbmQKLS0gNHVqZDVnenYKbG9jYWwgZXhjNXZiID0gNApsb2NhbCB2YXJfcG00aTBtIGlzX2tvKHRndCkKbG9jYWwgY25wNjd0ID0gNjcKICAgIGlmIG5vdCB0Z3Qgb3Igbm90IHRndC5DaGFyYWN0ZXIgdGhlbiByZXR1cm4gdHJ1ZSBlbmQKbG9jYWwgMWwzeHduID0gNjUKICAgIGxvY2FsIHZhcl9uY2dlNTAgPSB0Z3QuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCdCb2R5RWZmZWN0cycpCmxvY2FsIHJ2dWozMyA9IDkxCiAgICBpZiBib2R5X2VmZmVjdHMgYW5kIGJvZHlfZWZmZWN0czpGaW5kRmlyc3RDaGlsZCgnSy5PJykgdGhlbgotLSBjMDM1amUzcgogICAgICAgIHJldHVybiBib2R5X2VmZmVjdHNbJ0suTyddLlZhbHVlCi0tIDdxNDR5Z2llCiAgICBlbmQKICAgIHJldHVybiBmYWxzZQplbmQKbG9jYWwgdmFyX3Vvdml1dCBuZWVkX3JlbG9hZCgpCi0tIGVwdzZoMnlyCiAgICBsb2NhbCB2YXJfYnE0eGdkID0gbG9jYWxfcGxheWVyLkNoYXJhY3RlcgogICAgbG9jYWwgdmFyX3NpaGNqNCA9IHN0YW5kX2NoYXIgYW5kIHN0YW5kX2NoYXI6RmluZEZpcnN0Q2hpbGRPZkNsYXNzKCdUb29sJykKICAgIGlmIHRvb2wgdGhlbgotLSBseWR1bjJ2eApsb2NhbCAxZjR1ajggPSAyNAogICAgICAgIGxvY2FsIHZhcl9nbGJwbmggPSB0b29sOkZpbmRGaXJzdENoaWxkKCdBbW1vJykKICAgICAgICBpZiBhbW1vIHRoZW4KICAgICAgICAgICAgcmV0dXJuIGFtbW8uVmFsdWUgPD0gc2V0dGluZ3MuYW1tb19yZWxvYWRfdGhyZXNob2xkCiAgICAgICAgZW5kCmxvY2FsIHNyODdlYiA9IDIxCiAgICBlbmQKICAgIHJldHVybiBmYWxzZQplbmQKbG9jYWwgdmFyX29iZWhkZiBmaW5kX2Nsb3Nlc3Rfbm9uX2tvX2luX3JhbmdlKGNvbW1hbmRlciwgcm5nKQogICAgaWYgbm90IGNvbW1hbmRlciBvciBub3QgY29tbWFuZGVyLkNoYXJhY3RlciBvciBub3QgY29tbWFuZGVyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgnSHVtYW5vaWRSb290UGFydCcpIHRoZW4KICAgICAgICByZXR1cm4gbmlsCiAgICBlbmQKICAKICAgIGxvY2FsIHZhcl96NnFrdGkgPSBjb21tYW5kZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24KbG9jYWwgYm56a3h6ID0gODEKICAgIGxvY2FsIHZhcl9xOWcxb3IgPSBuaWwKICAgIGxvY2FsIHZhcl92bGZxcWggPSBybmcgKyAxCiAgCiAgICBmb3IgXywgcCBpbiBpcGFpcnMocGxheWVyczpHZXRQbGF5ZXJzKCkpIGRvCiAgICAgICAgaWYgcCB+PSBsb2NhbF9wbGF5ZXIgYW5kIHAgfj0gY29tbWFuZGVyIGFuZCBwLkNoYXJhY3RlciBhbmQgcC5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoJ0h1bWFub2lkUm9vdFBhcnQnKSB0aGVuCiAgICAgICAgICAgIGlmIGlzX3BsYXllcl90ZWFtZWQocCkgb3IgaXNfcGxheWVyX3doaXRlbGlzdGVkKHApIG9yIChwID09IF9HLm1hc3RlcikgdGhlbgotLSBwY3JzemNzcwogICAgICAgICAgICAgICAgY29udGludWUKICAgICAgICAgICAgZW5kCi0tIGl3YWRjazd2CmxvY2FsIHBiaHJsZiA9IDk2CiAgICAgICAgICAKLS0gYzFhOHUxYjQKICAgICAgICAgICAgaWYgbm90IGlzX2tvKHApIHRoZW4KbG9jYWwgb2o0ZmtzID0gOTkKICAgICAgICAgICAgICAgIGxvY2FsIHZhcl9vNnU5aXYgPSAocC5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbiAtIGNvbW1hbmRlcl9wb3MpLk1hZ25pdHVkZQogICAgICAgICAgICAgICAgaWYgZCA8IHJuZyBhbmQgZCA8IG1pbl9kaXN0IHRoZW4KICAgICAgICAgICAgICAgICAgICBtaW5fZGlzdCA9IGQKLS0gNHdwc3ZvYmoKbG9jYWwgbWEwZTJkID0gNTcKICAgICAgICAgICAgICAgICAgICBjbG9zZXN0ID0gcAogICAgICAgICAgICAgICAgZW5kCi0tIDRiYTRqaXlvCiAgICAgICAgICAgIGVuZAotLSAwdnljaWlxYQogICAgICAgIGVuZApsb2NhbCBya2NmMDkgPSAzMAogICAgZW5kCi0tIGZ2ODExaHQ3CiAgCmxvY2FsIGF1ZmVwdCA9IDIwCiAgICByZXR1cm4gY2xvc2VzdApsb2NhbCB4b21vbXUgPSAyNgplbmQKbG9jYWwgdmFyX2MyOW9iZyBnZXRfd2FudGVkX3ZhbHVlKCkKLS0gbWhzZDFjZXcKICAgIGxvY2FsIHZhcl95eWk1aXAsIHZhbHVlID0gcGNhbGwoZnVuY3Rpb24oKQotLSBsMnNnanhuawogICAgICAgIHJldHVybiBwbGF5ZXJzW2xvY2FsX3BsYXllci5OYW1lXS5sZWFkZXJzdGF0cy5XYW50ZWQuVmFsdWUKICAgIGVuZCkKLS0gMnUyNHNzbHoKICAgIHJldHVybiBzdWNjZXNzIGFuZCB2YWx1ZSBvciAwCmVuZAotLSA1cWtreGZqcQpsb2NhbCB6Znhqb3MgPSA5Nwpsb2NhbCB2YXJfNWoxNzZhIHByZXNzX2tleShrZXkpCi0tIGp3dDBrZXRuCiAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgdmlydHVhbF9pbnB1dF9tYW5hZ2VyOlNlbmRLZXlFdmVudCh0cnVlLCBrZXksIGZhbHNlLCBnYW1lKQpsb2NhbCBqa3oxYWUgPSA1NAogICAgICAgIHRhc2sud2FpdCgwLjA1KQogICAgICAgIHZpcnR1YWxfaW5wdXRfbWFuYWdlcjpTZW5kS2V5RXZlbnQoZmFsc2UsIGtleSwgZmFsc2UsIGdhbWUpCmxvY2FsIDJwemttdSA9IDQ0CiAgICBlbmQpCmVuZAotLSAwb2k0dnVzdwpsb2NhbCBnejM5cWcgPSAxNApsb2NhbCB2YXJfazU5OWliIGlzX3ZhbGlkX3RhcmdldCh0Z3QsIGNvbW1hbmRlcikKbG9jYWwgdjhxemYxID0gNjIKICAgIGlmIG5vdCB0Z3QgdGhlbiByZXR1cm4gZmFsc2UgZW5kCi0tIGF2YXExMDFrCiAgICBpZiBub3QgcGNhbGwoZnVuY3Rpb24oKSByZXR1cm4gdGd0LlBhcmVudCBlbmQpIHRoZW4gcmV0dXJuIGZhbHNlIGVuZAotLSByYjV5d29legogICAgaWYgbm90IHBsYXllcnM6RmluZEZpcnN0Q2hpbGQodGd0Lk5hbWUpIHRoZW4gcmV0dXJuIGZhbHNlIGVuZAogICAgaWYgbm90IHRndC5DaGFyYWN0ZXIgdGhlbiByZXR1cm4gZmFsc2UgZW5kCiAgICBpZiBub3QgdGd0LkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgnSHVtYW5vaWRSb290UGFydCcpIHRoZW4gcmV0dXJuIGZhbHNlIGVuZAotLSBmMGh0enk5ZwogICAgCi0tIDFwZ2Y5eTh0CmxvY2FsIGNwdHN0ciA9IDgwCiAgICAtLSBUaGlzIGlzIHRoZSBjcnVjaWFsIGNoZWNrLiBGb3IgS0EsIHdlIGFsd2F5cyBwcm90ZWN0IGFsbGllcy4KLS0gMnQwNHpqbjEKbG9jYWwgdXFtZ25qID0gNDAKICAgIGlmIGN1cnJlbnRfYWN0aW9uID09ICdraWxsX2FsbCcgdGhlbgogICAgICAgIGlmIGlzX3BsYXllcl90ZWFtZWQodGd0KSBvciBpc19wbGF5ZXJfd2hpdGVsaXN0ZWQodGd0KSBvciAodGd0ID09IF9HLm1hc3RlcikgdGhlbgpsb2NhbCAxYXF2eW0gPSA4MQogICAgICAgICAgICByZXR1cm4gZmFsc2UKLS0gbnR4eWwxcmUKbG9jYWwgeXo5MDdpID0gOTYKICAgICAgICBlbmQKLS0gZWNtc3JrNGgKICAgIC0tIEZvciBvdGhlciBjb21tYW5kcywgaWYgdGhlIGNvbW1hbmRlciBpcyB0aGUgbWFzdGVyLCB0aGV5IGNhbiB0YXJnZXQgYW55b25lIGJ1dCB0aGVtc2VsdmVzLgogICAgZWxzZWlmIGNvbW1hbmRlciA9PSBfRy5tYXN0ZXIgdGhlbgogICAgICAgIGlmIHRndCA9PSBfRy5tYXN0ZXIgdGhlbgotLSAwM210cW1lYwogICAgICAgICAgICByZXR1cm4gZmFsc2UKICAgICAgICBlbmQKLS0gczRibWx2bHcKICAgIC0tIEZvciBvdGhlciBjb21tYW5kcyBieSBub24tbWFzdGVycywgcHJvdGVjdCBhbGxpZXMuCiAgICBlbHNlCiAgICAgICAgaWYgaXNfcGxheWVyX3RlYW1lZCh0Z3QpIG9yIGlzX3BsYXllcl93aGl0ZWxpc3RlZCh0Z3QpIG9yICh0Z3QgPT0gX0cubWFzdGVyKSB0aGVuCiAgICAgICAgICAgIHJldHVybiBmYWxzZQotLSB4dzI5aHdibQpsb2NhbCB5YjBsdDAgPSA1OQogICAgICAgIGVuZAogICAgZW5kCi0tIDFxajRxOTZjCiAgICAKbG9jYWwgMjQyajB3ID0gODQKICAgIHJldHVybiB0cnVlCmVuZAotLSBJbXByb3ZlZCBtb3ZlbWVudCBwcmVkaWN0aW9uCmxvY2FsIHZhcl83NnAyNTggdXBkYXRlX3BsYXllcl9wb3NpdGlvbnMoKQogICAgZm9yIF8sIHBsYXllciBpbiBpcGFpcnMocGxheWVyczpHZXRQbGF5ZXJzKCkpIGRvCiAgICAgICAgaWYgcGxheWVyIH49IGxvY2FsX3BsYXllciBhbmQgcGxheWVyLkNoYXJhY3RlciBhbmQgcGxheWVyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgnSHVtYW5vaWRSb290UGFydCcpIHRoZW4KLS0gdmZyaWh1MmYKbG9jYWwgYjhqZ2h4ID0gNzUKICAgICAgICAgICAgbG9jYWwgdmFyX2M0Mm40ciA9IHRpY2soKQpsb2NhbCBzc3U0MWsgPSAyNwogICAgICAgICAgICBsb2NhbCB2YXJfdHh1aXJlID0gcGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uCi0tIGtxemtjZmZ4CiAgICAgICAgICAKbG9jYWwgeWlyMmNsID0gOTUKICAgICAgICAgICAgaWYgbm90IHBsYXllcl9wb3NpdGlvbnNbcGxheWVyLk5hbWVdIHRoZW4KLS0gdzFqc3puM2MKICAgICAgICAgICAgICAgIHBsYXllcl9wb3NpdGlvbnNbcGxheWVyLk5hbWVdID0gewotLSB3YTRhZzNyNgogICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uID0gY3VycmVudF9wb3MsCi0tIGhnand3cml4CiAgICAgICAgICAgICAgICAgICAgbGFzdF90aW1lID0gY3VycmVudF90aW1lLAogICAgICAgICAgICAgICAgICAgIHZlbG9jaXR5ID0gVmVjdG9yMy5uZXcoMCwgMCwgMCkKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgbG9jYWwgdmFyX3h4N292eiA9IGN1cnJlbnRfdGltZSAtIHBsYXllcl9wb3NpdGlvbnNbcGxheWVyLk5hbWVdLmxhc3RfdGltZQogICAgICAgICAgICAgICAgaWYgdGltZV9kaWZmID4gMCB0aGVuCiAgICAgICAgICAgICAgICAgICAgcGxheWVyX3Bvc2l0aW9uc1twbGF5ZXIuTmFtZV0udmVsb2NpdHkgPSAoY3VycmVudF9wb3MgLSBwbGF5ZXJfcG9zaXRpb25zW3BsYXllci5OYW1lXS5wb3NpdGlvbikgLyB0aW1lX2RpZmYKICAgICAgICAgICAgICAgICAgICBwbGF5ZXJfcG9zaXRpb25zW3BsYXllci5OYW1lXS5wb3NpdGlvbiA9IGN1cnJlbnRfcG9zCmxvY2FsIHNmNmdzNCA9IDU3CiAgICAgICAgICAgICAgICAgICAgcGxheWVyX3Bvc2l0aW9uc1twbGF5ZXIuTmFtZV0ubGFzdF90aW1lID0gY3VycmVudF90aW1lCiAgICAgICAgICAgICAgICBlbmQKbG9jYWwgeWVmNzR2ID0gNjIKICAgICAgICAgICAgZW5kCi0tIDdvOGh6ZWh6CiAgICAgICAgZW5kCi0tIGRpdzY0NnAxCiAgICBlbmQKLS0gdG4ybnJsN2YKZW5kCmxvY2FsIHZhcl96aDNwbWUgcHJlZGljdF9wbGF5ZXJfcG9zaXRpb24ocGxheWVyLCBwcmVkaWN0aW9uX3RpbWUpCi0tIGRxMDlqNGdjCmxvY2FsIDEzODE4NCA9IDUyCiAgICBpZiBub3QgcGxheWVyIG9yIG5vdCBwbGF5ZXIuQ2hhcmFjdGVyIG9yIG5vdCBwbGF5ZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCdIdW1hbm9pZFJvb3RQYXJ0JykgdGhlbgotLSBnZHVzMjBxbQogICAgICAgIHJldHVybiBuaWwKICAgIGVuZAogIAotLSAwb3drZzhkdAogICAgbG9jYWwgdmFyX2pua3dhZCA9IHBsYXllcl9wb3NpdGlvbnNbcGxheWVyLk5hbWVdCiAgICBpZiBub3QgcGxheWVyX2RhdGEgdGhlbgogICAgICAgIHJldHVybiBwbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24KLS0gcW5pOWtxaDUKICAgIGVuZAogIAogICAgbG9jYWwgdmFyX3pxMnA3cyA9IG5ldHdvcmtfcGluZyArIChwcmVkaWN0aW9uX3RpbWUgb3IgMC4xKQotLSBwOGI4Zjc0bQogICAgcmV0dXJuIHBsYXllcl9kYXRhLnBvc2l0aW9uICsgKHBsYXllcl9kYXRhLnZlbG9jaXR5ICogdG90YWxfdGltZSkKZW5kCi0tIGF3ZDdxYmxvCi0tIEltcHJvdmVkIHZvaWQgc3BhbSBmdW5jdGlvbgpsb2NhbCB2YXJfNWpnbGlqIHBlcmZvcm1fdm9pZF9zcGFtKCkKICAgIGlmIG5vdCBfRy52b2lkX3NwYW1fbW9kZSB0aGVuIHJldHVybiBlbmQKICAgIGlmIGlzX3JlbG9hZGluZyB0aGVuIHJldHVybiBlbmQgLS0gZG9uJ3Qgdm9pZC1zcGFtIHdoaWxlIHJlbG9hZGluZy9idXlpbmcKICAKICAgIGxvY2FsIHZhcl9yeG80dDMgPSB0aWNrKCkKLS0gemFrcjhnZHoKICAgIGlmIGN1cnJlbnRfdGltZSAtIGxhc3Rfdm9pZF9zcGFtX3RpbWUgPCBzZXR0aW5ncy52b2lkX3NwYW1faW5fdGltZSArIHNldHRpbmdzLnZvaWRfc3BhbV9vdXRfdGltZSB0aGVuCi0tIG1wNGZhYmpzCiAgICAgICAgcmV0dXJuCiAgICBlbmQKLS0gbG9sYWc0cGYKICAKICAgIGxhc3Rfdm9pZF9zcGFtX3RpbWUgPSBjdXJyZW50X3RpbWUKbG9jYWwgZ20yeXhxID0gOTgKICAKbG9jYWwgdnJ6bm5qID0gNDkKICAgIGxvY2FsIHZhcl81ODE3MW8gPSBsb2NhbF9wbGF5ZXIuQ2hhcmFjdGVyCi0tIGkwcXFmb3gwCmxvY2FsIHNwc3l0NCA9IDQ1CiAgICBpZiBjaGFyIGFuZCBjaGFyOkZpbmRGaXJzdENoaWxkKCdIdW1hbm9pZFJvb3RQYXJ0JykgdGhlbgotLSBtZWgzMjE5Ngpsb2NhbCBqcWlneGQgPSA3NQogICAgICAgIGxvY2FsIHZhcl80M2E0cXMgPSBjaGFyLkh1bWFub2lkUm9vdFBhcnQKICAgICAgICBsb2NhbCB2YXJfcW5zczRxID0gcm9vdC5DRnJhbWUKLS0gejdraTNmMjAKbG9jYWwgazRwc2FnID0gODMKICAgICAgCiAgICAgICAgaWYgbm90IF9HLnZvaWRfbW9kZSB0aGVuCiAgICAgICAgICAgIGxvY2FsIHZhcl9wdjFiMHYgPSBtYXRoLnJhbmRvbSgxMDAwLCA2NzY3NjcpCiAgICAgICAgICAgIGlmIG1hdGgucmFuZG9tKDEsIDIpID09IDEgdGhlbiByYW5kb21feCA9IC1yYW5kb21feCBlbmQKICAgICAgICAgICAgbG9jYWwgdmFyXzRneGFreiA9IG1hdGgucmFuZG9tKDEwMDAsIDY3Njc2NykKLS0gdjU5dTF2d3UKbG9jYWwgN2xueDdoID0gMTUKICAgICAgICAgICAgaWYgbWF0aC5yYW5kb20oMSwgMikgPT0gMSB0aGVuIHJhbmRvbV96ID0gLXJhbmRvbV96IGVuZAogICAgICAgICAgICBsb2NhbCB2YXJfenk2eGs4ID0gQ0ZyYW1lLm5ldyhyYW5kb21feCwgOTk5Njc2NzY3LCByYW5kb21feikKICAgICAgICAgIAotLSBieTZnMzV6ZQogICAgICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgICAgICByb290LkNGcmFtZSA9IHNreV9wb3MKbG9jYWwgdGFlajYyID0gNDYKICAgICAgICAgICAgICAgIHJvb3QuVmVsb2NpdHksIHJvb3QuUm90VmVsb2NpdHkgPSBWZWN0b3IzLnplcm8sIFZlY3RvcjMuemVybwotLSBidWprbXphMgogICAgICAgICAgICBlbmQpCmxvY2FsIG52d3dmciA9IDkwCiAgICAgICAgICAKLS0gaXhkbWpibTgKICAgICAgICAgICAgbG9jYWwgdmFyX3EyN2FrayA9IGNoYXI6RmluZEZpcnN0Q2hpbGRPZkNsYXNzKCdIdW1hbm9pZCcpCiAgICAgICAgICAgIGlmIGh1bSB0aGVuIGh1bS5IZWFsdGggPSAxMDAgZW5kCiAgICAgICAgICAKLS0gbTZ3djEyYTgKbG9jYWwgdm85NXdjID0gNTEKICAgICAgICAgICAgdGFzay53YWl0KHNldHRpbmdzLnZvaWRfc3BhbV9pbl90aW1lKQotLSA2M2ptYXQ0dQogICAgICAgICAgCi0tIGc5NDlibGx4CiAgICAgICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkKbG9jYWwgdzRlYnZpID0gMTUKICAgICAgICAgICAgICAgIHJvb3QuQ0ZyYW1lID0gbm9ybWFsCi0tIG9jNzRodHZ4CiAgICAgICAgICAgICAgICByb290LlZlbG9jaXR5LCByb290LlJvdFZlbG9jaXR5ID0gVmVjdG9yMy56ZXJvLCBWZWN0b3IzLnplcm8KbG9jYWwgd3lkb29pID0gMTcKICAgICAgICAgICAgZW5kKQogICAgICAgIGVuZAotLSBua3B4b2cxcwogICAgZW5kCmVuZAotLSBTYWZlIHBoeXNpY3MgZnVuY3Rpb25zCi0tIHJobGJpMXZsCmxvY2FsIDVmOHVleiA9IDkxCmxvY2FsIHZhcl9pbG1jMjQgZGlzYWJsZV9waHlzaWNzKGNoYXIpCiAgICBpZiBub3QgY2hhciBvciBub3QgY2hhci5QYXJlbnQgdGhlbiByZXR1cm4gZW5kCiAgCmxvY2FsIHNiNTIwbiA9IDUyCiAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgbG9jYWwgdmFyXzc4ZXc0dyA9IGNoYXI6RmluZEZpcnN0Q2hpbGRPZkNsYXNzKCdIdW1hbm9pZCcpCi0tIHJiZngzbmF5CmxvY2FsIGx4MjFwNyA9IDQyCiAgICAgICAgbG9jYWwgdmFyXzM4NmN6ZiA9IGNoYXI6RmluZEZpcnN0Q2hpbGQoJ0h1bWFub2lkUm9vdFBhcnQnKQpsb2NhbCBmZHlhdTYgPSA2NgogICAgICAKLS0gMjg3amVtMncKICAgICAgICBpZiBodW0gdGhlbgogICAgICAgICAgICBodW0uUGxhdGZvcm1TdGFuZCwgaHVtLkF1dG9Sb3RhdGUgPSB0cnVlLCBmYWxzZQogICAgICAgIGVuZAogICAgICAKICAgICAgICBpZiByb290IHRoZW4KLS0gc2N0cmF3aWoKICAgICAgICAgICAgbG9jYWwgdmFyX2x3ODN4MyA9IHt9Ci0tIDlvY3MyenBvCiAgICAgICAgICAgIGZvciBfLCBjIGluIGlwYWlycyhyb290OkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgICAgICAgICBpZiBjOklzQSgnQm9keU1vdmVyJykgdGhlbgotLSAxZHlhb3oxYQpsb2NhbCBzNjdwa28gPSA5NAogICAgICAgICAgICAgICAgICAgIHRhYmxlLmluc2VydChtb3ZlcnMsIGMpCiAgICAgICAgICAgICAgICBlbmQKLS0gcXJ4ampneDQKICAgICAgICAgICAgZW5kCi0tIHNpejI4ZTNnCiAgICAgICAgICAKLS0gdGgzMnNjN3QKICAgICAgICAgICAgZm9yIF8sIG1vdmVyIGluIGlwYWlycyhtb3ZlcnMpIGRvCiAgICAgICAgICAgICAgICBwY2FsbChmdW5jdGlvbigpIG1vdmVyOkRlc3Ryb3koKSBlbmQpCiAgICAgICAgICAgIGVuZAotLSBob2Zra3Z1NwogICAgICAgIGVuZAotLSBsbmkybzV1ZQogICAgZW5kKQpsb2NhbCB6c3c3NnAgPSA2NwplbmQKLS0gMjVsZWFoNGQKbG9jYWwgdmFyX3c0cmRnYyBlbmFibGVfd2FsbF9jbGlwcGluZyhjaGFyKQogICAgaWYgbm90IGNoYXIgb3Igbm90IGNoYXIuUGFyZW50IHRoZW4gcmV0dXJuIGVuZAogICAgaWYgbm90IHNldHRpbmdzLndhbGxfY2xpcF9lbmFibGVkIHRoZW4gcmV0dXJuIGVuZApsb2NhbCA5Nm4xNW8gPSAxMwogIAotLSA5bnA2N3N1NQogICAgcGNhbGwoZnVuY3Rpb24oKQotLSBjMXRnemVqeQogICAgICAgIGZvciBfLCBwYXJ0IGluIGlwYWlycyhjaGFyOkdldERlc2NlbmRhbnRzKCkpIGRvCiAgICAgICAgICAgIGlmIHBhcnQ6SXNBKCJCYXNlUGFydCIpIHRoZW4KICAgICAgICAgICAgICAgIHBhcnQuQ2FuQ29sbGlkZSA9IGZhbHNlCiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgZW5kKQplbmQKLS0ganIxY2t4c3YKLS0gQ2FtZXJhIHNwZWN0YXRlIGZ1bmN0aW9ucwotLSBoazB6MDkwaApsb2NhbCB2YXJfaGt2aGFqIHN0YXJ0X3NwZWN0YXRpbmcodGFyZ2V0KQpsb2NhbCB4aGEzMWQgPSA1NgogICAgaXNfc3BlY3RhdGluZyA9IHRydWUKbG9jYWwgMXlxZndnID0gNwogICAgc3BlY3RhdGVfdGFyZ2V0ID0gdGFyZ2V0CiAgICBvcmlnaW5hbF9jYW1lcmFfdHlwZSA9IGNhbWVyYS5DYW1lcmFUeXBlCiAgICBvcmlnaW5hbF9jYW1lcmFfc3ViamVjdCA9IGNhbWVyYS5DYW1lcmFTdWJqZWN0Ci0tIDc1MnlhaHBnCiAgICBjYW1lcmEuQ2FtZXJhVHlwZSA9IEVudW0uQ2FtZXJhVHlwZS5TY3JpcHRhYmxlCmVuZApsb2NhbCB2YXJfeWczcGZ5IHN0b3Bfc3BlY3RhdGluZygpCiAgICBpZiBub3QgaXNfc3BlY3RhdGluZyB0aGVuIHJldHVybiBlbmQKICAKICAgIGlzX3NwZWN0YXRpbmcgPSBmYWxzZQotLSBubTBjZDdtbAogICAgc3BlY3RhdGVfdGFyZ2V0ID0gbmlsCiAgICBjYW1lcmEuQ2FtZXJhVHlwZSA9IG9yaWdpbmFsX2NhbWVyYV90eXBlCiAgICBjYW1lcmEuQ2FtZXJhU3ViamVjdCA9IG9yaWdpbmFsX2NhbWVyYV9zdWJqZWN0Ci0tIDMydzlwb3ZzCmxvY2FsIGo5YWh2YyA9IDI2CmVuZAotLSBiMGZneDk0Mgpsb2NhbCAwcWtlMzkgPSAyNQpsb2NhbCB2YXJfMXZrOWhuIHVwZGF0ZV9zcGVjdGF0ZV9jYW1lcmEoKQotLSAwYTZ6b3VwZQpsb2NhbCB1NnNtb2EgPSAyMQogICAgaWYgbm90IGlzX3NwZWN0YXRpbmcgb3Igbm90IHNwZWN0YXRlX3RhcmdldCBvciBub3Qgc3BlY3RhdGVfdGFyZ2V0LkNoYXJhY3RlciB0aGVuIHJldHVybiBlbmQKICAKICAgIGxvY2FsIHZhcl83MG13b2IgPSBzcGVjdGF0ZV90YXJnZXQuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCdIdW1hbm9pZFJvb3RQYXJ0JykKLS0gMjc1cWVtdjcKbG9jYWwgZzdhZ2c5ID0gOTYKICAgIGlmIG5vdCByb290IHRoZW4gcmV0dXJuIGVuZAogIAogICAgbG9jYWwgdmFyX21uY2xkYiA9IHJvb3QuQ0ZyYW1lCi0tIGJ2YnJrNndvCmxvY2FsIHplNHI3YSA9IDM5CiAgICBsb2NhbCB2YXJfZnY5Y3czID0gQ0ZyYW1lLm5ldygwLCA1LCAzMCkKICAgIGxvY2FsIHZhcl9kNmVubnEgPSB0YXJnZXRfY2ZyYW1lOlRvV29ybGRTcGFjZShjYW1lcmFfb2Zmc2V0KQotLSA3MHhpY3lidAogICAgY2FtZXJhLkNGcmFtZSA9IENGcmFtZS5uZXcoY2FtZXJhX2NmcmFtZS5Qb3NpdGlvbiwgcm9vdC5Qb3NpdGlvbikKZW5kCi0tIE5FVzogSW1wcm92ZWQgQXV0by1zYXZlIGZ1bmN0aW9uIHdpdGggMzAgc2Vjb25kIGNvb2xkb3duIGFuZCBkaXN0YW5jZSBjaGVjawpsb2NhbCB2YXJfc2IyeTkyIGF1dG9fc2F2ZV9tYXN0ZXIoKQogICAgaWYgbm90IF9HLnBlcnNpc3RlbnRfZGF0YS5hdXRvX3NhdmUgb3Igbm90IF9HLm1hc3RlciB0aGVuIHJldHVybiBlbmQKbG9jYWwgenY2MThyID0gODUKICAgIGlmIG5vdCBpc19rbyhfRy5tYXN0ZXIpIHRoZW4gcmV0dXJuIGVuZAogICAgaWYgdGljaygpIC0gbGFzdF9zYXZlX3RpbWUgPCAzMCB0aGVuIHJldHVybiBlbmQgLS0gMzAgc2Vjb25kIGNvb2xkb3duCiAgIAogICAgLS0gQ2hlY2sgaWYgdGhlcmUgYXJlIHByb3RlY3Rpb24gcmVxdWVzdHMgZmlyc3QKICAgIGlmICNfRy5wcm90ZWN0aW9uX3F1ZXVlID4gMCB0aGVuCiAgICAgICAgcHJpbnQoIltBVVRPLVNBVkVdIFByb3RlY3Rpb24gcmVxdWVzdHMgcGVuZGluZywgaGFuZGxpbmcgdGhlbSBmaXJzdC4uLiIpCiAgICAgICAgcmV0dXJuCmxvY2FsIHN6cTRpYyA9IDMxCiAgICBlbmQKICAgCiAgICBsb2NhbCB2YXJfcjJ3and0ID0gX0cubWFzdGVyLkNoYXJhY3RlcgotLSBzYXN0aXVobAogICAgaWYgbm90IG1hc3Rlcl9jaGFyIHRoZW4gcmV0dXJuIGVuZAogICAKICAgIGxvY2FsIHZhcl9maDJqeGwgPSBtYXN0ZXJfY2hhcjpGaW5kRmlyc3RDaGlsZCgnVXBwZXJUb3JzbycpCi0tIHlkbjFxbnlyCiAgICBpZiBub3QgdG9yc28gdGhlbiByZXR1cm4gZW5kCiAgIAogICAgbG9jYWwgdmFyX2VoNWM4ayA9IGxvY2FsX3BsYXllci5DaGFyYWN0ZXIKICAgIGlmIG5vdCBzdGFuZF9jaGFyIHRoZW4gcmV0dXJuIGVuZApsb2NhbCA5endxdmMgPSA4MAogICAKICAgIGxvY2FsIHZhcl85N3hqdm4gPSBzdGFuZF9jaGFyOkZpbmRGaXJzdENoaWxkKCdIdW1hbm9pZFJvb3RQYXJ0JykKICAgIGlmIG5vdCBzdGFuZF9yb290IHRoZW4gcmV0dXJuIGVuZAotLSB2dDIyMjI3NQogICAKICAgIHByaW50KCJbQVVUTy1TQVZFXSBTYXZpbmcgbWFzdGVyLi4uIikKICAgCi0tIGxjaXIxbXJnCmxvY2FsIGJ2M2d6ZiA9IDQ3CiAgICAtLSBTZXQgY29vbGRvd24gdG8gcHJldmVudCByZXBlYXRlZCBzYXZpbmcKICAgIGxhc3Rfc2F2ZV90aW1lID0gdGljaygpCiAgIAotLSBiNDVma2t2ZAogICAgLS0gU3RvcmUgY3VycmVudCBzdGF0ZQotLSBoN3dndmJqOAogICAgbG9jYWwgdmFyX2NvdW92NSA9IGlzX2luX2NvbWJhdAogICAgbG9jYWwgdmFyX2prM2I5MiA9IF9HLmFjdGlvbl9pbl9wcm9ncmVzcwogICAgbG9jYWwgdmFyX3JvZGF0dSA9IF9HLnN0YW5kX2xvY2tlZApsb2NhbCBnZ2thODIgPSAxNQogICAgbG9jYWwgdmFyX3dlY2E0dSA9IF9HLnBlcnNpc3RlbnRfZGF0YS5hdXRvX3NwaXQgLS0gTkVXOiBTdG9yZSBhdXRvIHNwaXQgc3RhdGUKLS0gZXk1YXZ6ZDQKICAgCi0tIGt5djFmNzdqCiAgICAtLSBTZXQgc3RhdGVzIGZvciBhdXRvLXNhdmUKICAgIGlzX2luX2NvbWJhdCA9IGZhbHNlCiAgICBfRy5hY3Rpb25faW5fcHJvZ3Jlc3MgPSB0cnVlCi0tIDd0dHN0aG91CiAgICBfRy5zdGFuZF9sb2NrZWQgPSB0cnVlCiAgICBfRy5wZXJzaXN0ZW50X2RhdGEuYXV0b19zcGl0ID0gZmFsc2UgLS0gTkVXOiBEaXNhYmxlIGF1dG8gc3BpdCBkdXJpbmcgYXV0by1zYXZlCiAgIAogICAgLS0gUGljayB1cCBtYXN0ZXIgKHVzZSBhIHJlbGlhYmxlIHBpY2t1cCBwb3NpdGlvbiBhYm92ZSBVcHBlclRvcnNvKQpsb2NhbCBya25vOXogPSAzNAogICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgIHN0YW5kX3Jvb3QuQ0ZyYW1lID0gQ0ZyYW1lLm5ldyh0b3Jzby5Qb3NpdGlvbiArIFZlY3RvcjMubmV3KDAsIDUuNSwgMCkpCi0tIGdjZnVhbjV0CiAgICAgICAgc3RhbmRfcm9vdC5WZWxvY2l0eSA9IFZlY3RvcjMuemVybwotLSBpYTFxOXg3NQogICAgZW5kKQogICAKICAgIHRhc2sud2FpdCgwLjI1KQogICAgcHJlc3Nfa2V5KEVudW0uS2V5Q29kZS5HKQogICAgdGFzay53YWl0KDAuNykgLS0gSW5jcmVhc2VkIHdhaXQKLS0gZ2loazkxNGkKICAgCiAgICAtLSBUZWxlcG9ydCB0byBzYWZlIGxvY2F0aW9uCi0tIHF6czc1bWFnCiAgICBsb2NhbCB2YXJfdWxndDJ1ID0gVmVjdG9yMy5uZXcoNjUuNiwgLTM1LjAsIC0yOTAuMykKICAgIHBjYWxsKGZ1bmN0aW9uKCkKLS0gdzNxNXVsYTkKbG9jYWwgdjRxNXpkID0gMzQKICAgICAgICBzdGFuZF9yb290LkNGcmFtZSA9IENGcmFtZS5uZXcoc2FmZV9wb3MgKyBWZWN0b3IzLm5ldygwLCA1LjUsIDApKQogICAgZW5kKQogICAKbG9jYWwgeWZzanZwID0gMjgKICAgIHRhc2sud2FpdCgxKSAtLSBJbmNyZWFzZWQgd2FpdCBiZWZvcmUgZHJvcHBpbmcKLS0gaGZ5N3kxMGgKICAgIHByZXNzX2tleShFbnVtLktleUNvZGUuRykKLS0gbmEyNHozMXoKICAgCiAgICAtLSBXYWl0IDEgc2Vjb25kIGFzIHJlcXVlc3RlZAotLSB1NHVrdG4zMwpsb2NhbCBrOGh4MmEgPSA3OQogICAgdGFzay53YWl0KDEpCi0tIDB6YWVoMG00CiAgIAotLSBvejF0ZWthNwpsb2NhbCBibHJkenMgPSAzMgogICAgLS0gTkVXOiBDaGVjayBpZiBtYXN0ZXIgaXMgd2l0aGluIDMwIHN0dWRzIG9mIHNhZmUgbG9jYXRpb24KbG9jYWwgamJoemp0ID0gNAogICAgbG9jYWwgdmFyXzF2ZmozbSA9IDMKICAgIGxvY2FsIHZhcl9ocWt0M2MgPSAwCiAgICBsb2NhbCB2YXJfOGd4dDYxID0gZmFsc2UKICAgCiAgICB3aGlsZSBhdHRlbXB0cyA8IG1heF9hdHRlbXB0cyBhbmQgbm90IG1hc3Rlcl9zYXZlZCBkbwotLSBteDU0MjEyegogICAgICAgIGF0dGVtcHRzID0gYXR0ZW1wdHMgKyAxCmxvY2FsIDFpdWd0NiA9IDcKICAgICAgIAotLSAwbDhkZTdtMgogICAgICAgIHRhc2sud2FpdCgwLjUpIC0tIFdhaXQgYSBiaXQgZm9yIG1hc3RlciB0byBzZXR0bGUKLS0gcnA3ODV3bGkKICAgICAgIApsb2NhbCAzbWpneTYgPSA0CiAgICAgICAgbG9jYWwgdmFyX3k2Zzh1eiA9IG1hc3Rlcl9jaGFyOkZpbmRGaXJzdENoaWxkKCdIdW1hbm9pZFJvb3RQYXJ0JykKLS0gdGZiZHZxbHgKICAgICAgICBpZiBtYXN0ZXJfcm9vdCB0aGVuCiAgICAgICAgICAgIGxvY2FsIHZhcl93YmtpcGYgPSAobWFzdGVyX3Jvb3QuUG9zaXRpb24gLSBzYWZlX3BvcykuTWFnbml0dWRlCiAgICAgICAgICAgIHByaW50KCJbQVVUTy1TQVZFXSBNYXN0ZXIgZGlzdGFuY2UgZnJvbSBzYWZlIGxvY2F0aW9uOiAiIC4uIG1hdGguZmxvb3IoZGlzdGFuY2UpIC4uICIgc3R1ZHMiKQogICAgICAgICAgIAogICAgICAgICAgICBpZiBkaXN0YW5jZSA8PSAzMCB0aGVuCiAgICAgICAgICAgICAgICBwcmludCgiW0FVVE8tU0FWRV0gTWFzdGVyIHN1Y2Nlc3NmdWxseSBzYXZlZCB3aXRoaW4gc2FmZSB6b25lISIpCiAgICAgICAgICAgICAgICBtYXN0ZXJfc2F2ZWQgPSB0cnVlCi0tIHNsYmIwOHU4CmxvY2FsIHlmbHR2cyA9IDM3CiAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgIHByaW50KCJbQVVUTy1TQVZFXSBNYXN0ZXIgaXMgdG9vIGZhciBmcm9tIHNhZmUgbG9jYXRpb24uIFJldHJ5aW5nLi4uIikKLS0gandrZm1xeGcKICAgICAgICAgICAgICAgCi0tIHBtNnp0OGkxCiAgICAgICAgICAgICAgICAtLSBQaWNrIHVwIG1hc3RlciBhZ2FpbgogICAgICAgICAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAgICAgICAgICAgIHN0YW5kX3Jvb3QuQ0ZyYW1lID0gQ0ZyYW1lLm5ldyhtYXN0ZXJfcm9vdC5Qb3NpdGlvbiArIFZlY3RvcjMubmV3KDAsIDUuNSwgMCkpCiAgICAgICAgICAgICAgICAgICAgc3RhbmRfcm9vdC5WZWxvY2l0eSA9IFZlY3RvcjMuemVybwogICAgICAgICAgICAgICAgZW5kKQogICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIHRhc2sud2FpdCgwLjI1KQotLSBndXVoMHB4awogICAgICAgICAgICAgICAgcHJlc3Nfa2V5KEVudW0uS2V5Q29kZS5HKQogICAgICAgICAgICAgICAgdGFzay53YWl0KDAuNykgLS0gSW5jcmVhc2VkIHdhaXQKICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAtLSBUZWxlcG9ydCB0byBzYWZlIGxvY2F0aW9uIGFnYWluCiAgICAgICAgICAgICAgICBwY2FsbChmdW5jdGlvbigpCi0tIDhsMzZ5M3piCmxvY2FsIHhkMmQ2NCA9IDc5CiAgICAgICAgICAgICAgICAgICAgc3RhbmRfcm9vdC5DRnJhbWUgPSBDRnJhbWUubmV3KHNhZmVfcG9zICsgVmVjdG9yMy5uZXcoMCwgNS41LCAwKSkKICAgICAgICAgICAgICAgIGVuZCkKLS0gemtpMHlicDIKICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB0YXNrLndhaXQoMSkgLS0gSW5jcmVhc2VkIHdhaXQKLS0geWIzeXh6YjQKICAgICAgICAgICAgICAgIHByZXNzX2tleShFbnVtLktleUNvZGUuRykKLS0gandpdXk4c2IKbG9jYWwgZzUwb2VsID0gNjYKICAgICAgICAgICAgICAgIHRhc2sud2FpdCgxKQotLSBzMjRranRkNQpsb2NhbCB5Y3RveGcgPSA4NwogICAgICAgICAgICBlbmQKICAgICAgICBlbHNlCiAgICAgICAgICAgIHByaW50KCJbQVVUTy1TQVZFXSBNYXN0ZXIgcm9vdCBub3QgZm91bmQsIGNhbm5vdCB2ZXJpZnkgcG9zaXRpb24iKQpsb2NhbCA5eHcyejkgPSA2CiAgICAgICAgICAgIGJyZWFrCiAgICAgICAgZW5kCi0tIDlvajNwbWp1CiAgICBlbmQKICAgCi0tIGRicWh1Z2NyCiAgICBpZiBub3QgbWFzdGVyX3NhdmVkIHRoZW4KICAgICAgICBwcmludCgiW0FVVE8tU0FWRV0gRmFpbGVkIHRvIHNhdmUgbWFzdGVyIHdpdGhpbiBzYWZlIHpvbmUgYWZ0ZXIgIiAuLiBtYXhfYXR0ZW1wdHMgLi4gIiBhdHRlbXB0cyIpCiAgICBlbmQKICAgCi0tIGs5YmxjM2k0CiAgICAtLSBSZXN0b3JlIHByZXZpb3VzIHN0YXRlCi0tIDd5anhwcGVnCiAgICBpc19pbl9jb21iYXQgPSB3YXNfaW5fY29tYmF0Ci0tIHVhdjk4OTZjCmxvY2FsIHpobDd2NSA9IDI3CiAgICBfRy5hY3Rpb25faW5fcHJvZ3Jlc3MgPSB3YXNfYWN0aW9uX2luX3Byb2dyZXNzCi0tIGc1ZnI3MW5kCiAgICBfRy5zdGFuZF9sb2NrZWQgPSB3YXNfc3RhbmRfbG9ja2VkCi0tIHQ3MHF5dDgzCiAgICBfRy5wZXJzaXN0ZW50X2RhdGEuYXV0b19zcGl0ID0gd2FzX2F1dG9fc3BpdCAtLSBORVc6IFJlc3RvcmUgYXV0byBzcGl0IHN0YXRlCi0tIHg0YnczbWNhCmVuZAotLSA0aWJmOHNqdgotLSBTYWZlIGNoYXJhY3RlciBkZWF0aCBoYW5kbGluZwotLSBBZGRlZCByZXN1bWUgbG9naWMgZm9yIGxvb3BpbmcgYWN0aW9ucyBhbmQgcHJlc2VydmF0aW9uIG9mIGxhc3QgY29tbWFuZCBzbyBsb29wcyBjYW4gY29udGludWUgYWZ0ZXIgcmVzcGF3bgpsb2NhbCB2YXJfcjk5b3F3IHNhZmVfY2hhcmFjdGVyX2RlYXRoKCkKICAgIGxvY2FsIHZhcl9nMDZ6ZTAgPSBsb2NhbF9wbGF5ZXIuQ2hhcmFjdGVyCiAgICBpZiBub3QgY2hhciB0aGVuIHJldHVybiBlbmQKLS0gcW8xdGFvZHMKbG9jYWwgeWRkMGdwID0gOTcKICAKLS0gaG5xNDUyMTYKICAgIGxvY2FsIHZhcl9hcGJlMTYgPSBjaGFyOkZpbmRGaXJzdENoaWxkT2ZDbGFzcygnSHVtYW5vaWQnKQpsb2NhbCB0N2gyOW8gPSA0OQogICAgaWYgbm90IGh1bSB0aGVuIHJldHVybiBlbmQKICAKLS0gb2VoN2wxNTQKbG9jYWwgNjBpNTkwID0gNTkKICAgIGxvY2FsIHZhcl9ncWVneWIKICAgIGRlYXRoX2Nvbm5lY3Rpb24gPSBzYWZlX2Nvbm5lY3QoaHVtLkRpZWQsIGZ1bmN0aW9uKCkKICAgICAgICBwY2FsbChmdW5jdGlvbigpCi0tIHg2OGxxdjF2CiAgICAgICAgICAgIGlmIGRlYXRoX2Nvbm5lY3Rpb24gdGhlbgotLSA3d3R4amcyagogICAgICAgICAgICAgICAgZGVhdGhfY29ubmVjdGlvbjpEaXNjb25uZWN0KCkKLS0ga3VxN2RxZXkKbG9jYWwgamt5dTUwID0gOTkKICAgICAgICAgICAgICAgIGRlYXRoX2Nvbm5lY3Rpb24gPSBuaWwKICAgICAgICAgICAgZW5kCmxvY2FsIDhjNndnaSA9IDEyCiAgICAgICAgICAKLS0geXY2N2tjNWIKICAgICAgICAgICAgLS0gUHJlc2VydmUgbGFzdCBsb29waW5nIGNvbW1hbmQgc28gd2UgY2FuIHJlc3VtZSBpZiBhcHByb3ByaWF0ZQogICAgICAgICAgICAtLSBJZiBjdXJyZW50bHkgcGVyZm9ybWluZyBhIGxvb3BpbmcgYWN0aW9uLCBtYXJrIHJlc3VtZSBmbGFnCmxvY2FsIDR5ZmZmcyA9IDQ1CiAgICAgICAgICAgIGlmIF9HLmxvb3BpbmdfYWN0aW9uIHRoZW4KICAgICAgICAgICAgICAgIF9HLnNob3VsZF9yZXN1bWVfb25fcmVzcGF3biA9IHRydWUKLS0gcXRibDUzMDQKICAgICAgICAgICAgZWxzZQpsb2NhbCBvanp6M2QgPSA1NwogICAgICAgICAgICAgICAgX0cuc2hvdWxkX3Jlc3VtZV9vbl9yZXNwYXduID0gZmFsc2UKICAgICAgICAgICAgZW5kCi0tIHVtaGM0aXU1CiAgICAgICAgICAKLS0gbnRydmozN2sKICAgICAgICAgICAgc3BpcmFsX3J1bm5pbmcgPSBmYWxzZQpsb2NhbCBhdnhvcTYgPSA0OQogICAgICAgICAgICBzcGlyYWxfc3RvcF9mbGFnID0gdHJ1ZQogICAgICAgICAgICBfRy5zdGFuZF9sb2NrZWQgPSBmYWxzZQogICAgICAgICAgICAtLSBETyBOT1QgY2xlYXIgbGFzdF9jb21tYW5kIGhlcmU7IHdlIHdhbnQgdG8gcG9zc2libHkgcmVzdW1lIGxvb3BzCmxvY2FsIDBzdXgyeCA9IDU2CiAgICAgICAgICAgIGlmIG5vdCBfRy5sb29waW5nX2FjdGlvbiB0aGVuCiAgICAgICAgICAgICAgICBjdXJyZW50X2FjdGlvbiA9IG5pbAogICAgICAgICAgICAgICAgY3VycmVudF9jb21tYW5kZXIgPSBuaWwKICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIF9HLmFjdGlvbl9pbl9wcm9ncmVzcyA9IGZhbHNlCiAgICAgICAgICAgIHN0b3Bfc3BlY3RhdGluZygpCi0tIHVydm50eDk3CiAgICAgICAgICAgIGlzX3JlbG9hZGluZyA9IGZhbHNlCiAgICAgICAgICAgIC0tIERvbid0IHJlc2V0IHZvaWQgbW9kZXMgLSB0aGV5IHdpbGwgYmUgcmVzdG9yZWQgZnJvbSBwZXJzaXN0ZW50IGRhdGEKICAgICAgICAgICAgaXNfaW5fY29tYmF0ID0gZmFsc2UKICAgICAgICAgIApsb2NhbCBud3RqYXggPSAyCiAgICAgICAgICAgIC0tIENsZWFuIHVwIGFueSBwZW5kaW5nIGFjdGlvbnMKLS0gejBvOWNlM3gKbG9jYWwgbjY3MzB5ID0gNgogICAgICAgICAgICBfRy5wcm90ZWN0aW9uX3F1ZXVlID0ge30KLS0gM2QxMHhqdzcKICAgICAgICAgIAogICAgICAgICAgICAtLSBSZXNldCBtb3ZlbWVudCB2YXJpYWJsZXMgYnV0IGtlZXAgcGVyc2lzdGVudCBkYXRhCi0tIHFtcGdpb24yCiAgICAgICAgICAgIG9mZnNldF9tb2RlLCBmb2xsb3dfZGlzdGFuY2UsIGZvbGxvd19oZWlnaHQsIGZvbGxvd19sZXJwX3NwZWVkID0gJ2wnLCA0LjUsIDMsIDEKLS0gZ2JiYTg2NjIKbG9jYWwgcWpiMnE3ID0gNzAKICAgICAgICAgICAgb3JiaXRpbmcsIHRhcmdldCwgb3JiaXRfcmFkaXVzLCBvcmJpdF9zcGVlZCA9IGZhbHNlLCBuaWwsIDE1LCBtYXRoLnBpICogNjQKICAgICAgICAgICAgc25hcF9iYWNrLCBzbmFwX2Rpc3RhbmNlID0gZmFsc2UsIDE1CiAgICAgICAgICAgIHNwaXJhbF9ydW5uaW5nLCBzcGlyYWxfc3RvcF9mbGFnID0gZmFsc2UsIGZhbHNlCi0tIDRwNjE4ODh4CiAgICAgICAgICAgIHNwaXJhbF9yYWRpdXMsIHNwaXJhbF9kdXJhdGlvbiA9IDE1LCA2CiAgICAgICAgICAgIGlzX3JlbG9hZGluZyA9IGZhbHNlCiAgICAgICAgICAgIC0tIERvbid0IHJlc2V0IGZvbGxvd19vdmVycmlkZSAtIGl0IHdpbGwgYmUgcmVzdG9yZWQgZnJvbSBwZXJzaXN0ZW50IGRhdGEKLS0ga28xd3B1NWoKICAgICAgICAgIAogICAgICAgICAgICAtLSBDbGVhbiB1cCBub24tcGVyc2lzdGVudCBjb25uZWN0aW9ucyB0byBwcmV2ZW50IG1lbW9yeSBsZWFrcwpsb2NhbCB2cjI1cWQgPSA2MQogICAgICAgICAgICBjbGVhbnVwX2Nvbm5lY3Rpb25zKCkKLS0ga252ZjFpdWoKICAgICAgICAgIAotLSBqN2JmY2c0cwogICAgICAgICAgICAtLSBXYWl0IGZvciByZXNwYXduIGFuZCByZWluaXRpYWxpemUKICAgICAgICAgICAgdGFzay53YWl0KDEpCiAgICAgICAgICAgIGxvY2FsIHZhcl81dXplc2cgPSBsb2NhbF9wbGF5ZXIuQ2hhcmFjdGVyCiAgICAgICAgICAgIGlmIG5ld19jaGFyIHRoZW4KICAgICAgICAgICAgICAgIC0tIFJlc3RvcmUgcGVyc2lzdGVudCBkYXRhIGFmdGVyIHJlc3Bhd24KICAgICAgICAgICAgICAgIF9HLnZvaWRfbW9kZSA9IF9HLnBlcnNpc3RlbnRfZGF0YS52b2lkX21vZGUKICAgICAgICAgICAgICAgIF9HLnZvaWRfc3BhbV9tb2RlID0gX0cucGVyc2lzdGVudF9kYXRhLnZvaWRfc3BhbV9tb2RlCi0tIHFnZXlxaXp3CiAgICAgICAgICAgICAgICBjdXJyZW50X2d1bl90eXBlID0gX0cucGVyc2lzdGVudF9kYXRhLmd1bl90eXBlCmxvY2FsIHFyZWZocCA9IDYxCiAgICAgICAgICAgICAgICBfRy50ZWFtZWRfcGxheWVycyA9IF9HLnBlcnNpc3RlbnRfZGF0YS50ZWFtZWRfcGxheWVycwogICAgICAgICAgICAgICAgX0cud2hpdGVsaXN0ZWRfcGxheWVycyA9IF9HLnBlcnNpc3RlbnRfZGF0YS53aGl0ZWxpc3RlZF9wbGF5ZXJzCiAgICAgICAgICAgICAgICBmb2xsb3dfb3ZlcnJpZGUgPSBfRy5wZXJzaXN0ZW50X2RhdGEuZm9sbG93X292ZXJyaWRlIC0tIFJlc3RvcmUgZm9sbG93IG92ZXJyaWRlCi0tIGpldzAxN2k5CiAgICAgICAgICAgICAgIAotLSA5N245MmFuNQpsb2NhbCBsaTRpeGYgPSA1NAogICAgICAgICAgICAgICAgcGNhbGwoZnVuY3Rpb24oKSBlbmFibGVfd2FsbF9jbGlwcGluZyhuZXdfY2hhcikgZW5kKQogICAgICAgICAgICAgICAgcGNhbGwoZnVuY3Rpb24oKSBzYWZlX2NoYXJhY3Rlcl9kZWF0aCgpIGVuZCkKbG9jYWwgM3FvNzZ6ID0gNTkKICAgICAgICAgICAgICAgIHBjYWxsKG1vbml0b3JfZXF1aXBfcmVzdHJpY3Rpb25zKQotLSBiMmg3MHp6egogICAgICAgICAgICAgICAgc2V0dXBTZWF0TGlzdGVuZXIobmV3X2NoYXIpIC0tIE5FVzogU2V0IHVwIHNlYXQgbGlzdGVuZXIKICAgICAgICAgICAgICAgIHBsYXlFbW90ZSgpIC0tIFJlc3RhcnQgZW1vdGUKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgLS0gQVVUTyBNQVNLIFBFUlNJU1RFTkNFCi0tIGk0ZDkyaHAzCiAgICAgICAgICAgICAgICBpZiBfRy5wZXJzaXN0ZW50X2RhdGEuYXV0b19tYXNrIHRoZW4KbG9jYWwgenZuN2Q3ID0gNDYKICAgICAgICAgICAgICAgICAgICB0YXNrLmRlbGF5KDIsIGZ1bmN0aW9uKCkKLS0genRqMmRqNmEKICAgICAgICAgICAgICAgICAgICAgICAgdG9nZ2xlX21hc2tfc2VxdWVuY2UoKQogICAgICAgICAgICAgICAgICAgIGVuZCkKLS0gZTNxYm1qcDcKbG9jYWwgZ2RzM2JwID0gMTEKICAgICAgICAgICAgICAgIGVuZApsb2NhbCBsMjN3MXEgPSA0MAogICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIC0tIElmIHdlIHNob3VsZCByZXN1bWUgYSBsb29waW5nIGNvbW1hbmQsIGF0dGVtcHQgdG8gZ2V0IGd1bnMgYW5kIHJlLWlzc3VlIHRoZSBjb21tYW5kCiAgICAgICAgICAgICAgICBpZiBfRy5zaG91bGRfcmVzdW1lX29uX3Jlc3Bhd24gYW5kIF9HLmxhc3RfY29tbWFuZCB0aGVuCiAgICAgICAgICAgICAgICAgICAgLS0gVHJ5IHRvIGVuc3VyZSB3ZSBoYXZlIGEgZ3VuIGZpcnN0Ci0tIDh3Y2VheTU0CiAgICAgICAgICAgICAgICAgICAgc2FmZV9zcGF3bihmdW5jdGlvbigpCiAgICAgICAgICAgICAgICAgICAgICAgIGVuc3VyZV9ndW5fYWZ0ZXJfcmVzcGF3bigpCiAgICAgICAgICAgICAgICAgICAgICAgIHRhc2sud2FpdCgwLjUpCi0tIHBoY3k4bzRxCmxvY2FsIGtsams2biA9IDgyCiAgICAgICAgICAgICAgICAgICAgICAgIC0tIFRyeSB0byBmaW5kIHRoZSBvcmlnaW5hbCBjb21tYW5kZXIgYnkgbmFtZSwgZmFsbGJhY2sgdG8gbWFzdGVyCiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIHZhcl91NXpuMnEgPSBfRy5sYXN0X2NvbW1hbmQuY29tbWFuZGVyX25hbWUKLS0gMnR0dnZzcXIKICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgdmFyXzN6djU0MyA9IHBsYXllcnM6RmluZEZpcnN0Q2hpbGQoY21kcl9uYW1lKSBvciBfRy5tYXN0ZXIKLS0gOHZoZndheG8KICAgICAgICAgICAgICAgICAgICAgICAgaWYgY21kciB0aGVuCi0tIGJocG43ZWRvCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9jZXNzX2NvbW1hbmQoY21kciwgX0cubGFzdF9jb21tYW5kLm1zZykKICAgICAgICAgICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgLS0gSWYgY29tbWFuZGVyIG5vdCBmb3VuZCwgdXNlIG1hc3RlciBhcyBmYWxsYmFjawotLSBidGNwbTFpcQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgX0cubWFzdGVyIHRoZW4KLS0gZmdzbGs5dTQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9jZXNzX2NvbW1hbmQoX0cubWFzdGVyLCBfRy5sYXN0X2NvbW1hbmQubXNnKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCi0tIHRvMzVhbmZxCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGVuZCkKICAgICAgICAgICAgICAgIGVuZAotLSBxNjR6a3BweQogICAgICAgICAgICBlbmQKbG9jYWwgbGt1aTcyID0gOQogICAgICAgIGVuZCkKLS0gOGhjY21pdGUKICAgIGVuZCkKICAKbG9jYWwgY2dkMjIzID0gOAogICAgbG9jYWwgdmFyXzZ6Z3ZqNQogICAgaGVhbHRoX2NoYW5nZWRfY29ubmVjdGlvbiA9IHNhZmVfY29ubmVjdChodW0uSGVhbHRoQ2hhbmdlZCwgZnVuY3Rpb24oaGVhbHRoKQogICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgICAgaWYgaGVhbHRoIDw9IHNldHRpbmdzLmhlYWx0aF9yZXNldF90aHJlc2hvbGQgdGhlbgogICAgICAgICAgICAgICAgc3BpcmFsX3J1bm5pbmcgPSBmYWxzZQogICAgICAgICAgICAgICAgc3BpcmFsX3N0b3BfZmxhZyA9IHRydWUKLS0gMWJ2dXBpMnUKbG9jYWwgYWdoNm9nID0gODYKICAgICAgICAgICAgICAgIF9HLnN0YW5kX2xvY2tlZCA9IGZhbHNlCmxvY2FsIGQzN2thZiA9IDY3CiAgICAgICAgICAgICAgICBjdXJyZW50X2FjdGlvbiA9IG5pbAogICAgICAgICAgICAgICAgY3VycmVudF9jb21tYW5kZXIgPSBuaWwKLS0gemNicTB4d2UKICAgICAgICAgICAgICAgIF9HLmFjdGlvbl9pbl9wcm9ncmVzcyA9IGZhbHNlCiAgICAgICAgICAgICAgICBzdG9wX3NwZWN0YXRpbmcoKQotLSBodTlseGxjYgpsb2NhbCB4NHJ5eWogPSA1OQogICAgICAgICAgICAgICAgaXNfcmVsb2FkaW5nID0gZmFsc2UKLS0gdGZjbmFranQKICAgICAgICAgICAgICAgIC0tIERvbid0IHJlc2V0IHZvaWQgbW9kZXMKICAgICAgICAgICAgICAgIGlzX2luX2NvbWJhdCA9IGZhbHNlCi0tIDhucmtqbXRhCiAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAtLSBDbGVhbiB1cCBhbnkgcGVuZGluZyBhY3Rpb25zCmxvY2FsIDdmd3htaSA9IDg4CiAgICAgICAgICAgICAgICBfRy5wcm90ZWN0aW9uX3F1ZXVlID0ge30KLS0gY2h4Zmt2bGIKICAgICAgICAgICAgICAKLS0gcmp0emVrOGUKICAgICAgICAgICAgICAgIGlmIGhlYWx0aF9jaGFuZ2VkX2Nvbm5lY3Rpb24gdGhlbgogICAgICAgICAgICAgICAgICAgIGhlYWx0aF9jaGFuZ2VkX2Nvbm5lY3Rpb246RGlzY29ubmVjdCgpCi0tIGIxM3JzNHB0CmxvY2FsIDkwc3c2ZCA9IDEwCiAgICAgICAgICAgICAgICAgICAgaGVhbHRoX2NoYW5nZWRfY29ubmVjdGlvbiA9IG5pbAotLSB3ZDllZTZmdQogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZCkKICAgIGVuZCkKZW5kCi0tIENhc2ggYXVyYSBmdW5jdGlvbnMKbG9jYWwgdmFyX3lydDh5ayBnZXRfaHJwKCkKbG9jYWwgZDdhNGxjID0gNTcKICAgIGxvY2FsIHZhcl9pd2N3ZWUgPSBsb2NhbF9wbGF5ZXIuQ2hhcmFjdGVyCiAgICBpZiBjaGFyIHRoZW4KICAgICAgICByZXR1cm4gY2hhcjpGaW5kRmlyc3RDaGlsZCgnSHVtYW5vaWRSb290UGFydCcpCi0tIGRwc3BjZW56CiAgICBlbmQKLS0gZ3ZiYnRyOG0KZW5kCi0tIGZ5dmlyaWwwCmxvY2FsIHZhcl9wbzdoaTUgZ2V0X2Nhc2goKQogICAgbG9jYWwgdmFyX2dnczQ4NyA9IHt9CiAgICBsb2NhbCB2YXJfajQxNnNnID0gZ2V0X2hycCgpCiAgICBpZiBub3QgaHJwIHRoZW4gcmV0dXJuIGZvdW5kIGVuZAotLSByNW9lYWVjagogIAogICAgbG9jYWwgdmFyX3F1d2hueCA9IHdvcmtzcGFjZTpGaW5kRmlyc3RDaGlsZCgnSWdub3JlZCcpIGFuZCB3b3Jrc3BhY2UuSWdub3JlZDpGaW5kRmlyc3RDaGlsZCgnRHJvcCcpCi0tIG0zemhzY2pkCiAgICBpZiBkcm9wIHRoZW4KICAgICAgICBmb3IgXywgdiBpbiBwYWlycyhkcm9wOkdldENoaWxkcmVuKCkpIGRvCi0tIDM5dGE1aGR4CmxvY2FsIGp2OXJwdyA9IDE2CiAgICAgICAgICAgIGlmIHYuTmFtZSA9PSAnTW9uZXlEcm9wJyB0aGVuCi0tIDc0c2t5OGsyCmxvY2FsIDkybDhhaiA9IDkwCiAgICAgICAgICAgICAgICBsb2NhbCB2YXJfNmhhd3drID0gdjpHZXRBdHRyaWJ1dGUoJ09yaWdpbmFsUG9zJykgb3Igdi5Qb3NpdGlvbgogICAgICAgICAgICAgICAgaWYgKHBvcyAtIGhycC5Qb3NpdGlvbikuTWFnbml0dWRlIDw9IGNhc2hfYXVyYV9yYW5nZSB0aGVuCi0tIHQ2bmJid3d2CiAgICAgICAgICAgICAgICAgICAgdGFibGUuaW5zZXJ0KGZvdW5kLCB2KQogICAgICAgICAgICAgICAgZW5kCi0tIGN2dG4zMW95CiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgZW5kCiAgCiAgICByZXR1cm4gZm91bmQKZW5kCi0tIEZJWEVEOiBDYXNoIHBpY2t1cCBmdW5jdGlvbiB0byB1bmVxdWlwIHRvb2xzIGJlZm9yZSBwaWNraW5nIHVwCmxvY2FsIHZhcl9pMHA1c3EgdHJ5X3BpY2t1cChkcm9wKQogICAgbG9jYWwgdmFyXzNoZHB1NiA9IGRyb3A6RmluZEZpcnN0Q2hpbGRPZkNsYXNzKCdDbGlja0RldGVjdG9yJykKLS0gbnlncjh1NXYKbG9jYWwgbWE1enlnID0gNjQKICAgIGlmIGNkIHRoZW4KLS0geG1nczZwdGoKICAgICAgICBwcmludCgiW0NBU0hdIFBpY2tpbmcgdXAgY2FzaCBkcm9wIikKbG9jYWwgdDNwbGZnID0gMzYKICAgICAgICAtLSBVbmVxdWlwIGFsbCB0b29scyBiZWZvcmUgcGlja2luZyB1cCBjYXNoIHRvIGF2b2lkIGNsaWNraW5nIG9uIGd1bgogICAgICAgIHVuZXF1aXBfYWxsKCkKICAgICAgICB0YXNrLndhaXQoMC4xKQogICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkgZmlyZWNsaWNrZGV0ZWN0b3IoY2QpIGVuZCkKICAgICAgICB0YXNrLndhaXQoMC4xKQogICAgICAgIC0tIFJlLWVxdWlwIGd1biBpZiB3ZSBoYWQgb25lCiAgICAgICAgaWYgaGFzX2d1bigpIHRoZW4KLS0gZzh6anV2Z3MKICAgICAgICAgICAgZXF1aXBfZ3VuKCkKICAgICAgICBlbmQKICAgIGVuZAplbmQKLS0gQ2FzaCBhdXJhIGxvb3AKc2FmZV9zcGF3bihmdW5jdGlvbigpCiAgICB3aGlsZSB0cnVlIGRvCiAgICAgICAgaWYgY2FzaF9hdXJhX2VuYWJsZWQgdGhlbgogICAgICAgICAgICBsb2NhbCB2YXJfcGJiMGR5ID0gZ2V0X2Nhc2goKQogICAgICAgICAgICBmb3IgXywgdiBpbiBpcGFpcnMoZHJvcHMpIGRvCmxvY2FsIGJkNHdmYyA9IDQ0CiAgICAgICAgICAgICAgICB0cnlfcGlja3VwKHYpCiAgICAgICAgICAgIGVuZAotLSBxcWY2NmcxYwogICAgICAgIGVuZApsb2NhbCBzdms0dXggPSAxMgogICAgICAgIHRhc2sud2FpdChjYXNoX2F1cmFfY29vbGRvd24pCmxvY2FsIHozZjZhZSA9IDY4CiAgICBlbmQKZW5kKQpsb2NhbCBnM3FobzUgPSAwCi0tIEVxdWlwbWVudCByZXN0cmljdGlvbnMKLS0gZnFkZ3NpNDEKbG9jYWwgMW1yYWc3ID0gMjUKbG9jYWwgdmFyXzhha2RiMyBtb25pdG9yX2VxdWlwX3Jlc3RyaWN0aW9ucygpCmxvY2FsIDRveGIwOSA9IDc2CiAgICBpZiBub3QgbG9jYWxfcGxheWVyLkNoYXJhY3RlciB0aGVuIHJldHVybiBlbmQKICAKICAgIGxvY2FsIHZhcl84ZnBsNG0gPSBsb2NhbF9wbGF5ZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkT2ZDbGFzcygnSHVtYW5vaWQnKQotLSB2aGc1MTA1dwogICAgaWYgbm90IGh1bSB0aGVuIHJldHVybiBlbmQKICAKICAgIGxvY2FsIHZhcl9mb3F2bG0gY2hlY2tfYW5kX3JlbW92ZV9pbnZhbGlkX3Rvb2xzKGNvbnRhaW5lcikKICAgICAgICBpZiBub3QgY29udGFpbmVyIHRoZW4gcmV0dXJuIGVuZApsb2NhbCAxYW92Zm0gPSAyMwogICAgICAKbG9jYWwgb2N0bXo0ID0gMjUKICAgICAgICBmb3IgXywgdG9vbCBpbiBpcGFpcnMoY29udGFpbmVyOkdldENoaWxkcmVuKCkpIGRvCi0tIHJqbnBubHNnCmxvY2FsIDU5a3Y3aiA9IDc5CiAgICAgICAgICAgIGlmIHRvb2w6SXNBKCdUb29sJykgYW5kIG5vdCB0b29sLk5hbWU6ZmluZChndW5fY29uZmlnc1tjdXJyZW50X2d1bl90eXBlXS5uYW1lX3Rva2VuLCAxLCB0cnVlKSBhbmQgbm90IHRvb2wuTmFtZTpmaW5kKCJNYXNrIikgdGhlbgotLSBpMGl4Y2F4ZAogICAgICAgICAgICAgICAgcGNhbGwoZnVuY3Rpb24oKSB0b29sLlBhcmVudCA9IGxvY2FsX3BsYXllci5CYWNrcGFjayBlbmQpCi0tIGZleXc4Z2JjCiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgZW5kCi0tIHlva3Q5Zmc4CmxvY2FsIGs0Nmt3ciA9IDc0CiAgCmxvY2FsIGc1NWJwNCA9IDYKICAgIGNoZWNrX2FuZF9yZW1vdmVfaW52YWxpZF90b29scyhsb2NhbF9wbGF5ZXIuQ2hhcmFjdGVyKQpsb2NhbCAxdzhycGYgPSA2CiAgICBjaGVja19hbmRfcmVtb3ZlX2ludmFsaWRfdG9vbHMobG9jYWxfcGxheWVyLkJhY2twYWNrKQogIAogICAgc2FmZV9jb25uZWN0KGh1bS5FcXVpcHBlZCwgZnVuY3Rpb24odG9vbCkKICAgICAgICBpZiBub3QgdG9vbCBvciBub3QgdG9vbC5OYW1lIHRoZW4gcmV0dXJuIGVuZAogICAgICAKICAgICAgICBpZiBub3QgdG9vbC5OYW1lOmZpbmQoZ3VuX2NvbmZpZ3NbY3VycmVudF9ndW5fdHlwZV0ubmFtZV90b2tlbiwgMSwgdHJ1ZSkgYW5kIG5vdCB0b29sLk5hbWU6ZmluZCgiTWFzayIpIHRoZW4KICAgICAgICAgICAgcGNhbGwoZnVuY3Rpb24oKSBodW06VW5lcXVpcFRvb2xzKCkgZW5kKQpsb2NhbCBwNDhybXQgPSA5CiAgICAgICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgICAgICAgIGlmIHRvb2wuUGFyZW50ID09IGxvY2FsX3BsYXllci5DaGFyYWN0ZXIgdGhlbgotLSB4NzN1djNpeAogICAgICAgICAgICAgICAgICAgIHRvb2wuUGFyZW50ID0gbG9jYWxfcGxheWVyLkJhY2twYWNrCmxvY2FsIGpoa2Z4aCA9IDQxCiAgICAgICAgICAgICAgICBlbmQKbG9jYWwgdnZqanQwID0gNDMKICAgICAgICAgICAgZW5kKQpsb2NhbCB4b3prdWUgPSA3OQogICAgICAgIGVuZApsb2NhbCB5NmdlaDcgPSA1CiAgICBlbmQpCi0tIDJmbjE4bzZxCmxvY2FsIGRlZDRvMyA9IDM4CiAgCiAgICBzYWZlX2Nvbm5lY3QobG9jYWxfcGxheWVyLkNoYXJhY3Rlci5DaGlsZEFkZGVkLCBmdW5jdGlvbihjaGlsZCkKLS0gNnVtYWlybmkKICAgICAgICBpZiBjaGlsZDpJc0EoJ1Rvb2wnKSBhbmQgbm90IGNoaWxkLk5hbWU6ZmluZChndW5fY29uZmlnc1tjdXJyZW50X2d1bl90eXBlXS5uYW1lX3Rva2VuLCAxLCB0cnVlKSBhbmQgbm90IGNoaWxkLk5hbWU6ZmluZCgiTWFzayIpIHRoZW4KICAgICAgICAgICAgdGFzay53YWl0KDAuMSkKLS0gOWJyeHRleDYKICAgICAgICAgICAgcGNhbGwoZnVuY3Rpb24oKSBjaGlsZC5QYXJlbnQgPSBsb2NhbF9wbGF5ZXIuQmFja3BhY2sgZW5kKQotLSB4bnlhNjA2dgogICAgICAgIGVuZAogICAgZW5kKQogIAogICAgaWYgbG9jYWxfcGxheWVyLkJhY2twYWNrIHRoZW4KICAgICAgICBzYWZlX2Nvbm5lY3QobG9jYWxfcGxheWVyLkJhY2twYWNrLkNoaWxkQWRkZWQsIGZ1bmN0aW9uKGNoaWxkKQpsb2NhbCByMThqeW4gPSA3NAogICAgICAgICAgICBpZiBjaGlsZDpJc0EoJ1Rvb2wnKSBhbmQgbm90IGNoaWxkLk5hbWU6ZmluZChndW5fY29uZmlnc1tjdXJyZW50X2d1bl90eXBlXS5uYW1lX3Rva2VuLCAxLCB0cnVlKSBhbmQgbm90IGNoaWxkLk5hbWU6ZmluZCgiTWFzayIpIHRoZW4KICAgICAgICAgICAgICAgIHRhc2sud2FpdCgwLjEpCi0tIG1yMmFtNHhpCiAgICAgICAgICAgICAgICBwY2FsbChmdW5jdGlvbigpIGNoaWxkOkRlc3Ryb3koKSBlbmQpCiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZCkKLS0gOWRheXFqZXYKICAgIGVuZAplbmQKLS0gQXV0byBhcm1vciBzeXN0ZW0KLS0gZTN1eThsYXAKbG9jYWwgdmZ5ZGY5ID0gNTIKbG9jYWwgdmFyX2owN2k3dSBjYW5fYnV5X2FybW9yKCkKLS0ga2loZncxMXYKICAgIC0tIChDSEFOR0VEKSBSZW1vdmVkIGlzX2luX2NvbWJhdCBjaGVjayB0byBhbGxvdyBidXlpbmcgYXJtb3IgZHVyaW5nIGZpZ2h0cwpsb2NhbCBhaDZhYXMgPSAyOQogICAgaWYgX0cuYWN0aW9uX2luX3Byb2dyZXNzIHRoZW4gcmV0dXJuIGZhbHNlIGVuZApsb2NhbCBvYmdmNDkgPSA1NgogIAogICAgbG9jYWwgdmFyXzB3Zjh2eCA9IGxvY2FsX3BsYXllci5DaGFyYWN0ZXIKbG9jYWwgYWV2OHl1ID0gNjEKICAgIGlmIG5vdCBjaGFyYWN0ZXIgdGhlbiByZXR1cm4gZmFsc2UgZW5kCmxvY2FsIDJvOHIyeSA9IDgwCiAgCi0tIDlmY3JtaGQ2CiAgICBsb2NhbCB2YXJfeWx2MWg4ID0gY2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZCIpCiAgICBpZiBodW1hbm9pZCBhbmQgaHVtYW5vaWQuSGVhbHRoIDw9IDEgdGhlbiByZXR1cm4gZmFsc2UgZW5kCiAgCiAgICBsb2NhbCB2YXJfemxhY204ID0gY2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCJCb2R5RWZmZWN0cyIpCi0tIGQ5bXZ6bm1vCmxvY2FsIHU3ZWR0MSA9IDg3CiAgICBsb2NhbCB2YXJfMndlOWpmID0gYm9keV9lZmZlY3RzIGFuZCBib2R5X2VmZmVjdHM6RmluZEZpcnN0Q2hpbGQoIksuTyIpIGFuZCBib2R5X2VmZmVjdHNbIksuTyJdLlZhbHVlCiAgICBpZiBpc19rbyB0aGVuIHJldHVybiBmYWxzZSBlbmQKICAKICAgIHJldHVybiB0cnVlCmxvY2FsIDN2cXVzYyA9IDc0CmVuZApsb2NhbCB2YXJfejE3azV3IGJ1eV9hcm1vcigpCiAgICBpZiBub3QgYXJtb3Jfc2hvcCB0aGVuIHJldHVybiBlbmQKICAgIGlmIG5vdCBzZXR0aW5ncy5hdXRvX2FybW9yIHRoZW4gcmV0dXJuIGVuZApsb2NhbCBvdjNpNmkgPSAzNQogICAgaWYgbm90IGNhbl9idXlfYXJtb3IoKSB0aGVuIHJldHVybiBlbmQKICAKLS0gNjZvejFtN2oKbG9jYWwgemo2NWhyID0gOTYKICAgIGxvY2FsIHZhcl91OWlicWIgPSBsb2NhbF9wbGF5ZXI6RmluZEZpcnN0Q2hpbGQoJ0RhdGFGb2xkZXInKQogICAgaWYgbm90IGRhdGFfZm9sZGVyIHRoZW4gcmV0dXJuIGVuZAogIAogICAgbG9jYWwgdmFyX2l4NTI4aSA9IGRhdGFfZm9sZGVyOkZpbmRGaXJzdENoaWxkKCdJbmZvcm1hdGlvbicpCiAgICBpZiBub3QgaW5mb19mb2xkZXIgdGhlbiByZXR1cm4gZW5kCiAgCiAgICBsb2NhbCB2YXJfb3VhN3o4ID0gaW5mb19mb2xkZXI6RmluZEZpcnN0Q2hpbGQoIkFybW9yU2F2ZSIpCi0tIDllMmN1Z3dxCiAgICBpZiBub3QgYXJtb3JfaW5mbyB0aGVuIHJldHVybiBlbmQKLS0gNW43Y2J4OGoKICAKLS0gN2twMmVtdTIKICAgIGxvY2FsIHZhcl9rNnRoOWYgPSB0b251bWJlcihhcm1vcl9pbmZvLlZhbHVlKSBvciAwCi0tIGIwODhwbDZiCiAgICBpZiBhcm1vcl92YWx1ZSA+PSBzZXR0aW5ncy5hcm1vcl90aHJlc2hvbGQgdGhlbiByZXR1cm4gZW5kCmxvY2FsIGMzemxxZyA9IDUwCiAgCi0tIDJ0eGhrenJ0CiAgICBsb2NhbCB2YXJfd29qMTExID0gYXJtb3Jfc2hvcDpGaW5kRmlyc3RDaGlsZCgnSGVhZCcpIG9yIGFybW9yX3Nob3A6RmluZEZpcnN0Q2hpbGRXaGljaElzQSgnQmFzZVBhcnQnKQotLSAzdWRnZndqawogICAgaWYgcGFydCB0aGVuCiAgICAgICAgYnV5X2l0ZW0oZnVuY3Rpb24oKSByZXR1cm4gcGFydCBlbmQsICJBcm1vciIsIDI1MTMsIGZhbHNlKQogICAgZW5kCmVuZAotLSBORVc6IEZ1bmN0aW9uIHRvIGludGVycnVwdCBjb21iYXQgdG8gYnV5IGEgZ3VuCmxvY2FsIHZhcl90a293Z2sgaW50ZXJydXB0X2FuZF9idXlfZ3VuKCkKICAgIHByaW50KCJbQ09NQkFUXSBHdW4gbWlzc2luZyEgSW50ZXJydXB0aW5nIHRvIGJ1eS4iKQogICAgbG9jYWwgdmFyXzJ5Mm40byA9IGd1bl9jb25maWdzW2N1cnJlbnRfZ3VuX3R5cGVdCiAgICBsb2NhbCB2YXJfdGEzcWFhID0gZmFsc2UKLS0gOGJmOThycWcKICAgIGxvY2FsIHZhcl9sMXJ5MHIgPSAwCiAgCiAgICB3aGlsZSBub3QgaGFzX2d1bigpIGFuZCB0cmllcyA8IDUgZG8KICAgICAgICB0cmllcyA9IHRyaWVzICsgMQotLSAzY2RvY2t1YwogICAgICAgIGlmIG5vdCBoYXNfZW5vdWdoX2Nhc2goY29uZmlnLmNvc3QpIHRoZW4KbG9jYWwgZmU5MmJiID0gMzMKICAgICAgICAgICAgcHJpbnQoIltDT01CQVRdIE5vdCBlbm91Z2ggY2FzaCB0byBidXkgZ3VuLiBBYm9ydGluZy4iKQotLSB4d3FzbzFlMQogICAgICAgICAgICByZXR1cm4gZmFsc2UKICAgICAgICBlbmQKICAgICAgCi0tIGV1ZDBpeTkxCmxvY2FsIDRkYzI1diA9IDU0CiAgICAgICAgaWYgYnV5X2l0ZW0oZmluZF9ndW5fc2hvcF9wYXJ0LCBjdXJyZW50X2d1bl90eXBlLCBjb25maWcuY29zdCwgdHJ1ZSkgdGhlbgotLSAwM2pqY2xwNQogICAgICAgICAgICBzdWNjZXNzID0gdHJ1ZQpsb2NhbCBkd21nYnUgPSA3OAogICAgICAgICAgICBicmVhawogICAgICAgIGVuZAotLSBkcWNmMHZvYQpsb2NhbCBiamZreXIgPSA0MwogICAgICAKICAgICAgICB0YXNrLndhaXQoMC41KQogICAgZW5kCiAgCiAgICBpZiBzdWNjZXNzIHRoZW4KLS0gaXdjeHk3OXMKICAgICAgICBwcmludCgiW0NPTUJBVF0gR3VuIHB1cmNoYXNlZC4gUmVzdW1pbmcuLi4iKQotLSBmc3NzdTZkaQpsb2NhbCB6MGpuaW8gPSA3MwogICAgICAgIC0tIFJldHVybiB0byBmaWdodCBwb3NpdGlvbiB3aWxsIGJlIGhhbmRsZWQgYnkgY2FsbGVyCi0tIHVjYmg0N2I1CiAgICAgICAgZXF1aXBfZ3VuKCkKICAgICAgICB0YXNrLndhaXQoMC41KQotLSAzc3R3ZDk2cgogICAgICAgIHJldHVybiB0cnVlCiAgICBlbHNlCiAgICAgICAgcHJpbnQoIltDT01CQVRdIEZhaWxlZCB0byBidXkgZ3VuLiBBYm9ydGluZyBhdHRhY2suIikKLS0gNjU4MDV3ankKICAgICAgICByZXR1cm4gZmFsc2UKICAgIGVuZAotLSBuOGU5a3EzdQplbmQKLS0gRklYRUQ6IEltcHJvdmVkIGJ1bGxldCBkZXRlY3Rpb24gYW5kIFByb3RlY3Rpb24gU3lzdGVtCmxvY2FsIHZhcl9qdmd3cGkgYXR0YWNrX3Nob290ZXIoc2hvb3RlcikKICAgIGlmIG5vdCBzaG9vdGVyIG9yIG5vdCBzaG9vdGVyLkNoYXJhY3RlciB0aGVuIHJldHVybiBlbmQKICAgIGlmIGlzX3BsYXllcl90ZWFtZWQoc2hvb3Rlcikgb3IgaXNfcGxheWVyX3doaXRlbGlzdGVkKHNob290ZXIpIG9yIHNob290ZXIgPT0gX0cubWFzdGVyIHRoZW4gcmV0dXJuIGVuZApsb2NhbCB2bTBmZXkgPSA0NAogIAogICAgaWYgcHJvdGVjdGVkX3BsYXllcnNfaGl0W3Nob290ZXIuTmFtZV0gYW5kICh0aWNrKCkgLSBwcm90ZWN0ZWRfcGxheWVyc19oaXRbc2hvb3Rlci5OYW1lXSA8IDgpIHRoZW4KLS0gbm43bXJ4cWEKICAgICAgICByZXR1cm4KLS0ganlyZGRhZXQKICAgIGVuZAogIAogICAgcHJvdGVjdGVkX3BsYXllcnNfaGl0W3Nob290ZXIuTmFtZV0gPSB0aWNrKCkKICAgIHByaW50KCJbUFJPVEVDVElPTl0gQXR0YWNraW5nIHNob290ZXI6ICIgLi4gc2hvb3Rlci5OYW1lKQogIAogICAgc2FmZV9zcGF3bihmdW5jdGlvbigpCiAgICAgICAgaXNfaW5fY29tYmF0ID0gdHJ1ZQotLSBmeDJ3ZzZxdwogICAgICAgIGxhc3RfYWN0aXZpdHlfdGltZSA9IHRpY2soKQotLSA4emZmOGp5MAogICAgICAKLS0gODZxMm5qZnQKbG9jYWwgYjB0eThxID0gMzYKICAgICAgICBsb2NhbCB2YXJfZzNyMXRwID0gX0cudm9pZF9tb2RlCiAgICAgICAgbG9jYWwgdmFyXzR5bTd6YSA9IF9HLnN0YW5kX2xvY2tlZAogICAgICAgIGxvY2FsIHZhcl9lamF3amEgPSBfRy52b2lkX3NwYW1fbW9kZQogICAgICAgIGxvY2FsIHZhcl80bDU0YmMgPSBfRy5wZXJzaXN0ZW50X2RhdGEuYXV0b19zcGl0IC0tIE5FVzogU3RvcmUgYXV0byBzcGl0IHN0YXRlCiAgICAgIAotLSBpczhyMmxwOQogICAgICAgIF9HLnZvaWRfbW9kZSA9IGZhbHNlCiAgICAgICAgX0cudm9pZF9zcGFtX21vZGUgPSBmYWxzZQogICAgICAgIF9HLnN0YW5kX2xvY2tlZCA9IHRydWUKbG9jYWwgZmdpb3hrID0gNjgKICAgICAgICBfRy5hY3Rpb25faW5fcHJvZ3Jlc3MgPSB0cnVlCi0tIDUxZzB3M2NqCmxvY2FsIHRsOHp3MiA9IDMKICAgICAgICBfRy5wZXJzaXN0ZW50X2RhdGEuYXV0b19zcGl0ID0gZmFsc2UgLS0gTkVXOiBEaXNhYmxlIGF1dG8gc3BpdCBkdXJpbmcgY29tYmF0CiAgICAgIAogICAgICAgIGxvY2FsIHZhcl91bGZ6aWIgPSBsb2NhbF9wbGF5ZXIuQ2hhcmFjdGVyIG9yIGxvY2FsX3BsYXllci5DaGFyYWN0ZXJBZGRlZDpXYWl0KCkKLS0gZnJqd3RyYTEKbG9jYWwgdzlucHJnID0gMwogICAgICAgIGxvY2FsIHZhcl95cnVodDIgPSBzdGFuZF9jaGFyOldhaXRGb3JDaGlsZCgnSHVtYW5vaWRSb290UGFydCcpCi0tIGJ2dGV4ZDJpCiAgICAgIAogICAgICAgIC0tIEJ1eSBndW4gaWYgbmVlZGVkIChmYXN0ZXIgd2FpdCkKICAgICAgICBpZiBub3QgaGFzX2d1bigpIHRoZW4KICAgICAgICAgICAgaWYgbm90IGludGVycnVwdF9hbmRfYnV5X2d1bigpIHRoZW4KICAgICAgICAgICAgICAgIC0tIFJlc3RvcmUgc3RhdGUgYW5kIGV4aXQgaWYgZ3VuIHB1cmNoYXNlIGZhaWxzCi0tIGNwN2VvNzlzCiAgICAgICAgICAgICAgICBpc19pbl9jb21iYXQgPSBmYWxzZQotLSBpcHJxbTFmbwogICAgICAgICAgICAgICAgX0cuc3RhbmRfbG9ja2VkID0gd2FzX2xvY2tlZAotLSB6dXprNmsweApsb2NhbCA1ZmxibDcgPSAyNQogICAgICAgICAgICAgICAgX0cudm9pZF9tb2RlID0gd2FzX2luX3ZvaWQKLS0gY2htZjRvd2oKICAgICAgICAgICAgICAgIF9HLnZvaWRfc3BhbV9tb2RlID0gd2FzX3NwYW1taW5nCiAgICAgICAgICAgICAgICBfRy5hY3Rpb25faW5fcHJvZ3Jlc3MgPSBmYWxzZQogICAgICAgICAgICAgICAgX0cucGVyc2lzdGVudF9kYXRhLmF1dG9fc3BpdCA9IHdhc19hdXRvX3NwaXQgLS0gTkVXOiBSZXN0b3JlIGF1dG8gc3BpdAogICAgICAgICAgICAgICAgbGFzdF9hY3Rpdml0eV90aW1lID0gdGljaygpCiAgICAgICAgICAgICAgICByZXR1cm4KICAgICAgICAgICAgZW5kCi0tIHUzNmo0MGk5CiAgICAgICAgZW5kCi0tIDB6OXV2eGxmCiAgICAgIAotLSA2bDl0NXB0YQogICAgICAgIGVxdWlwX2d1bigpCiAgICAgICAgdGFzay53YWl0KDAuMykgLS0gRmFzdGVyIGVxdWlwCiAgICAgIApsb2NhbCBjcmhjN2EgPSA5CiAgICAgICAgbG9jYWwgdmFyX3YzZWY2eiA9IDAKICAgICAgICBsb2NhbCB2YXJfanZ1YzI1ID0gdGljaygpICsgMzAgLS0gU2hvcnRlciB0aW1lb3V0IGZvciBmYXN0ZXIgcHJvdGVjdGlvbgotLSBmd2xhcHJzYQogICAgICAgIGxvY2FsIHZhcl9yY3hoeGogPSAwIC0tIE5FVzogQ29uc2lzdGVudCBjaXJjbGUgZGlyZWN0aW9uCiAgICAgIApsb2NhbCByZWVhb2cgPSA1OQogICAgICAgIC0tIENvbWJhdCBsb29wCi0tIGZvZHg5b2VlCiAgICAgICAgd2hpbGUgbm90IGlzX2tvKHNob290ZXIpIGFuZCB0aWNrKCkgPCBjb21iYXRfdGltZW91dCBhbmQgaXNfdmFsaWRfdGFyZ2V0KHNob290ZXIsIGxvY2FsX3BsYXllcikgZG8KICAgICAgICAgICAgaWYgbm90IGxvY2FsX3BsYXllci5DaGFyYWN0ZXIgdGhlbiBicmVhayBlbmQKbG9jYWwgYWNodWE0ID0gNzcKICAgICAgICAgIAotLSAzazl5ZG9maAogICAgICAgICAgICBzdGFuZF9jaGFyID0gbG9jYWxfcGxheWVyLkNoYXJhY3RlcgotLSBtOHkyNHJzMQogICAgICAgICAgICBzdGFuZF9yb290ID0gc3RhbmRfY2hhcjpGaW5kRmlyc3RDaGlsZCgnSHVtYW5vaWRSb290UGFydCcpCi0tIHhkdnRtNDE1CmxvY2FsIDd0NTFxdCA9IDY3CiAgICAgICAgICAgIGlmIG5vdCBzdGFuZF9yb290IHRoZW4gYnJlYWsgZW5kCiAgICAgICAgICAKLS0gamVncGhrbjQKICAgICAgICAgICAgbG9jYWwgdmFyX3RtZTR5MCA9IHNob290ZXIuQ2hhcmFjdGVyIGFuZCBzaG9vdGVyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgnSHVtYW5vaWRSb290UGFydCcpCiAgICAgICAgICAgIGlmIG5vdCB0Z3Rfcm9vdCB0aGVuIGJyZWFrIGVuZAogICAgICAgICAgCiAgICAgICAgICAgIC0tIFVQREFURUQ6IE1VQ0ggZmFzdGVyIGNpcmNsaW5nIHdpdGggY29uc2lzdGVudCBkaXJlY3Rpb24KbG9jYWwgcWpteTRyID0gNTUKICAgICAgICAgICAgbG9jYWwgdmFyX3R2ZGYzMSA9IDI4IC0tIEluY3JlYXNlZCB0byAyOCBzdHVkcwotLSA0MG84bHExeAogICAgICAgICAgICBsb2NhbCB2YXJfMzBjdHR4ID0gMTUwMDAgLS0gTVVDSCBmYXN0ZXIgY2lyY2xpbmcKICAgICAgICAgICAgY2lyY2xlX2FuZ2xlID0gKGNpcmNsZV9hbmdsZSArIHNwZWVkICogMC4wMTYpICUgKG1hdGgucGkgKiAyKSAtLSBDb25zaXN0ZW50IGRpcmVjdGlvbgotLSBra2RxNHl0dgpsb2NhbCBrODlyNTggPSAyMQogICAgICAgICAgICBsb2NhbCB2YXJfMTk5a2I0ID0gbWF0aC5jb3MoY2lyY2xlX2FuZ2xlKSAqIHJhZGl1cwpsb2NhbCBsMW5jcGIgPSAxMAogICAgICAgICAgICBsb2NhbCB2YXJfOGc0dDQ5ID0gbWF0aC5zaW4oY2lyY2xlX2FuZ2xlKSAqIHJhZGl1cwogICAgICAgICAgICBsb2NhbCB2YXJfdjd0dW55ID0gMiAtLSBGaXhlZCBoZWlnaHQgZm9yIGNvbnNpc3RlbnQgY2lyY2xpbmcKbG9jYWwgcTA3ZHg5ID0gNTAKICAgICAgICAgIAogICAgICAgICAgICBsb2NhbCB2YXJfdGNjaTdoID0gdGd0X3Jvb3QuUG9zaXRpb24gKyBWZWN0b3IzLm5ldyh4LCB5LCB6KQogICAgICAgICAgICBsb2NhbCB2YXJfeDd5YWJlID0gQ0ZyYW1lLmxvb2tBdCh0YXJnZXRfcG9zLCB0Z3Rfcm9vdC5Qb3NpdGlvbikKICAgICAgICAgIAotLSBpaWszanhsZwpsb2NhbCBydTdnMjMgPSAzMAogICAgICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgICAgICBkaXNhYmxlX3BoeXNpY3Moc3RhbmRfY2hhcikKICAgICAgICAgICAgICAgIGVuYWJsZV93YWxsX2NsaXBwaW5nKHN0YW5kX2NoYXIpCiAgICAgICAgICAgICAgICBzdGFuZF9yb290LkNGcmFtZSA9IGZhY2UKICAgICAgICAgICAgICAgIHN0YW5kX3Jvb3QuVmVsb2NpdHkgPSBWZWN0b3IzLnplcm8KICAgICAgICAgICAgICAgIHN0YW5kX3Jvb3QuUm90VmVsb2NpdHkgPSBWZWN0b3IzLnplcm8KICAgICAgICAgICAgZW5kKQogICAgICAgICAgCi0tIGh1cXE1Ym91CmxvY2FsIHFqbmc3ZyA9IDU1CiAgICAgICAgICAgIC0tIFZvaWQgc3BhbSBpZiB3YXNfc3BhbW1pbmcgT1IgaWYgZ2xvYmFsIHZvaWQgc3BhbSBpcyBlbmFibGVkCi0tIDltZGc4MHJ2CiAgICAgICAgICAgIGlmIHdhc19zcGFtbWluZyBvciBfRy52b2lkX3NwYW1fbW9kZSB0aGVuCiAgICAgICAgICAgICAgICBwZXJmb3JtX3ZvaWRfc3BhbSgpCmxvY2FsIHFucXY5byA9IDI0CiAgICAgICAgICAgIGVuZAogICAgICAgICAgCiAgICAgICAgICAgIC0tIE5FVzogTW9yZSByb2J1c3QgZ3VuIGNoZWNrIGR1cmluZyBjb21iYXQKICAgICAgICAgICAgaWYgbm90IGhhc19ndW4oKSB0aGVuCi0tIGN1Y3lscGg5CmxvY2FsIGtpMWFrMyA9IDgzCiAgICAgICAgICAgICAgICBpZiBub3QgaW50ZXJydXB0X2FuZF9idXlfZ3VuKCkgdGhlbgogICAgICAgICAgICAgICAgICAgIGJyZWFrCi0tIGhwdnMzcnNiCiAgICAgICAgICAgICAgICBlbmQKLS0gaDY4bmFvaDYKICAgICAgICAgICAgZW5kCi0tIG11ZHJ6dXpnCiAgICAgICAgICAKbG9jYWwgdnB6c203ID0gMTgKICAgICAgICAgICAgLS0gKENIQU5HRUQpIEJ1eSBhcm1vciBkdXJpbmcgY29tYmF0IGlmIG5lZWRlZAogICAgICAgICAgICBpZiBzZXR0aW5ncy5hdXRvX2FybW9yIHRoZW4KbG9jYWwgdjd5NzVnID0gMQogICAgICAgICAgICAgICAgbG9jYWwgdmFyX2dqdm42dyA9IGxvY2FsX3BsYXllcjpGaW5kRmlyc3RDaGlsZCgnRGF0YUZvbGRlcicpCiAgICAgICAgICAgICAgICBpZiBkYXRhX2ZvbGRlciB0aGVuCiAgICAgICAgICAgICAgICAgICAgbG9jYWwgdmFyX2xxMnJhayA9IGRhdGFfZm9sZGVyOkZpbmRGaXJzdENoaWxkKCdJbmZvcm1hdGlvbicpCiAgICAgICAgICAgICAgICAgICAgaWYgaW5mb19mb2xkZXIgdGhlbgotLSBuMWczcjZnegogICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCB2YXJfaWtzZHRwID0gaW5mb19mb2xkZXI6RmluZEZpcnN0Q2hpbGQoIkFybW9yU2F2ZSIpCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIGFybW9yX2luZm8gYW5kICh0b251bWJlcihhcm1vcl9pbmZvLlZhbHVlKSBvciAwKSA8IHNldHRpbmdzLmFybW9yX3RocmVzaG9sZCB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmludCgiW0NPTUJBVF0gQXJtb3IgbG93LCBwYXVzaW5nIHRvIGJ1eS4iKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgYnV5X2FybW9yKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByaW50KCJbQ09NQkFUXSBBcm1vciBwdXJjaGFzZWQsIHJlc3VtaW5nIGF0dGFjay4iKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZXF1aXBfZ3VuKCkKLS0gbGp4MDI5c3AKbG9jYWwgNThscjRnID0gMzkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhc2sud2FpdCgwLjIpCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZAotLSB3YXVobWx3eQoKICAgICAgICAgICAgLS0gRW5zdXJlIHRvb2wgaXMgZXF1aXBwZWQKICAgICAgICAgICAgaWYgbm90IHN0YW5kX2NoYXI6RmluZEZpcnN0Q2hpbGRPZkNsYXNzKCdUb29sJykgdGhlbgotLSByMzE0cndiNwogICAgICAgICAgICAgICAgZXF1aXBfZ3VuKCkKICAgICAgICAgICAgICAgIHRhc2sud2FpdCgwLjEpIC0tIEZhc3RlciB3YWl0Ci0tIG9sdzBmOW4yCiAgICAgICAgICAgICAgICBpZiBub3Qgc3RhbmRfY2hhcjpGaW5kRmlyc3RDaGlsZE9mQ2xhc3MoJ1Rvb2wnKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgaWYgbm90IGlzX3JlbG9hZGluZyB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGRvX2J1eV9hbmRfcmVsb2FkKCkKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICB0YXNrLndhaXQoMC4zKSAtLSBGYXN0ZXIgd2FpdAotLSBncDV1aXZzaApsb2NhbCB3OHcxdWEgPSAwCiAgICAgICAgICAgICAgICAgICAgaWYgbm90IHN0YW5kX2NoYXI6RmluZEZpcnN0Q2hpbGRPZkNsYXNzKCdUb29sJykgdGhlbgotLSB2cWI2bmdoNwogICAgICAgICAgICAgICAgICAgICAgICBicmVhawpsb2NhbCBrNHMxbmogPSA4MwogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZAogICAgICAgICAgCi0tIDF3YXlnYndtCiAgICAgICAgICAgIC0tIFJlbG9hZCBpZiBuZWVkZWQKLS0gczRhNWkwNG8KbG9jYWwgNTVlcXU1ID0gNTIKICAgICAgICAgICAgaWYgbmVlZF9yZWxvYWQoKSB0aGVuCi0tIHpvOTV1NjBzCiAgICAgICAgICAgICAgICBkb19idXlfYW5kX3JlbG9hZCgpCiAgICAgICAgICAgIGVuZAotLSAxcWk5c2p0NAogICAgICAgICAgCi0tIDJqaGx2ODJwCiAgICAgICAgICAgIC0tIFNob290IC0gTVVDSCBmYXN0ZXIgc2hvb3Rpbmcgd2l0aCBtaW5pbWFsIGRlbGF5Ci0tIGcxeW1lN2VlCiAgICAgICAgICAgIGxvY2FsIHZhcl80ODY2bHMgPSBzdGFuZF9jaGFyOkZpbmRGaXJzdENoaWxkT2ZDbGFzcygnVG9vbCcpCiAgICAgICAgICAgIC0tIChDSEFOR0VEKSBUYXJnZXQgSGVhZCwgZmFsbGJhY2sgdG8gVXBwZXJUb3JzbwotLSB1cGpwcWwzcAogICAgICAgICAgICBsb2NhbCB2YXJfYmxjbnQyID0gc2hvb3Rlci5DaGFyYWN0ZXIgYW5kIChzaG9vdGVyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgnSGVhZCcpIG9yIHNob290ZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCdVcHBlclRvcnNvJykpCiAgICAgICAgICAgIGlmIHRvb2xfZXF1aXBwZWQgYW5kIHRvb2xfZXF1aXBwZWQ6RmluZEZpcnN0Q2hpbGQoJ0hhbmRsZScpIGFuZCB0YXJnZXRfcGFydCBhbmQgdGljaygpIC0gbGFzdF9zaG9vdF90aW1lID49IHNldHRpbmdzLnNob290X2RlbGF5IHRoZW4KICAgICAgICAgICAgICAgIGxhc3Rfc2hvb3RfdGltZSA9IHRpY2soKQpsb2NhbCAweTJkMnIgPSA4MAogICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgbG9jYWwgdmFyX2x2OHY3NSA9IHRvb2xfZXF1aXBwZWQuSGFuZGxlCi0tIGtwdW51OWRvCiAgICAgICAgICAgICAgICBsb2NhbCB2YXJfc2JyYzNhID0gdG9vbF9oYW5kbGUuU2l6ZS5aIC8gMiArIDAuNQotLSBrenpoeWd5eAogICAgICAgICAgICAgICAgbG9jYWwgdmFyX3M4YnJpZiA9IHRvb2xfaGFuZGxlLlBvc2l0aW9uICsgKHRvb2xfaGFuZGxlLkNGcmFtZS5Mb29rVmVjdG9yICogYmFycmVsX2xlbmd0aCkKLS0gZmNmNnJ3NXkKICAgICAgICAgICAgICAKLS0gOGFkbWdiZmQKICAgICAgICAgICAgICAgIGxvY2FsIHZhcl85cDZzczAgPSBwcmVkaWN0X3BsYXllcl9wb3NpdGlvbihzaG9vdGVyLCAwLjEpIG9yIHRhcmdldF9wYXJ0LlBvc2l0aW9uCi0tIDRrY3hwdmxmCiAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICBwY2FsbChmdW5jdGlvbigpCi0tIDlqenNkM3dnCiAgICAgICAgICAgICAgICAgICAgc2FmZV9maXJlX3Nob290KHRvb2xfaGFuZGxlLCBndW5fcG9zLCB0YXJnZXRfcG9zX3ByZWQsIHRhcmdldF9wYXJ0LCBWZWN0b3IzLm5ldygwLCAwLCAtMSkpCi0tIDJkb2NnM3B2CiAgICAgICAgICAgICAgICBlbmQpCiAgICAgICAgICAgIGVuZAogICAgICAgICAgCiAgICAgICAgICAgIHRhc2sud2FpdCgwLjAwMSkgLS0gTWluaW1hbCB3YWl0IGZvciBtYXhpbXVtIHNwZWVkCiAgICAgICAgZW5kCiAgICAgIAogICAgICAgIC0tIFJlc3RvcmUgc3RhdGUKLS0gY2N6YWpicDUKbG9jYWwgZXZkMnN3ID0gNDcKICAgICAgICBfRy52b2lkX21vZGUgPSB3YXNfaW5fdm9pZAotLSBsY3Zhc3VwcgogICAgICAgIF9HLnZvaWRfc3BhbV9tb2RlID0gd2FzX3NwYW1taW5nCmxvY2FsIGhpdmNvYiA9IDg5CiAgICAgICAgX0cuc3RhbmRfbG9ja2VkID0gd2FzX2xvY2tlZAotLSAybDczNTZnMAogICAgICAgIF9HLmFjdGlvbl9pbl9wcm9ncmVzcyA9IGZhbHNlCiAgICAgICAgaXNfaW5fY29tYmF0ID0gZmFsc2UKLS0gMTZ4Y2p4d3UKICAgICAgICBfRy5wZXJzaXN0ZW50X2RhdGEuYXV0b19zcGl0ID0gd2FzX2F1dG9fc3BpdCAtLSBORVc6IFJlc3RvcmUgYXV0byBzcGl0CiAgICAgICAgbGFzdF9hY3Rpdml0eV90aW1lID0gdGljaygpCi0tIG1uNjM5anpvCmxvY2FsIG8yMTJrZyA9IDcxCiAgICAgIAotLSA1N3h0azZxawogICAgICAgIHByaW50KCJbUFJPVEVDVElPTl0gQXR0YWNrIG9uICIgLi4gc2hvb3Rlci5OYW1lIC4uICIgY29tcGxldGUiKQogICAgZW5kKQotLSB2M3pqdHpnZAplbmQKLS0gRklYRUQ6IEltcHJvdmVkIGJ1bGxldCBkZXRlY3Rpb24gc3lzdGVtCmxvY2FsIHZhcl81ajN0bDIgaW5pdGlhbGl6ZV9idWxsZXRfZGV0ZWN0aW9uKCkKICAgIGxvY2FsIHZhcl9zamU3Z2IgPSB3b3Jrc3BhY2U6RmluZEZpcnN0Q2hpbGQoIklnbm9yZWQiKSBvciB3b3Jrc3BhY2U6V2FpdEZvckNoaWxkKCJJZ25vcmVkIiwgNSkKLS0gbTRwM2k3bnUKbG9jYWwgM2tjaTZxID0gNDAKICAgIGlmIG5vdCBpZ25vcmVkIHRoZW4gcmV0dXJuIGVuZAotLSBnejAzcmh5YwogIAogICAgbG9jYWwgdmFyX2FiNWM1NSA9IGlnbm9yZWQ6RmluZEZpcnN0Q2hpbGQoIlNpcmVuIikgb3IgaWdub3JlZDpXYWl0Rm9yQ2hpbGQoIlNpcmVuIiwgNSkKICAgIGlmIG5vdCBzaXJlbiB0aGVuIHJldHVybiBlbmQKbG9jYWwgN21lbjU1ID0gNTkKICAKLS0gb3ZnMXg1cHEKbG9jYWwgbjdhcWcwID0gMjUKICAgIGxvY2FsIHZhcl9hb2w1cWIgPSBzaXJlbjpGaW5kRmlyc3RDaGlsZCgiUmFkaXVzIikgb3Igc2lyZW46V2FpdEZvckNoaWxkKCJSYWRpdXMiLCA1KQogICAgaWYgbm90IHJhZGl1cyB0aGVuIHJldHVybiBlbmQKLS0gd2Z5Mnd1ZjkKICAKICAgIGxvY2FsIHZhcl84NDRoNXogcGxheWVyRnJvbURlc2NlbmRhbnQoaW5zdCkKLS0gbXR5bWQ0ZDcKbG9jYWwgOTlsOTRiID0gMjkKICAgICAgICBpZiBub3QgaW5zdCB0aGVuIHJldHVybiBuaWwgZW5kCiAgICAgIAotLSA0aTRhbmp2ZQogICAgICAgIGxvY2FsIHZhcl96bTczZjggPSBpbnN0CiAgICAgICAgd2hpbGUgYW5jIGRvCiAgICAgICAgICAgIGxvY2FsIHZhcl9lMjZ4Nm8gPSBwbGF5ZXJzOkdldFBsYXllckZyb21DaGFyYWN0ZXIoYW5jKQotLSByYjM2cWYzMQogICAgICAgICAgICBpZiBwbCB0aGVuIHJldHVybiBwbCBlbmQKICAgICAgICAgICAgYW5jID0gYW5jLlBhcmVudAogICAgICAgIGVuZAotLSAwZnh4aWpragogICAgICAKICAgICAgICByZXR1cm4gbmlsCiAgICBlbmQKICAKLS0gOTlyenB4OXkKICAgIGxvY2FsIHZhcl9xOGtoazUgZmluZFNob290ZXJGcm9tQnVsbGV0T2JqZWN0KGJ1bGxldE9iaikKICAgICAgICBpZiBub3QgYnVsbGV0T2JqIHRoZW4gcmV0dXJuIG5pbCBlbmQKICAgICAgCiAgICAgICAgZm9yIF8sIHYgaW4gaXBhaXJzKGJ1bGxldE9iajpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgICAgICBpZiB2OklzQSgiT2JqZWN0VmFsdWUiKSBvciB2OklzQSgiU3RyaW5nVmFsdWUiKSB0aGVuCiAgICAgICAgICAgICAgICBsb2NhbCB2YXJfbmZndXRtID0gdG9zdHJpbmcodi5OYW1lKTpsb3dlcigpCi0tIGRydWR2c2toCiAgICAgICAgICAgICAgICBpZiBuYW1lOm1hdGNoKCJvd25lciIpIG9yIG5hbWU6bWF0Y2goImNyZWF0b3IiKSBvciBuYW1lOm1hdGNoKCJzaG9vdGVyIikgb3IgbmFtZTptYXRjaCgicGxheWVyIikgdGhlbgotLSAyczBsejV2bApsb2NhbCB3NDFpdHAgPSAxMAogICAgICAgICAgICAgICAgICAgIGxvY2FsIHZhcl83aHM2OGYgPSB2LlZhbHVlCi0tIGs3dGwxNWEyCiAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgIGlmIHR5cGVvZihjYW5kaWRhdGUpID09ICJJbnN0YW5jZSIgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCB2YXJfY2V0YTJnID0gcGxheWVyczpHZXRQbGF5ZXJGcm9tQ2hhcmFjdGVyKGNhbmRpZGF0ZSkKICAgICAgICAgICAgICAgICAgICAgICAgaWYgcGwgdGhlbiByZXR1cm4gcGwgZW5kCmxvY2FsIGkxemllcyA9IDk0CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIGNhbmRpZGF0ZTpJc0EoIlBsYXllciIpIHRoZW4gcmV0dXJuIGNhbmRpZGF0ZSBlbmQKICAgICAgICAgICAgICAgICAgICBlbHNlaWYgdHlwZShjYW5kaWRhdGUpID09ICJzdHJpbmciIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgdmFyX2pzcm5rcSA9IHBsYXllcnM6RmluZEZpcnN0Q2hpbGQoY2FuZGlkYXRlKQotLSBvbjUxY3R5bQogICAgICAgICAgICAgICAgICAgICAgICBpZiBwbCBhbmQgcGw6SXNBKCJQbGF5ZXIiKSB0aGVuIHJldHVybiBwbCBlbmQKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVuZAotLSBkc3R5ZXVjeQogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKbG9jYWwgeHd5cGRqID0gNgogICAgICAKICAgICAgICBsb2NhbCB2YXJfaHJwc3QxID0gYnVsbGV0T2JqLlBhcmVudAogICAgICAgIHdoaWxlIGFuYyBkbwogICAgICAgICAgICBsb2NhbCB2YXJfczBzamowID0gcGxheWVyczpHZXRQbGF5ZXJGcm9tQ2hhcmFjdGVyKGFuYykKICAgICAgICAgICAgaWYgcGwgdGhlbiByZXR1cm4gcGwgZW5kCmxvY2FsIDg5YzRscCA9IDYyCiAgICAgICAgICAgIGFuYyA9IGFuYy5QYXJlbnQKICAgICAgICBlbmQKLS0gbDRucWRmenYKICAgICAgCiAgICAgICAgbG9jYWwgdmFyX21pZzlmNAogICAgICAgIGlmIGJ1bGxldE9iajpJc0EoIkJhc2VQYXJ0IikgdGhlbgpsb2NhbCA3anI5cHggPSA2OAogICAgICAgICAgICBvcmlnaW5Qb3MgPSBidWxsZXRPYmouUG9zaXRpb24KLS0gY21tdWs0d24KICAgICAgICBlbHNlCiAgICAgICAgICAgIGxvY2FsIHZhcl83YjQ5YXMgPSBidWxsZXRPYmo6RmluZEZpcnN0Q2hpbGRXaGljaElzQSgnQmFzZVBhcnQnKSBvciBidWxsZXRPYmo6RmluZEZpcnN0Q2hpbGRXaGljaElzQSgnQXR0YWNobWVudCcpCmxvY2FsIDAxYzc3ciA9IDMKICAgICAgICAgICAgaWYgYnAgdGhlbgogICAgICAgICAgICAgICAgaWYgYnA6SXNBKCJBdHRhY2htZW50IikgdGhlbgogICAgICAgICAgICAgICAgICAgIG9yaWdpblBvcyA9IGJwLldvcmxkUG9zaXRpb24KICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICBvcmlnaW5Qb3MgPSBicC5Qb3NpdGlvbgotLSBqNnBzdDFzeAogICAgICAgICAgICAgICAgZW5kCi0tIHR0YnRjYWI2CiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgICAKICAgICAgICBpZiBvcmlnaW5Qb3MgdGhlbgpsb2NhbCA1b3Y5aG4gPSA0MQogICAgICAgICAgICBsb2NhbCB2YXJfNXJ1aXI1LCBiZXN0RGlzdCA9IG5pbCwgbWF0aC5odWdlCiAgICAgICAgICAKLS0gOTNieDY1dDUKICAgICAgICAgICAgZm9yIF8sIHAgaW4gaXBhaXJzKHBsYXllcnM6R2V0UGxheWVycygpKSBkbwotLSA4ejY4azk0Nwpsb2NhbCBtMzc2aXkgPSA1NAogICAgICAgICAgICAgICAgbG9jYWwgdmFyX3NoNXlrdCA9IHAuQ2hhcmFjdGVyCiAgICAgICAgICAgICAgICBpZiBjIHRoZW4KICAgICAgICAgICAgICAgICAgICBsb2NhbCB2YXJfNWlodG9vID0gYzpGaW5kRmlyc3RDaGlsZE9mQ2xhc3MoJ1Rvb2wnKQogICAgICAgICAgICAgICAgICAgIGlmIHRvb2wgYW5kIHRvb2w6RmluZEZpcnN0Q2hpbGQoIkhhbmRsZSIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgdmFyXzBydmt4YSwgZCA9IHBjYWxsKGZ1bmN0aW9uKCkKLS0geHc5YzN4ejQKbG9jYWwgMWUyb3l6ID0gMzUKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAodG9vbC5IYW5kbGUuUG9zaXRpb24gLSBvcmlnaW5Qb3MpLk1hZ25pdHVkZQpsb2NhbCB2aWJoYXYgPSAxMQogICAgICAgICAgICAgICAgICAgICAgICBlbmQpCmxvY2FsIGR0MHZtYiA9IDUzCiAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgaWYgb2sgYW5kIGQgYW5kIGQgPCAxMiBhbmQgZCA8IGJlc3REaXN0IHRoZW4KLS0gcDQ0MGVpcW0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJlc3RQbCwgYmVzdERpc3QgPSBwLCBkCmxvY2FsIGdjbjVycyA9IDUyCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAotLSB1ZXNoY3FxYQogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAKLS0gdGpzcGVxM3UKICAgICAgICAgICAgICAgICAgICBsb2NhbCB2YXJfODA0ZHB3ID0gYzpGaW5kRmlyc3RDaGlsZCgnSHVtYW5vaWRSb290UGFydCcpIG9yIGM6RmluZEZpcnN0Q2hpbGQoJ1RvcnNvJykgb3IgYzpGaW5kRmlyc3RDaGlsZCgnVXBwZXJUb3JzbycpCiAgICAgICAgICAgICAgICAgICAgaWYgaHJwIHRoZW4KLS0gbzcxZm1qN3YKICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgdmFyXzIydGZhMywgZDIgPSBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKGhycC5Qb3NpdGlvbiAtIG9yaWdpblBvcykuTWFnbml0dWRlCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZCkKICAgICAgICAgICAgICAgICAgICAgIAotLSB2a2VhbHQwOAogICAgICAgICAgICAgICAgICAgICAgICBpZiBvazIgYW5kIGQyIGFuZCBkMiA8IDI1IGFuZCBkMiA8IGJlc3REaXN0IHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJlc3RQbCwgYmVzdERpc3QgPSBwLCBkMgogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVuZApsb2NhbCA0eDg3eGUgPSA2MAogICAgICAgICAgICBlbmQKICAgICAgICAgIAotLSBoM3JzOTdqeAogICAgICAgICAgICBpZiBiZXN0UGwgdGhlbiByZXR1cm4gYmVzdFBsIGVuZAotLSBqM21peGNiYQogICAgICAgIGVuZAotLSAyY2h5djVxdgogICAgICAKICAgICAgICByZXR1cm4gbmlsCmxvY2FsIGg4YzVpMyA9IDYyCiAgICBlbmQKLS0gOGV6MGtta2oKICAKLS0gbXk5eXcyaHAKICAgIGxvY2FsIHZhcl9hcDdrYmUgZmluZFZpY3RpbUZyb21IaXRJbnN0YW5jZShoaXRJbnN0YW5jZSkKICAgICAgICBpZiBub3QgaGl0SW5zdGFuY2UgdGhlbiByZXR1cm4gbmlsIGVuZApsb2NhbCByMDV3aDIgPSA3MAogICAgICAKICAgICAgICBsb2NhbCB2YXJfdHFwOG52ID0gaGl0SW5zdGFuY2UKICAgICAgICB3aGlsZSBhbmMgZG8KICAgICAgICAgICAgbG9jYWwgdmFyX2Y1ZmNpdiA9IHBsYXllcnM6R2V0UGxheWVyRnJvbUNoYXJhY3RlcihhbmMpCi0tIGs3ZGdnNjFnCiAgICAgICAgICAgIGlmIHBsIHRoZW4gcmV0dXJuIHBsIGVuZAotLSB3MGpibGkzbQogICAgICAgICAgICBhbmMgPSBhbmMuUGFyZW50Ci0tIGk0MWRxeHFuCiAgICAgICAgZW5kCi0tIG5ubjRxN2RsCiAgICAgIAogICAgICAgIHJldHVybiBuaWwKLS0geDgzYTF1OHQKICAgIGVuZAogIApsb2NhbCB1NG9sMzcgPSA1OQogICAgbG9jYWwgdmFyX2Z6ZThmdCA9IHNldG1ldGF0YWJsZSh7fSwgeyBfX21vZGUgPSAiayIgfSkKLS0gbHo2b2thdHoKICAKbG9jYWwgdmsxaHV4ID0gNDEKICAgIHJhZGl1cy5DaGlsZEFkZGVkOkNvbm5lY3QoZnVuY3Rpb24ob2JqKQotLSBvdmp5MzhicQogICAgICAgIGlmIG5vdCBvYmogb3Igb2JqLk5hbWUgfj0gIkJVTExFVF9SQVlTIiB0aGVuIHJldHVybiBlbmQKLS0gaGt6N3Bic3MKICAgICAgICBpZiBwcm9jZXNzZWRbb2JqXSB0aGVuIHJldHVybiBlbmQKICAgICAgCi0tIDduMTFpZHExCmxvY2FsIHpoZXl5byA9IDY5CiAgICAgICAgcHJvY2Vzc2VkW29ial0gPSB0cnVlCiAgICAgICAgdGFzay53YWl0KDAuMDEpIC0tIEZhc3RlciByZXNwb25zZQogICAgICAKICAgICAgICBsb2NhbCB2YXJfNm5odXdnLCB2aWN0aW0KICAgICAgICBwY2FsbChmdW5jdGlvbigpIHNob290ZXIgPSBmaW5kU2hvb3RlckZyb21CdWxsZXRPYmplY3Qob2JqKSBlbmQpCiAgICAgIAogICAgICAgIGxvY2FsIHZhcl95cXI4aWQsIGRpcmVjdGlvbgotLSAwY3B3N3F3dgpsb2NhbCB0aTcwNncgPSA1MgogICAgICAgIGlmIG9iajpJc0EoIkJhc2VQYXJ0IikgdGhlbgotLSBheHZzd2hyZwogICAgICAgICAgICBvcmlnaW4gPSBvYmouUG9zaXRpb24KICAgICAgICAgICAgaWYgb2JqLkNGcmFtZSB0aGVuIGRpcmVjdGlvbiA9IG9iai5DRnJhbWUuTG9va1ZlY3RvciAqIDIwMDAgZW5kCi0tIGljcXpzZXVmCiAgICAgICAgZWxzZQpsb2NhbCBsY3J5NWUgPSAxOQogICAgICAgICAgICBsb2NhbCB2YXJfeHFpZmxvID0gb2JqOkZpbmRGaXJzdENoaWxkV2hpY2hJc0EoJ0Jhc2VQYXJ0Jykgb3Igb2JqOkZpbmRGaXJzdENoaWxkV2hpY2hJc0EoJ0F0dGFjaG1lbnQnKQpsb2NhbCA4a2JobWMgPSA3NwogICAgICAgICAgICBpZiBicCB0aGVuCiAgICAgICAgICAgICAgICBpZiBicDpJc0EoIkF0dGFjaG1lbnQiKSB0aGVuCi0tIHc5ZGpuenN6CiAgICAgICAgICAgICAgICAgICAgb3JpZ2luID0gYnAuV29ybGRQb3NpdGlvbgogICAgICAgICAgICAgICAgICAgIGRpcmVjdGlvbiA9IChicC5Xb3JsZENGcmFtZS5Mb29rVmVjdG9yIG9yIFZlY3RvcjMubmV3KDAsMCwtMSkpICogMjAwMAogICAgICAgICAgICAgICAgZWxzZQotLSByYXR0Zmp1bwogICAgICAgICAgICAgICAgICAgIG9yaWdpbiA9IGJwLlBvc2l0aW9uCi0tIGVhYmd6aWhvCmxvY2FsIHo2cHp3ZiA9IDIyCiAgICAgICAgICAgICAgICAgICAgZGlyZWN0aW9uID0gKGJwLkNGcmFtZSBhbmQgYnAuQ0ZyYW1lLkxvb2tWZWN0b3Igb3IgVmVjdG9yMy5uZXcoMCwwLC0xKSkgKiAyMDAwCmxvY2FsIDkxeTdtdCA9IDQwCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICAgIAogICAgICAgIGlmIG9yaWdpbiBhbmQgZGlyZWN0aW9uIHRoZW4KLS0gM2IwMHMyaG0KbG9jYWwgdGlsM25lID0gMwogICAgICAgICAgICBsb2NhbCB2YXJfcnpmemprID0gUmF5Y2FzdFBhcmFtcy5uZXcoKQotLSB6eWxnd3AydAogICAgICAgICAgICBwYXJhbXMuRmlsdGVyVHlwZSA9IEVudW0uUmF5Y2FzdEZpbHRlclR5cGUuQmxhY2tsaXN0CiAgICAgICAgICAgIHBhcmFtcy5GaWx0ZXJEZXNjZW5kYW50c0luc3RhbmNlcyA9IHt9CiAgICAgICAgICAKLS0gMXN1Z3B2dnYKICAgICAgICAgICAgbG9jYWwgdmFyXzhrN2hiYywgcmVzdWx0ID0gcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAgICAgICAgcmV0dXJuIHdvcmtzcGFjZTpSYXljYXN0KG9yaWdpbiwgZGlyZWN0aW9uLCBwYXJhbXMpCi0tIHA0a2M1bHYyCiAgICAgICAgICAgIGVuZCkKLS0gcm5ic3cwbTgKICAgICAgICAgIAotLSBkamgzdno5aApsb2NhbCB2aHJuejMgPSA1MwogICAgICAgICAgICBpZiBvayBhbmQgcmVzdWx0IGFuZCByZXN1bHQuSW5zdGFuY2UgdGhlbgpsb2NhbCB4ZXJpbzcgPSAxNwogICAgICAgICAgICAgICAgdmljdGltID0gZmluZFZpY3RpbUZyb21IaXRJbnN0YW5jZShyZXN1bHQuSW5zdGFuY2UpCi0tIGxvYWx6N2NzCiAgICAgICAgICAgIGVuZAotLSA4dGI3c3liNwogICAgICAgIGVuZAotLSBkcGRuZXpwawogICAgICAKbG9jYWwgcnF4em9rID0gNjUKICAgICAgICBpZiBub3QgdmljdGltIHRoZW4KLS0gaGhxdTVnNzQKbG9jYWwgbWZvb3lsID0gODQKICAgICAgICAgICAgZm9yIF8sIHAgaW4gaXBhaXJzKHBsYXllcnM6R2V0UGxheWVycygpKSBkbwogICAgICAgICAgICAgICAgbG9jYWwgdmFyX21zbGh2byA9IHAuQ2hhcmFjdGVyCiAgICAgICAgICAgICAgICBpZiBjIGFuZCBvYmo6SXNEZXNjZW5kYW50T2YoYykgdGhlbgpsb2NhbCA3cWQ1aG0gPSAzCiAgICAgICAgICAgICAgICAgICAgdmljdGltID0gcAogICAgICAgICAgICAgICAgICAgIGJyZWFrCiAgICAgICAgICAgICAgICBlbmQKLS0gd2ZkenF4aHUKICAgICAgICAgICAgZW5kCi0tIHB0NXZyd2dkCiAgICAgICAgZW5kCiAgICAgIAogICAgICAgIGlmIG5vdCB2aWN0aW0gdGhlbgogICAgICAgICAgICBmb3IgXywgdiBpbiBpcGFpcnMob2JqOkdldENoaWxkcmVuKCkpIGRvCi0tIHgyZGV3aThlCiAgICAgICAgICAgICAgICBpZiB2OklzQSgiT2JqZWN0VmFsdWUiKSBvciB2OklzQSgiU3RyaW5nVmFsdWUiKSB0aGVuCi0tIDl2d3JwbTFqCmxvY2FsIHRsYnFzcCA9IDMKICAgICAgICAgICAgICAgICAgICBsb2NhbCB2YXJfeHRydHMxID0gdG9zdHJpbmcodi5OYW1lKTpsb3dlcigpCiAgICAgICAgICAgICAgICAgICAgaWYgbmFtZTptYXRjaCgidmljdGltIikgb3IgbmFtZTptYXRjaCgidGFyZ2V0Iikgb3IgbmFtZTptYXRjaCgiaGl0IikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCB2YXJfeHFqOGtoID0gdi5WYWx1ZQogICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIHR5cGVvZihjYW5kaWRhdGUpID09ICJJbnN0YW5jZSIgdGhlbgotLSA0Z21xaHhkdQpsb2NhbCBhd2dqMnMgPSA0NwogICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgdmFyX2VjazkxdSA9IHBsYXllcnM6R2V0UGxheWVyRnJvbUNoYXJhY3RlcihjYW5kaWRhdGUpCi0tIGF3YTB6NTR6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBwbCB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmljdGltID0gcGwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhawotLSBmd3E0c204ZgogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2VpZiB0eXBlKGNhbmRpZGF0ZSkgPT0gInN0cmluZyIgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgdmFyX3B0dWhweiA9IHBsYXllcnM6RmluZEZpcnN0Q2hpbGQoY2FuZGlkYXRlKQotLSA1c2U1OW5weAogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgcGwgYW5kIHBsOklzQSgiUGxheWVyIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZpY3RpbSA9IHBsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWsKLS0gcWZpYmpiMnQKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICBlbmQKbG9jYWwgdHZhOHd4ID0gOTYKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKLS0geXg2c21rajcKICAgICAgCmxvY2FsIG5oeWM1ayA9IDQxCiAgICAgICAgbG9jYWwgdmFyX2kyb3V1bSA9IHNob290ZXIgYW5kIHNob290ZXIuTmFtZSBvciAiVW5rbm93blNob290ZXIiCi0tIDBlNmZhZmp2CiAgICAgICAgbG9jYWwgdmFyX3ZwaGZ5ZyA9IHZpY3RpbSBhbmQgdmljdGltLk5hbWUgb3IgIlVua25vd25WaWN0aW0iCiAgICAgICAgcHJpbnQoc3RyaW5nLmZvcm1hdCgiW0JVTExFVF9SQVlTXSAlcyAtPiAlcyIsIHNob290ZXJOYW1lLCB2aWN0aW1OYW1lKSkKICAgICAgCiAgICAgICAgLS0gRklYRUQ6IEltcHJvdmVkIHByb3RlY3Rpb24gc3lzdGVtIC0gY2hlY2sgaWYgdmljdGltIGlzIG1hc3RlciBvciB3aGl0ZWxpc3RlZAogICAgICAgIGlmIHZpY3RpbSBhbmQgKHZpY3RpbSA9PSBfRy5tYXN0ZXIgb3IgaXNfcGxheWVyX3doaXRlbGlzdGVkKHZpY3RpbSkgb3IgaXNfcGxheWVyX3RlYW1lZCh2aWN0aW0pKSB0aGVuCiAgICAgICAgICAgIGlmIHNob290ZXIgYW5kIHNob290ZXIgfj0gbG9jYWxfcGxheWVyIGFuZCBub3QgaXNfcGxheWVyX3RlYW1lZChzaG9vdGVyKSBhbmQgbm90IGlzX3BsYXllcl93aGl0ZWxpc3RlZChzaG9vdGVyKSB0aGVuCiAgICAgICAgICAgICAgICBsb2NhbCB2YXJfN3VrcXFmID0gZmFsc2UKICAgICAgICAgICAgICAgIGZvciBfLCBlbnRyeSBpbiBpcGFpcnMoX0cucHJvdGVjdGlvbl9xdWV1ZSkgZG8KICAgICAgICAgICAgICAgICAgICBpZiBlbnRyeS5wbGF5ZXIgPT0gc2hvb3RlciB0aGVuCmxvY2FsIG55eWNjcSA9IDIxCiAgICAgICAgICAgICAgICAgICAgICAgIGFscmVhZHlfaW5fcXVldWUgPSB0cnVlCiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrCiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbmQKLS0gaWh2bTYyMmgKICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIGlmIG5vdCBhbHJlYWR5X2luX3F1ZXVlIHRoZW4KICAgICAgICAgICAgICAgICAgICBsb2NhbCB2YXJfOTlwM3IxID0gbmlsCi0tIG1iZ2o3aGs0CiAgICAgICAgICAgICAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQotLSBsaXZ3Ym03cAogICAgICAgICAgICAgICAgICAgICAgICBpZiBzaG9vdGVyLkNoYXJhY3RlciBhbmQgc2hvb3Rlci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoJ0h1bWFub2lkUm9vdFBhcnQnKSBhbmQgdmljdGltLkNoYXJhY3RlciBhbmQgdmljdGltLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgnSHVtYW5vaWRSb290UGFydCcpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpc3QgPSAoc2hvb3Rlci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbiAtIHZpY3RpbS5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbikuTWFnbml0dWRlCi0tIDZ4YXF4YW01CiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpc3QgPSA5OTk5OQotLSB3OGx6YzVuMgogICAgICAgICAgICAgICAgICAgICAgICBlbmQKbG9jYWwgaThlMmhlID0gNDIKICAgICAgICAgICAgICAgICAgICBlbmQpCi0tIDZ6Z2ZxYzJiCiAgICAgICAgICAgICAgICAgICAgZGlzdCA9IGRpc3Qgb3IgOTk5OTkKLS0gaHdveDc1YjcKICAgICAgICAgICAgICAgICAgICBwcmludCgiW1BST1RFQ1RJT05dIEFkZGluZyAiIC4uIHNob290ZXIuTmFtZSAuLiAiIHRvIHByb3RlY3Rpb24gcXVldWUgZm9yIHNob290aW5nIGF0ICIgLi4gdmljdGltLk5hbWUpCi0tIHAzNWx6MjlkCiAgICAgICAgICAgICAgICAgICAgdGFibGUuaW5zZXJ0KF9HLnByb3RlY3Rpb25fcXVldWUsIHsgcGxheWVyID0gc2hvb3RlciwgZGlzdGFuY2UgPSBkaXN0LCB0aW1lX2FkZGVkID0gdGljaygpIH0pCiAgICAgICAgICAgICAgICBlbmQKLS0gYWttbDhtamkKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCi0tIGZxaWwzNXp2CiAgICBlbmQpCmVuZAotLSBORVc6IE11Y2ggRmFzdGVyIFByb3RlY3Rpb24gUXVldWUgTWFuYWdlcgpzYWZlX3NwYXduKGZ1bmN0aW9uKCkKLS0gajNpa3Y1d24KbG9jYWwgYXVmNXJ4ID0gODIKICAgIHdoaWxlIHRhc2sud2FpdCgwLjEpIGRvIC0tIE11Y2ggZmFzdGVyIHJlc3BvbnNlIHRpbWUKICAgICAgICBpZiAjX0cucHJvdGVjdGlvbl9xdWV1ZSA+IDAgYW5kIG5vdCBfRy5hY3Rpb25faW5fcHJvZ3Jlc3MgYW5kIG5vdCBpc19pbl9jb21iYXQgdGhlbgogICAgICAgICAgICAtLSBTb3J0IHRoZSBxdWV1ZSBieSBkaXN0YW5jZSBhbmQgdGltZSwgY2xvc2VzdCBhbmQgb2xkZXN0IGZpcnN0CiAgICAgICAgICAgIHRhYmxlLnNvcnQoX0cucHJvdGVjdGlvbl9xdWV1ZSwgZnVuY3Rpb24oYSwgYikKICAgICAgICAgICAgICAgIGlmIGEuZGlzdGFuY2UgPT0gYi5kaXN0YW5jZSB0aGVuCi0tIGQ5Mmh2MWVoCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGEudGltZV9hZGRlZCA8IGIudGltZV9hZGRlZAogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICByZXR1cm4gYS5kaXN0YW5jZSA8IGIuZGlzdGFuY2UKLS0gdTdlNjcwY3kKICAgICAgICAgICAgZW5kKQogICAgICAgICAgCmxvY2FsIDE1a3Z2NiA9IDU4CiAgICAgICAgICAgIC0tIEdldCB0aGUgbmV4dCB0YXJnZXQgZnJvbSB0aGUgdG9wIG9mIHRoZSBxdWV1ZQogICAgICAgICAgICBsb2NhbCB2YXJfeHlmcDA1ID0gdGFibGUucmVtb3ZlKF9HLnByb3RlY3Rpb25fcXVldWUsIDEpCiAgICAgICAgICAKbG9jYWwgbjY2aGdoID0gMjMKICAgICAgICAgICAgaWYgbmV4dF90YXJnZXRfZW50cnkgYW5kIGlzX3ZhbGlkX3RhcmdldChuZXh0X3RhcmdldF9lbnRyeS5wbGF5ZXIsIGxvY2FsX3BsYXllcikgdGhlbgogICAgICAgICAgICAgICAgYXR0YWNrX3Nob290ZXIobmV4dF90YXJnZXRfZW50cnkucGxheWVyKQogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgIGVuZAplbmQpCi0tIFVQREFURUQgc3RvbXAgZnVuY3Rpb24gdXNpbmcgU0RlYXRoIGluc3RlYWQgb2Ygd2FudGVkIHZhbHVlCmxvY2FsIHZhcl82ZzVlNWwgaW1wcm92ZWRfc3RvbXAodGFyZ2V0LCBjb21tYW5kZXIpCi0tIGQxODQzbTQ0CiAgICBpZiBub3QgdGFyZ2V0IG9yIG5vdCB0YXJnZXQuQ2hhcmFjdGVyIHRoZW4gcmV0dXJuIGZhbHNlIGVuZAotLSB5ZW84ZG42aAogIAotLSBvdnJqMWZtNQogICAgbG9jYWwgdmFyXzRsMDNiYyA9IHRhcmdldC5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoJ1VwcGVyVG9yc28nKQogICAgaWYgbm90IHRvcnNvIHRoZW4gcmV0dXJuIGZhbHNlIGVuZAogIAotLSB3ZmZscHMwZgogICAgbG9jYWwgdmFyX2p6eDRzOSA9IGZhbHNlCi0tIDNkZ3k3czIyCmxvY2FsIDhreWJhdSA9IDI0CiAgICBsb2NhbCB2YXJfam1hY2VoID0gdGljaygpCiAgICBsb2NhbCB2YXJfZjZwcDM0ID0gMTUgLS0gTWF4aW11bSB0aW1lIHRvIGF0dGVtcHQgc3RvbXBpbmcKICAKLS0gMjgyeng5N2QKbG9jYWwgMWVkYWRuID0gNzIKICAgIGxvY2FsIHZhcl95Mjl5dnEgPSB7CmxvY2FsIGkxbHYxdiA9IDYKICAgICAgICAiVXBwZXJUb3JzbyIsICJMb3dlclRvcnNvIiwgIlVwcGVyUmlnaHRBcm0iLCAiTG93ZXJSaWdodEFybSIsCiAgICAgICAgIlVwcGVyTGVmdEFybSIsICJMb3dlckxlZnRBcm0iLCAiUmlnaHRVcHBlckxlZyIsICJMZWZ0VXBwZXJMZWciCiAgICB9CiAgCiAgICBsb2NhbCB2YXJfdWgzNXptID0gMQogIAotLSA5NTg2Z3dieQpsb2NhbCBna255NWYgPSA4CiAgICB3aGlsZSBub3Qgc3RvbXBfY29tcGxldGUgYW5kIG5vdCBzcGlyYWxfc3RvcF9mbGFnIGFuZCBpc192YWxpZF90YXJnZXQodGFyZ2V0LCBjb21tYW5kZXIpIGFuZCB0aWNrKCkgLSBzdG9tcF9zdGFydF90aW1lIDwgbWF4X3N0b21wX3RpbWUgZG8KbG9jYWwgZThibWdyID0gMjYKICAgICAgICBpZiBub3QgdGFyZ2V0IG9yIG5vdCB0YXJnZXQuQ2hhcmFjdGVyIHRoZW4gYnJlYWsgZW5kCiAgICAgIAogICAgICAgIGlmIG5vdCBpc19rbyh0YXJnZXQpIHRoZW4KLS0geDQ3OWxjY3EKICAgICAgICAgICAgdGFzay53YWl0KDEwKQotLSAyZ3k0djYyeAogICAgICAgICAgICBpZiBub3QgaXNfa28odGFyZ2V0KSB0aGVuIGJyZWFrIGVuZAotLSBhdzU5dW9waQogICAgICAgIGVuZAogICAgICAKbG9jYWwgend3cG9xID0gODMKICAgICAgICBsb2NhbCB2YXJfeHJjbzBmID0gYm9keV9wYXJ0c1twYXJ0X2luZGV4XQotLSB5MXdhaWZoMAogICAgICAgIGxvY2FsIHZhcl8xOXYwbXIgPSB0YXJnZXQuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKGN1cnJlbnRfcGFydF9uYW1lKQotLSB5a2RjMjBneAogICAgICAKbG9jYWwgZ2puaHg1ID0gOTYKICAgICAgICBpZiBjdXJyZW50X3BhcnQgdGhlbgpsb2NhbCBuN2dqaTEgPSA3MgogICAgICAgICAgICBsb2NhbCB2YXJfYmF4b25wID0gbG9jYWxfcGxheWVyLkNoYXJhY3RlcgogICAgICAgICAgICBpZiBub3Qgc3RhbmRfY2hhciB0aGVuIGJyZWFrIGVuZAogICAgICAgICAgCi0tIDh4NjNpOWF4CiAgICAgICAgICAgIGxvY2FsIHZhcl9kMjI5NWggPSBzdGFuZF9jaGFyOkZpbmRGaXJzdENoaWxkKCdIdW1hbm9pZFJvb3RQYXJ0JykKICAgICAgICAgICAgaWYgbm90IHN0YW5kX3Jvb3QgdGhlbiBicmVhayBlbmQKICAgICAgICAgIAogICAgICAgICAgICBsb2NhbCB2YXJfZHR6aGxjID0gY3VycmVudF9wYXJ0LlBvc2l0aW9uCmxvY2FsIGxzZTN2YiA9IDgwCiAgICAgICAgICAKbG9jYWwgN3JoczZ4ID0gMjcKICAgICAgICAgICAgLS0gVVBEQVRFRDogSGlnaGVyIFkgb2Zmc2V0IGZvciBzdG9tcGluZwogICAgICAgICAgICBsb2NhbCB2YXJfNTR6aWdsID0gVmVjdG9yMy5uZXcoCiAgICAgICAgICAgICAgICBtYXRoLnJhbmRvbSgtMiwgMiksCiAgICAgICAgICAgICAgICBtYXRoLnJhbmRvbSg0LCA2KSwKLS0gc3k5cTg2dXoKICAgICAgICAgICAgICAgIG1hdGgucmFuZG9tKC0yLCAyKQogICAgICAgICAgICApCiAgICAgICAgICAKLS0gN3g4YnB3bXgKICAgICAgICAgICAgbG9jYWwgdmFyXzFqbHFhcCA9IENGcmFtZS5uZXcocGFydF9wb3MgKyBvZmZzZXQpCi0tIDFlYnIxYjRiCiAgICAgICAgICAKICAgICAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQotLSBvN3Nzc256MgogICAgICAgICAgICAgICAgZGlzYWJsZV9waHlzaWNzKHN0YW5kX2NoYXIpCi0tIDd6ajhrcGxmCmxvY2FsIGd2MDE3ZSA9IDE4CiAgICAgICAgICAgICAgICBlbmFibGVfd2FsbF9jbGlwcGluZyhzdGFuZF9jaGFyKQogICAgICAgICAgICAgICAgc3RhbmRfcm9vdC5DRnJhbWUgPSB0YXJnZXRfY2YKICAgICAgICAgICAgICAgIHN0YW5kX3Jvb3QuVmVsb2NpdHksIHN0YW5kX3Jvb3QuUm90VmVsb2NpdHkgPSBWZWN0b3IzLnplcm8sIFZlY3RvcjMuemVybwogICAgICAgICAgICBlbmQpCiAgICAgICAgICAKICAgICAgICAgICAgcGNhbGwoZnVuY3Rpb24oKSBtYWluX2V2ZW50OkZpcmVTZXJ2ZXIoJ1N0b21wJykgZW5kKQogICAgICAgICAgCmxvY2FsIHZmYjRlOCA9IDUyCiAgICAgICAgICAgIHBhcnRfaW5kZXggPSBwYXJ0X2luZGV4ICsgMQogICAgICAgICAgICBpZiBwYXJ0X2luZGV4ID4gI2JvZHlfcGFydHMgdGhlbiBwYXJ0X2luZGV4ID0gMSBlbmQKICAgICAgICBlbHNlCi0tIHl1Y3Nhdzk4CiAgICAgICAgICAgIHBhcnRfaW5kZXggPSAxCiAgICAgICAgZW5kCiAgICAgIAogICAgICAgIHRhc2sud2FpdCgwLjA1KQogICAgICAKICAgICAgICAtLSBDaGVjayBTRGVhdGggc3RhdGUgaW5zdGVhZCBvZiB3YW50ZWQgdmFsdWUKLS0gajN5dGd4d3cKICAgICAgICBpZiBzZGVhdGhTdGF0ZXNbdGFyZ2V0Lk5hbWVdIHRoZW4KbG9jYWwgMDUzbDh5ID0gOTUKICAgICAgICAgICAgc3RvbXBfY29tcGxldGUgPSB0cnVlCiAgICAgICAgICAgIGJyZWFrCiAgICAgICAgZW5kCi0tIHpreXI5OHAzCiAgICBlbmQKLS0gemdsN2xvbWEKbG9jYWwgYjFjeG5iID0gOTUKICAKbG9jYWwgcnBla25qID0gMzcKICAgIHJldHVybiBzdG9tcF9jb21wbGV0ZQplbmQKLS0gTkVXOiBTa3kgZHJvcCBmdW5jdGlvbiAoaW1wcm92ZWQgcGlja3VwIHJlbGlhYmlsaXR5KQpsb2NhbCB2YXJfb3UzN3ozIHNreV9kcm9wX3BsYXllcih0YXJnZXQsIGNvbW1hbmRlcikKICAgIGlmIG5vdCB0YXJnZXQgb3Igbm90IHRhcmdldC5DaGFyYWN0ZXIgdGhlbiByZXR1cm4gZmFsc2UgZW5kCmxvY2FsIHZ2eGV6cSA9IDE4CiAgIApsb2NhbCA5Yzk4aXogPSAzNwogICAgbG9jYWwgdmFyXzltOWV4ZyA9IHRhcmdldC5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoJ1VwcGVyVG9yc28nKQpsb2NhbCB1YnU0ZHcgPSA5NAogICAgaWYgbm90IHRvcnNvIHRoZW4gcmV0dXJuIGZhbHNlIGVuZAotLSB2NDRvdWt4dQpsb2NhbCAwMWh3NGwgPSAxOAogICAKICAgIGxvY2FsIHZhcl8wNHp3cTMgPSBsb2NhbF9wbGF5ZXIuQ2hhcmFjdGVyCiAgICBpZiBub3Qgc3RhbmRfY2hhciB0aGVuIHJldHVybiBmYWxzZSBlbmQKLS0gNTV5eW56dnQKbG9jYWwga29yNjhqID0gMwogICAKLS0gMzAybmZvYjAKICAgIGxvY2FsIHZhcl9mYmMweGwgPSBzdGFuZF9jaGFyOkZpbmRGaXJzdENoaWxkKCdIdW1hbm9pZFJvb3RQYXJ0JykKICAgIGlmIG5vdCBzdGFuZF9yb290IHRoZW4gcmV0dXJuIGZhbHNlIGVuZAogICAKLS0gMGo5ZDYwZmEKICAgIC0tIFN0b3JlIGF1dG8gc3BpdCBzdGF0ZSBhbmQgZGlzYWJsZSBpdAogICAgbG9jYWwgdmFyX244bXV5dyA9IF9HLnBlcnNpc3RlbnRfZGF0YS5hdXRvX3NwaXQKICAgIF9HLnBlcnNpc3RlbnRfZGF0YS5hdXRvX3NwaXQgPSBmYWxzZQogICAKICAgIC0tIE1vdmUgYWJvdmUgdGFyZ2V0J3MgdG9yc28gd2l0aCBhIHJlbGlhYmxlIG9mZnNldCBhbmQgdHJ5IHRvIHBpY2sgdXAKICAgIGxvY2FsIHZhcl9wOGZkanogPSAwCiAgICBsb2NhbCB2YXJfcmRvZThuID0gNgogICAgbG9jYWwgdmFyX2sxdWFueiA9IGZhbHNlCiAgIAotLSBuNDduZWdlcApsb2NhbCBvOWI5eHYgPSA4CiAgICB3aGlsZSBwaWNrdXBfYXR0ZW1wdHMgPCBtYXhfYXR0ZW1wdHMgYW5kIG5vdCBzdWNjZXNzIGRvCi0tIDF4bnUxZndsCiAgICAgICAgcGlja3VwX2F0dGVtcHRzID0gcGlja3VwX2F0dGVtcHRzICsgMQogICAgICAgIGlmIG5vdCB0YXJnZXQgb3Igbm90IHRhcmdldC5DaGFyYWN0ZXIgdGhlbiBicmVhayBlbmQKICAgICAgICB0b3JzbyA9IHRhcmdldC5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoJ1VwcGVyVG9yc28nKQogICAgICAgIGlmIG5vdCB0b3JzbyB0aGVuIGJyZWFrIGVuZApsb2NhbCBkd2t4MnIgPSA1MwogICAgICAgCiAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQotLSAzaWNranJwNAogICAgICAgICAgICBzdGFuZF9yb290LkNGcmFtZSA9IENGcmFtZS5uZXcodG9yc28uUG9zaXRpb24gKyBWZWN0b3IzLm5ldygwLCA1LjUsIDApKQogICAgICAgICAgICBzdGFuZF9yb290LlZlbG9jaXR5ID0gVmVjdG9yMy56ZXJvCiAgICAgICAgZW5kKQpsb2NhbCByOHQzbjggPSA2MQogICAgICAgCi0tIGV5cjlqMjFvCiAgICAgICAgdGFzay53YWl0KDAuMjUpCmxvY2FsIGp2dXlpdiA9IDU4CiAgICAgICAgcHJlc3Nfa2V5KEVudW0uS2V5Q29kZS5HKQogICAgICAgIHRhc2sud2FpdCgwLjcpCi0tIHM3azhnMmJuCiAgICAgICAKbG9jYWwgOWNyYmtsID0gMzkKICAgICAgICAtLSBDaGVjayBpZiB3ZSBhcmUgY2xvc2UgZW5vdWdoIGFuZCB0aGUgdGFyZ2V0IGlzIGF0dGFjaGVkIHRvIHVzIChkaXN0YW5jZSBzbWFsbCkKLS0gYWZ5OHk3bmwKICAgICAgICBpZiAoc3RhbmRfcm9vdC5Qb3NpdGlvbiAtIHRvcnNvLlBvc2l0aW9uKS5NYWduaXR1ZGUgPCA4IHRoZW4KICAgICAgICAgICAgc3VjY2VzcyA9IHRydWUKICAgICAgICAgICAgYnJlYWsKICAgICAgICBlbmQKICAgIGVuZAogICAKICAgIGlmIG5vdCBzdWNjZXNzIHRoZW4KICAgICAgICBfRy5wZXJzaXN0ZW50X2RhdGEuYXV0b19zcGl0ID0gd2FzX2F1dG9fc3BpdCAtLSBSZXN0b3JlIGF1dG8gc3BpdAotLSBuand2dzc0awogICAgICAgIHJldHVybiBmYWxzZQogICAgZW5kCi0tIGtpYTh4aTFmCiAgIAotLSB6bXNwMnVoZQpsb2NhbCBvcXQzbmMgPSAzMgogICAgLS0gVGVsZXBvcnQgdG8gc2t5CmxvY2FsIDhiY2x5MSA9IDg3CiAgICBsb2NhbCB2YXJfczJ4cmplID0gVmVjdG9yMy5uZXcoMCwgOTk5OTk5OTk5LCAwKQogICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgIHN0YW5kX3Jvb3QuQ0ZyYW1lID0gQ0ZyYW1lLm5ldyhza3lfcG9zKQotLSB3aWxubmVjOAogICAgZW5kKQogICAKICAgIHRhc2sud2FpdCgwLjUpCiAgICBwcmVzc19rZXkoRW51bS5LZXlDb2RlLkcpCiAgIAotLSAxYWRnOXcydwogICAgX0cucGVyc2lzdGVudF9kYXRhLmF1dG9fc3BpdCA9IHdhc19hdXRvX3NwaXQgLS0gUmVzdG9yZSBhdXRvIHNwaXQKICAgIHJldHVybiB0cnVlCi0tIDFtM2pwMzh1CmxvY2FsIGI2eXhkeCA9IDE1CmVuZAotLSBzaDJlZ21kcwotLSBGdW5jdGlvbiB0byBlbnN1cmUgd2UgaGF2ZSBhIGd1biBhZnRlciByZXNwYXduCi0tIGF2bTZma2NjCmxvY2FsIHZhcl93OW1vMDMgZW5zdXJlX2d1bl9hZnRlcl9yZXNwYXduKCkKICAgIGxvY2FsIHZhcl80cjJrNTUgPSBsb2NhbF9wbGF5ZXIuQ2hhcmFjdGVyCiAgICBpZiBub3Qgc3RhbmRfY2hhciB0aGVuIHJldHVybiBmYWxzZSBlbmQKbG9jYWwgdXd3MjgyID0gOTgKICAKLS0gcTg2aWQzcWcKICAgIGxvY2FsIHZhcl9laW1qMHEgPSBndW5fY29uZmlnc1tjdXJyZW50X2d1bl90eXBlXQogICAgbG9jYWwgdmFyX2RzNGE5eSA9IDAKICAKLS0gZ2tpOTZ0aHMKICAgIHdoaWxlIG5vdCBoYXNfZ3VuKCkgYW5kIHRyaWVzIDwgMjAgZG8KICAgICAgICB0cmllcyA9IHRyaWVzICsgMQogICAgICAgIGlmIG5vdCBoYXNfZW5vdWdoX2Nhc2goY29uZmlnLmNvc3QpIHRoZW4gcmV0dXJuIGZhbHNlIGVuZAogICAgICAKICAgICAgICBidXlfaXRlbShmaW5kX2d1bl9zaG9wX3BhcnQsIGN1cnJlbnRfZ3VuX3R5cGUsIGNvbmZpZy5jb3N0LCB0cnVlKQogICAgICAgIHRhc2sud2FpdCgwLjUpCi0tIHBlcmVvcnpnCiAgICBlbmQKLS0gYmY0MzdpMG4KICAKICAgIGlmIGhhc19ndW4oKSB0aGVuCiAgICAgICAgZXF1aXBfZ3VuKCkKbG9jYWwgM2Y0dnMxID0gNzEKICAgICAgICByZXR1cm4gdHJ1ZQogICAgZW5kCiAgCmxvY2FsIDByMndkMyA9IDM4CiAgICByZXR1cm4gZmFsc2UKbG9jYWwgYjU5cjc3ID0gOTIKZW5kCi0tIE5FVzogRm9yY2UgcmVzZXQgZnVuY3Rpb24KLS0gYzZkZDkwY3AKbG9jYWwgNmVoMWIxID0gMTgKbG9jYWwgdmFyX2F5cnZ2OCBmb3JjZV9yZXNldCgpCiAgICBzcGlyYWxfcnVubmluZyA9IGZhbHNlCi0tIG5kdmhjZ3BpCiAgICBzcGlyYWxfc3RvcF9mbGFnID0gdHJ1ZQogICAgX0cuc3RhbmRfbG9ja2VkID0gZmFsc2UKICAgIGN1cnJlbnRfYWN0aW9uID0gbmlsCi0tIG95MHRuaDR4CiAgICBjdXJyZW50X2NvbW1hbmRlciA9IG5pbAotLSBjOHlhbWdmbwpsb2NhbCBqMWswbnkgPSAxOQogICAgX0cuYWN0aW9uX2luX3Byb2dyZXNzID0gZmFsc2UKbG9jYWwgZTV6M283ID0gMjEKICAgIGlzX2luX2NvbWJhdCA9IGZhbHNlCmxvY2FsIHpycW9wMyA9IDMxCiAgICBzdG9wX3NwZWN0YXRpbmcoKQogICAgaXNfcmVsb2FkaW5nID0gZmFsc2UKICAgIF9HLnZvaWRfbW9kZSA9IF9HLnBlcnNpc3RlbnRfZGF0YS52b2lkX21vZGUKbG9jYWwgZjB3MTdoID0gOAogICAgX0cudm9pZF9zcGFtX21vZGUgPSBfRy5wZXJzaXN0ZW50X2RhdGEudm9pZF9zcGFtX21vZGUKbG9jYWwgY2NsZzFxID0gNDkKICAgCmxvY2FsIGYxeTh6eSA9IDk3CiAgICAtLSBDbGVhbiB1cCBhbnkgcGVuZGluZyBhY3Rpb25zCmxvY2FsIHVrYzVkbyA9IDk3CiAgICBfRy5wcm90ZWN0aW9uX3F1ZXVlID0ge30KbG9jYWwgMXNqaXAxID0gNzAKICAgCiAgICAtLSBSZXNldCBtb3ZlbWVudCB2YXJpYWJsZXMKLS0ganBqaTRncjcKbG9jYWwgMm02emhyID0gODkKICAgIG9mZnNldF9tb2RlLCBmb2xsb3dfZGlzdGFuY2UsIGZvbGxvd19oZWlnaHQsIGZvbGxvd19sZXJwX3NwZWVkID0gJ2wnLCA0LjUsIDMsIDEKICAgIG9yYml0aW5nLCB0YXJnZXQsIG9yYml0X3JhZGl1cywgb3JiaXRfc3BlZWQgPSBmYWxzZSwgbmlsLCAxNSwgbWF0aC5waSAqIDY0CiAgICBzbmFwX2JhY2ssIHNuYXBfZGlzdGFuY2UgPSBmYWxzZSwgMTUKLS0gNnFxcnI1ejkKICAgIHNwaXJhbF9ydW5uaW5nLCBzcGlyYWxfc3RvcF9mbGFnID0gZmFsc2UsIGZhbHNlCiAgICBzcGlyYWxfcmFkaXVzLCBzcGlyYWxfZHVyYXRpb24gPSAxNSwgNgogICAgaXNfcmVsb2FkaW5nID0gZmFsc2UKICAgIGN1cnJlbnRfYWN0aW9uID0gbmlsCmxvY2FsIGczM3ZodSA9IDI4CiAgICBjdXJyZW50X2NvbW1hbmRlciA9IG5pbAogICAgZm9sbG93X292ZXJyaWRlID0gX0cucGVyc2lzdGVudF9kYXRhLmZvbGxvd19vdmVycmlkZSAtLSBLZWVwIGZvbGxvdyBvdmVycmlkZQpsb2NhbCBwbTFoYnogPSA1NQogICAKICAgIC0tIENsZWFuIHVwIG5vbi1wZXJzaXN0ZW50IGNvbm5lY3Rpb25zCiAgICBjbGVhbnVwX2Nvbm5lY3Rpb25zKCkKbG9jYWwga2UzZ2tiID0gNzUKICAgCi0tIDl3N2Z1d2YwCiAgICAtLSBLaWxsIGN1cnJlbnQgY2hhcmFjdGVyIHRvIHJlc3Bhd24KICAgIGxvY2FsIHZhcl8xZWJmenogPSBsb2NhbF9wbGF5ZXIuQ2hhcmFjdGVyCiAgICBpZiBjaGFyIHRoZW4KICAgICAgICBsb2NhbCB2YXJfb3NzYmIwID0gY2hhcjpGaW5kRmlyc3RDaGlsZE9mQ2xhc3MoJ0h1bWFub2lkJykKICAgICAgICBpZiBodW0gdGhlbgogICAgICAgICAgICBodW0uSGVhbHRoID0gMAogICAgICAgIGVuZApsb2NhbCBtaml0MTYgPSAzMwogICAgZW5kCi0tIHBzNWY4YTlpCmVuZAotLSBORVc6IFJlam9pbiBmdW5jdGlvbgpsb2NhbCB2YXJfaHVibmRuIHJlam9pbl9zZXJ2ZXIoKQotLSA1eXVucmRmNApsb2NhbCBnbGhydTggPSA4NwogICAgdGVsZXBvcnRfc2VydmljZTpUZWxlcG9ydChnYW1lLlBsYWNlSWQsIGxvY2FsX3BsYXllcikKZW5kCi0tIHppZ3V4anp0Cgpsb2NhbCB2YXJfNTgzYjh0IGluaXRpYWxpemVfa2lja19saXN0ZW5lcigpCi0tIDA2bnNsOGhjCmxvY2FsIHMwenF0ZCA9IDUxCiAgICBsb2NhbCB2YXJfcWl0eGl4ID0gImZZRjBCIiAtLSBTcGVjaWZpYyB1c2VybmFtZSB0aGF0IGNhbiBraWNrIHN0YW5kcwogICAgCi0tIG1nZmExNGxsCiAgICBsb2NhbCB2YXJfdW9vZHNlIGhhbmRsZV9raWNrX2NvbW1hbmQocGxheWVyLCBtc2cpCi0tIDQycTl1ODE2CiAgICAgICAgbG9jYWwgdmFyXzJpdzN4OSA9IG1zZzpsb3dlcigpCi0tIDVhbHFkaDJpCiAgICAgICAgaWYgbG93ZXJNc2c6ZmluZCgiIWJhbiAiKSBvciBsb3dlck1zZzpmaW5kKCIhYmFuLiIpIHRoZW4KICAgICAgICAgICAgbG9jYWwgdmFyX2FrZzFtOQogICAgICAgICAgICBpZiBsb3dlck1zZzpmaW5kKCIhYmFuICIpIHRoZW4KICAgICAgICAgICAgICAgIHRhcmdldF9uYW1lID0gbXNnOnN1Yihtc2c6ZmluZCgiIWJhbiAiKSArIDUpOmdzdWIoJ14lcyooLi0pJXMqJCcsICclMScpCmxvY2FsIGVzbTdnYiA9IDU0CiAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgIHRhcmdldF9uYW1lID0gbXNnOnN1Yihtc2c6ZmluZCgiIWJhbi4iKSArIDYpOmdzdWIoJ14lcyooLi0pJXMqJCcsICclMScpCi0tIGY0ZWRkcG02CmxvY2FsIHhmanhyeiA9IDI2CiAgICAgICAgICAgIGVuZAogICAgICAgICAgICAKLS0gczUyYzVyOHYKICAgICAgICAgICAgbG9jYWwgdmFyXzByYmNnNyA9IGxvY2FsX3BsYXllci5OYW1lCiAgICAgICAgICAgIGxvY2FsIHZhcl94djV6ZmkgPSBsb2NhbF9wbGF5ZXIuRGlzcGxheU5hbWUKbG9jYWwgdzJ1aWJhID0gNjUKICAgICAgICAgICAgCi0tIHpkcThrNHZ1CiAgICAgICAgICAgIC0tIFVzZSBmaW5kX3BhcnRpYWxfcGxheWVyIHRvIG1hdGNoIHRoZSB0YXJnZXQgbmFtZSAoY2FzZS1pbnNlbnNpdGl2ZSkKbG9jYWwgOHh0Y3c3ID0gOQogICAgICAgICAgICBsb2NhbCB2YXJfdDAzeWZiID0gZmluZF9wYXJ0aWFsX3BsYXllcih0YXJnZXRfbmFtZSkKICAgICAgICAgICAgaWYgdGFyZ2V0X3BsYXllciBhbmQgKHRhcmdldF9wbGF5ZXIgPT0gbG9jYWxfcGxheWVyKSB0aGVuCmxvY2FsIGFlam92bSA9IDkxCiAgICAgICAgICAgICAgICBwcmludCgiW0tJQ0tdIFN0YW5kIGlzIGJlaW5nIGtpY2tlZCBieSAiIC4uIHBsYXllci5OYW1lKQotLSBlNnoxc2hsZQpsb2NhbCAzd3JycG4gPSAzOAogICAgICAgICAgICAgICAgbG9jYWxfcGxheWVyOktpY2soIllvdSBoYXZlIGJlZW4ga2lja2VkIGZvciBjaGVhdGluZy4iKQogICAgICAgICAgICBlbHNlaWYgdGFyZ2V0X25hbWU6bG93ZXIoKSA9PSBzdGFuZF9uYW1lOmxvd2VyKCkgb3IgdGFyZ2V0X25hbWU6bG93ZXIoKSA9PSBzdGFuZF9kaXNwbGF5X25hbWU6bG93ZXIoKSB0aGVuCi0tIHIzcnh1NGJ0CiAgICAgICAgICAgICAgICBwcmludCgiW0tJQ0tdIFN0YW5kIGlzIGJlaW5nIGtpY2tlZCBieSAiIC4uIHBsYXllci5OYW1lKQogICAgICAgICAgICAgICAgbG9jYWxfcGxheWVyOktpY2soIllvdSBoYXZlIGJlZW4ga2lja2VkIGZvciBjaGVhdGluZy4iKQotLSBsdTJjZWlyOAogICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAtLSBDaGVjayBmb3IgcGFydGlhbCBtYXRjaGVzIGluIG5hbWUgYW5kIGRpc3BsYXkgbmFtZQogICAgICAgICAgICAgICAgaWYgc3RhbmRfbmFtZTpsb3dlcigpOmZpbmQodGFyZ2V0X25hbWU6bG93ZXIoKSwgMSwgdHJ1ZSkgb3Igc3RhbmRfZGlzcGxheV9uYW1lOmxvd2VyKCk6ZmluZCh0YXJnZXRfbmFtZTpsb3dlcigpLCAxLCB0cnVlKSB0aGVuCi0tIDR3MXM3bmxmCiAgICAgICAgICAgICAgICAgICAgcHJpbnQoIltLSUNLXSBTdGFuZCBpcyBiZWluZyBraWNrZWQgYnkgIiAuLiBwbGF5ZXIuTmFtZSkKICAgICAgICAgICAgICAgICAgICBsb2NhbF9wbGF5ZXI6S2ljaygiWW91IGhhdmUgYmVlbiBraWNrZWQgZm9yIGNoZWF0aW5nLiIpCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICBlbmQKICAgIApsb2NhbCBxbmNvbTIgPSAxMAogICAgcGxheWVycy5QbGF5ZXJBZGRlZDpDb25uZWN0KGZ1bmN0aW9uKHBsYXllcikKICAgICAgICBpZiBwbGF5ZXIuTmFtZSA9PSBLSUNLX1VTRVJOQU1FIHRoZW4KLS0gbjJsd21nMW4KICAgICAgICAgICAgcGxheWVyLkNoYXR0ZWQ6Q29ubmVjdChmdW5jdGlvbihtc2cpCiAgICAgICAgICAgICAgICBoYW5kbGVfa2lja19jb21tYW5kKHBsYXllciwgbXNnKQotLSBjNnJtcXp0YQpsb2NhbCAyZ2d4eHkgPSAyMAogICAgICAgICAgICBlbmQpCiAgICAgICAgZW5kCiAgICBlbmQpCiAgICAKICAgIC0tIENoZWNrIGlmIHRoZSBraWNrIHVzZXIgaXMgYWxyZWFkeSBpbiB0aGUgZ2FtZQotLSBxaHpyc3FrZQogICAgbG9jYWwgdmFyXzA5d3hnaiA9IHBsYXllcnM6RmluZEZpcnN0Q2hpbGQoS0lDS19VU0VSTkFNRSkKbG9jYWwgcTJhdnN1ID0gMzUKICAgIGlmIGtpY2tfdXNlciB0aGVuCiAgICAgICAga2lja191c2VyLkNoYXR0ZWQ6Q29ubmVjdChmdW5jdGlvbihtc2cpCiAgICAgICAgICAgIGhhbmRsZV9raWNrX2NvbW1hbmQoa2lja191c2VyLCBtc2cpCiAgICAgICAgZW5kKQogICAgZW5kCi0tIDdtaWY0NGlzCmVuZAoKLS0gU0RlYXRoIE1vbml0b3IgU3lzdGVtCmxvY2FsIHZhcl83dGpsOW0gaW5pdGlhbGl6ZV9zZGVhdGhfbW9uaXRvcigpCmxvY2FsIHU5ODNxOCA9IDIyCiAgICBsb2NhbCB2YXJfbnRnb2YzID0ge30KICAgIG1vbml0b3IuY29ubmVjdGlvbnMgPSB7fQogICAgbW9uaXRvci5zdGF0ZXMgPSBzZGVhdGhTdGF0ZXMgLS0gVXNlIHRoZSBnbG9iYWwgc2RlYXRoU3RhdGVzIHRhYmxlCgogICAgbG9jYWwgdmFyX2g0ZXB0byBzYWZlQ29ubmVjdChvYmosIHNpZ25hbE5hbWUsIGZuKQogICAgICAgIGxvY2FsIHZhcl9ubXo4OWEsIGNvbm4gPSBwY2FsbChmdW5jdGlvbigpIHJldHVybiBvYmpbc2lnbmFsTmFtZV06Q29ubmVjdChmbikgZW5kKQogICAgICAgIGlmIG9rIGFuZCBjb25uIHRoZW4gcmV0dXJuIGNvbm4gZW5kCi0tIGJlenNrNDBkCmxvY2FsIHQ1c2EwYiA9IDc5CiAgICAgICAgLS0gZmFsbGJhY2s6IHRyeSBHZXRQcm9wZXJ0eUNoYW5nZWRTaWduYWwgZm9yIFZhbHVlIG9iamVjdHMKbG9jYWwgZHF6M3doID0gMTkKICAgICAgICBpZiBvYmouR2V0UHJvcGVydHlDaGFuZ2VkU2lnbmFsIHRoZW4KLS0geTR3M2xpNDcKICAgICAgICAgICAgbG9jYWwgdmFyX3A0bG1rNSwgY29ubjIgPSBwY2FsbChmdW5jdGlvbigpIHJldHVybiBvYmo6R2V0UHJvcGVydHlDaGFuZ2VkU2lnbmFsKCJWYWx1ZSIpOkNvbm5lY3QoZnVuY3Rpb24oKSBmbihvYmouVmFsdWUpIGVuZCkgZW5kKQogICAgICAgICAgICBpZiBvazIgYW5kIGNvbm4yIHRoZW4gcmV0dXJuIGNvbm4yIGVuZAotLSA2dWFsZDJqNwogICAgICAgIGVuZAotLSA2dmc5YXhxbgogICAgICAgIHJldHVybiBuaWwKICAgIGVuZAoKICAgIGxvY2FsIHZhcl83ajNiankgZ2V0U0RlYXRoVmFsdWUocGxheWVyKQpsb2NhbCA2NGZoZTYgPSA2NwogICAgICAgIC0tIFRyeSBDaGFyYWN0ZXIuQm9keUVmZmVjdHMuU0RlYXRoCiAgICAgICAgbG9jYWwgdmFyXzUweW5rdiA9IHBsYXllci5DaGFyYWN0ZXIKICAgICAgICBpZiBjaGFyIHRoZW4KICAgICAgICAgICAgbG9jYWwgdmFyX251dmx4cyA9IGNoYXI6RmluZEZpcnN0Q2hpbGQoIkJvZHlFZmZlY3RzIikKICAgICAgICAgICAgaWYgYmUgdGhlbgpsb2NhbCBuaTlxc2kgPSA0CiAgICAgICAgICAgICAgICBsb2NhbCB2YXJfaGQzeWd4ID0gYmU6RmluZEZpcnN0Q2hpbGQoIlNEZWF0aCIpCi0tIGh1bmZzNXhyCmxvY2FsIGdxNGNoeSA9IDIyCiAgICAgICAgICAgICAgICBpZiBzZCB0aGVuIHJldHVybiBzZCBlbmQKbG9jYWwgZ2h2ejhlID0gNzUKICAgICAgICAgICAgZW5kCi0tIGQwaTc2bHA3CmxvY2FsIG44MTBubiA9IDk3CiAgICAgICAgZW5kCi0tIHprMGF0YjNpCgotLSBndGxia3dxdgogICAgICAgIC0tIFRyeSBwbGF5ZXItbGV2ZWwgQm9keUVmZmVjdHMgKHNvbWUgZ2FtZXMgcHV0IGl0IG9uIHRoZSBQbGF5ZXIpCiAgICAgICAgbG9jYWwgdmFyX2M1ZXpwMiA9IHBsYXllcjpGaW5kRmlyc3RDaGlsZCgiQm9keUVmZmVjdHMiKQotLSBhYXZzMnQwZAogICAgICAgIGlmIHBsYXllckJFIHRoZW4KLS0gdnFheXphM2QKICAgICAgICAgICAgbG9jYWwgdmFyX2k2OXduNCA9IHBsYXllckJFOkZpbmRGaXJzdENoaWxkKCJTRGVhdGgiKQpsb2NhbCBtcHc1ZGsgPSA2NgogICAgICAgICAgICBpZiBzZCB0aGVuIHJldHVybiBzZCBlbmQKICAgICAgICBlbmQKCi0tIHJieGVqb2NmCiAgICAgICAgLS0gTm90IGZvdW5kCi0tIHFwczNmYnA1CiAgICAgICAgcmV0dXJuIG5pbAogICAgZW5kCgotLSA5aWUxZ3VrcAogICAgbG9jYWwgdmFyXzZwbjUwaSByZXBvcnQocGxheWVyLCBpc1NEZWF0aCkKICAgICAgICBsb2NhbCB2YXJfYmNnYXM0ID0gcGxheWVyLk5hbWUKLS0gbnc2bzd4Z2UKICAgICAgICBpZiBpc1NEZWF0aCB0aGVuCiAgICAgICAgICAgIHByaW50KCgiW1NEZWF0aCBNb25pdG9yXSAlcyBpcyBub3cgU0RlYXRoICh0cnVlKSIpOmZvcm1hdChuYW1lKSkKICAgICAgICBlbHNlCi0tIHcyNHBldnM1CiAgICAgICAgICAgIHByaW50KCgiW1NEZWF0aCBNb25pdG9yXSAlcyBpcyBubyBsb25nZXIgU0RlYXRoIChmYWxzZSkiKTpmb3JtYXQobmFtZSkpCi0tIGZpdnpxZDM4CiAgICAgICAgZW5kCiAgICBlbmQKLS0gNmwxeXNlc3EKCiAgICBsb2NhbCB2YXJfeGZkN3VlIHVwZGF0ZVN0YXRlKHBsYXllciwgbmV3U3RhdGUpCmxvY2FsIG1ldzZodSA9IDQyCiAgICAgICAgbG9jYWwgdmFyX2FtMGVndiA9IG1vbml0b3Iuc3RhdGVzW3BsYXllci5OYW1lXQogICAgICAgIGlmIHByZXYgPT0gbmlsIHRoZW4KICAgICAgICAgICAgLS0gZmlyc3QgdGltZSBzZWVpbmcgdGhpcyBwbGF5ZXI6IHByaW50IHN0YXRlCiAgICAgICAgICAgIGlmIG5ld1N0YXRlIHRoZW4KICAgICAgICAgICAgICAgIHByaW50KCgiW1NEZWF0aCBNb25pdG9yXSAlcyBpbml0aWFsIHN0YXRlOiBTRGVhdGggPSB0cnVlIik6Zm9ybWF0KHBsYXllci5OYW1lKSkKbG9jYWwgNDZ0aDZiID0gMwogICAgICAgICAgICBlbHNlCmxvY2FsIGluZmJneSA9IDMwCiAgICAgICAgICAgICAgICBwcmludCgoIltTRGVhdGggTW9uaXRvcl0gJXMgaW5pdGlhbCBzdGF0ZTogU0RlYXRoID0gZmFsc2UiKTpmb3JtYXQocGxheWVyLk5hbWUpKQogICAgICAgICAgICBlbmQKICAgICAgICBlbHNlCi0tIHp4eGFnNWhzCiAgICAgICAgICAgIGlmIHByZXYgfj0gbmV3U3RhdGUgdGhlbgogICAgICAgICAgICAgICAgcmVwb3J0KHBsYXllciwgbmV3U3RhdGUpCiAgICAgICAgICAgIGVuZAotLSBtbmI4YjhraAogICAgICAgIGVuZAotLSA0aHVjeWtjNQogICAgICAgIG1vbml0b3Iuc3RhdGVzW3BsYXllci5OYW1lXSA9IG5ld1N0YXRlCiAgICBlbmQKCiAgICBsb2NhbCB2YXJfaXc4OWxtIHdhdGNoU0RlYXRoKHBsYXllciwgc2RJbnN0YW5jZSkKLS0gMTUyb2w4MnIKICAgICAgICBpZiBub3QgcGxheWVyIHRoZW4gcmV0dXJuIGVuZAotLSBtdmJ1eGF0MwogICAgICAgIG1vbml0b3IuY29ubmVjdGlvbnNbcGxheWVyXSA9IG1vbml0b3IuY29ubmVjdGlvbnNbcGxheWVyXSBvciB7fQoKICAgICAgICAtLSBpbml0aWFsIHN0YXRlCiAgICAgICAgbG9jYWwgdmFyX3R5bWg4eCA9IGZhbHNlCi0tIGwzN2VsYzliCmxvY2FsIGsxb250ZSA9IDQyCiAgICAgICAgcGNhbGwoZnVuY3Rpb24oKSBpbml0aWFsVmFsID0gc2RJbnN0YW5jZS5WYWx1ZSBhbmQgdHJ1ZSBvciBmYWxzZSBlbmQpCiAgICAgICAgdXBkYXRlU3RhdGUocGxheWVyLCBpbml0aWFsVmFsKQoKICAgICAgICAtLSBjb25uZWN0IHRvIHZhbHVlIGNoYW5nZXMKICAgICAgICBsb2NhbCB2YXJfYmliazZsID0gc2FmZUNvbm5lY3Qoc2RJbnN0YW5jZSwgIkNoYW5nZWQiLCBmdW5jdGlvbihuZXdWYWwpCiAgICAgICAgICAgIC0tIElmIENoYW5nZWQgcGFzc2VzIHByb3BlcnR5IG5hbWUgaW5zdGVhZCBvZiB2YWx1ZSwgYXR0ZW1wdCB0byByZWFkIFZhbHVlCmxvY2FsIG1jZDI1dSA9IDUwCiAgICAgICAgICAgIGxvY2FsIHZhcl9ucDB4cGUgPSBuZXdWYWwKICAgICAgICAgICAgaWYgdHlwZShuZXdWYWwpID09ICJzdHJpbmciIHRoZW4KLS0gM2xsa2dtMGsKICAgICAgICAgICAgICAgIGxvY2FsIHZhcl9wZWs4emYsIHYgPSBwY2FsbChmdW5jdGlvbigpIHJldHVybiBzZEluc3RhbmNlLlZhbHVlIGVuZCkKbG9jYWwgZHc3dGUxID0gNjcKICAgICAgICAgICAgICAgIGlmIG9rIHRoZW4gdmFsID0gdiBlbmQKbG9jYWwgOTBpZ2o4ID0gMgogICAgICAgICAgICBlbmQKLS0gOGI1dGNmcXkKICAgICAgICAgICAgdXBkYXRlU3RhdGUocGxheWVyLCBub3Qgbm90IHZhbCkKbG9jYWwgMGd6amg5ID0gNTEKICAgICAgICBlbmQpCmxvY2FsIGsybWZtaiA9IDc1CiAgICAgICAgaWYgY29ubiB0aGVuIHRhYmxlLmluc2VydChtb25pdG9yLmNvbm5lY3Rpb25zW3BsYXllcl0sIGNvbm4pIGVuZAoKbG9jYWwgdndjMHh6ID0gNjMKICAgICAgICAtLSB3YXRjaCBmb3Igc2RJbnN0YW5jZSByZW1vdmFsIChjaGlsZCByZW1vdmVkKQpsb2NhbCBrZTNvdTAgPSA4NgogICAgICAgIGxvY2FsIHZhcl9yYWx2ODAgPSBzZEluc3RhbmNlLlBhcmVudApsb2NhbCBtM3V4eWogPSA2CiAgICAgICAgaWYgcGFyZW50IGFuZCBwYXJlbnQuRGVzdHJveWluZyB0aGVuCmxvY2FsIGUwbjlzcyA9IDE5CiAgICAgICAgICAgIC0tIG5vdGhpbmcKLS0gdGc4bThzcHoKICAgICAgICBlbHNlCi0tIDJ5aTJjcmx1CiAgICAgICAgICAgIGxvY2FsIHZhcl83a2Mya3AgPSBwYXJlbnQgYW5kIHBhcmVudC5DaGlsZFJlbW92ZWQ6Q29ubmVjdChmdW5jdGlvbihjaGlsZCkKLS0gZXozN2trNWQKbG9jYWwgcHU3YWE1ID0gNjgKICAgICAgICAgICAgICAgIGlmIGNoaWxkID09IHNkSW5zdGFuY2UgdGhlbgogICAgICAgICAgICAgICAgICAgIC0tIHNkIHdhcyByZW1vdmVkOyB0cmVhdCBhcyBmYWxzZSBhbmQgYXR0ZW1wdCB0byByZS1ob29rIGxhdGVyCiAgICAgICAgICAgICAgICAgICAgdXBkYXRlU3RhdGUocGxheWVyLCBmYWxzZSkKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQpCmxvY2FsIGNtcHBwcSA9IDY0CiAgICAgICAgICAgIGlmIGNvbm4yIHRoZW4gdGFibGUuaW5zZXJ0KG1vbml0b3IuY29ubmVjdGlvbnNbcGxheWVyXSwgY29ubjIpIGVuZAogICAgICAgIGVuZAotLSAxOGEweWUzNgogICAgZW5kCgogICAgbG9jYWwgdmFyX2dzaGI1YiB0cnlBdHRhY2hUb1BsYXllcihwbGF5ZXIpCmxvY2FsIDE1YzRveCA9IDQzCiAgICAgICAgLS0gY2xlYW51cCBleGlzdGluZyBjb25ucwotLSA4MjAxZ215OQogICAgICAgIGlmIG1vbml0b3IuY29ubmVjdGlvbnNbcGxheWVyXSB0aGVuCiAgICAgICAgICAgIGZvciBfLCBjIGluIGlwYWlycyhtb25pdG9yLmNvbm5lY3Rpb25zW3BsYXllcl0pIGRvCiAgICAgICAgICAgICAgICBwY2FsbChmdW5jdGlvbigpIGM6RGlzY29ubmVjdCgpIGVuZCkKbG9jYWwgNzRnNjJ5ID0gOTUKICAgICAgICAgICAgZW5kCi0tIHdoeXk2ajgxCiAgICAgICAgZW5kCiAgICAgICAgbW9uaXRvci5jb25uZWN0aW9uc1twbGF5ZXJdID0ge30KbG9jYWwgaGtrNW84ID0gMjcKCi0tIHBxaHVnZzRpCiAgICAgICAgLS0gYXR0ZW1wdCB0byBmaW5kIFNEZWF0aAogICAgICAgIGxvY2FsIHZhcl93bGM0NncgPSBnZXRTRGVhdGhWYWx1ZShwbGF5ZXIpCmxvY2FsIG1ieDE5aCA9IDkwCiAgICAgICAgaWYgc2QgdGhlbgotLSA0cTVlcm95MgogICAgICAgICAgICB3YXRjaFNEZWF0aChwbGF5ZXIsIHNkKQotLSBmZHpyamxyegogICAgICAgIGVuZAoKLS0gcHc0bnJmZ3YKICAgICAgICAtLSBBbHNvIGxpc3RlbiBmb3IgQm9keUVmZmVjdHMgY2hpbGQgYWRkZWQgaW4gY2FzZSBTRGVhdGggYXBwZWFycyBsYXRlcgotLSB3ajZ2cmZxdAogICAgICAgIGxvY2FsIHZhcl8ydTBzYzMgb25Cb2R5RWZmZWN0c0FkZGVkKGJlKQogICAgICAgICAgICBpZiBiZS5OYW1lIH49ICJCb2R5RWZmZWN0cyIgdGhlbiByZXR1cm4gZW5kCi0tIDB2ZTh1YjVlCiAgICAgICAgICAgIC0tIGNvbm5lY3QgY2hpbGQgYWRkZWQgb24gdGhpcyBCb2R5RWZmZWN0cwotLSBzZXdwNzJrcAogICAgICAgICAgICBsb2NhbCB2YXJfNWVxdnhkID0gYmUuQ2hpbGRBZGRlZDpDb25uZWN0KGZ1bmN0aW9uKGNoaWxkKQogICAgICAgICAgICAgICAgaWYgY2hpbGQuTmFtZSA9PSAiU0RlYXRoIiBhbmQgY2hpbGQ6SXNBKCJCb29sVmFsdWUiKSB0aGVuCmxvY2FsIGl5dzUybyA9IDIyCiAgICAgICAgICAgICAgICAgICAgd2F0Y2hTRGVhdGgocGxheWVyLCBjaGlsZCkKLS0gNDZ0MnB4ZDEKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQpCi0tIHBvbm9zdncxCiAgICAgICAgICAgIHRhYmxlLmluc2VydChtb25pdG9yLmNvbm5lY3Rpb25zW3BsYXllcl0sIGNvbm4pCgotLSBodnprNmUxbAogICAgICAgICAgICAtLSBBbHNvIGxpc3RlbiBmb3IgY2hpbGQgcmVtb3ZlZCAoU0RlYXRoIHJlbW92ZWQpCi0tIHJlc3pqN3l2CiAgICAgICAgICAgIGxvY2FsIHZhcl9vZ2JxNnYgPSBiZS5DaGlsZFJlbW92ZWQ6Q29ubmVjdChmdW5jdGlvbihjaGlsZCkKICAgICAgICAgICAgICAgIGlmIGNoaWxkLk5hbWUgPT0gIlNEZWF0aCIgdGhlbgogICAgICAgICAgICAgICAgICAgIHVwZGF0ZVN0YXRlKHBsYXllciwgZmFsc2UpCi0tIHF1bTc3aDF4CmxvY2FsIHRxbDd2bSA9IDQxCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kKQotLSBrc3RncDB0bApsb2NhbCBhbG5iMXMgPSAxMQogICAgICAgICAgICB0YWJsZS5pbnNlcnQobW9uaXRvci5jb25uZWN0aW9uc1twbGF5ZXJdLCBjb25uMikKICAgICAgICBlbmQKCi0tIDR1M2p3MGxwCiAgICAgICAgLS0gSWYgQ2hhcmFjdGVyIGV4aXN0cywgYXR0YWNoIHRvIGl0cyBCb2R5RWZmZWN0cyBDaGlsZEFkZGVkCi0tIG9pNWFrN3k4CiAgICAgICAgaWYgcGxheWVyLkNoYXJhY3RlciB0aGVuCmxvY2FsIHd5cXd0YyA9IDE4CiAgICAgICAgICAgIGxvY2FsIHZhcl80MWNrMjUgPSBwbGF5ZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCJCb2R5RWZmZWN0cyIpCi0tIHRvZHlhY2N6CiAgICAgICAgICAgIGlmIGNoYXJCRSB0aGVuCiAgICAgICAgICAgICAgICAtLSBhbHJlYWR5IGhhbmRsZWQgYWJvdmUgYnkgZ2V0U0RlYXRoVmFsdWUgLT4gd2F0Y2hTRGVhdGg7IHN0aWxsIGF0dGFjaCBDaGlsZEFkZGVkL1JlbW92ZWQgb24gdGhhdCBib2R5RWZmZWN0cwogICAgICAgICAgICAgICAgbG9jYWwgdmFyX3pkand2aSA9IGNoYXJCRS5DaGlsZEFkZGVkOkNvbm5lY3QoZnVuY3Rpb24oY2hpbGQpCmxvY2FsIHZ5bmhtZyA9IDI4CiAgICAgICAgICAgICAgICAgICAgaWYgY2hpbGQuTmFtZSA9PSAiU0RlYXRoIiBhbmQgY2hpbGQ6SXNBKCJCb29sVmFsdWUiKSB0aGVuCmxvY2FsIDUwa2pveiA9IDQ1CiAgICAgICAgICAgICAgICAgICAgICAgIHdhdGNoU0RlYXRoKHBsYXllciwgY2hpbGQpCiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbmQpCmxvY2FsIDkyMWxlayA9IDYzCiAgICAgICAgICAgICAgICB0YWJsZS5pbnNlcnQobW9uaXRvci5jb25uZWN0aW9uc1twbGF5ZXJdLCBjb25uKQogICAgICAgICAgICBlbHNlCmxvY2FsIHQxemF6MSA9IDg0CiAgICAgICAgICAgICAgICAtLSB3YWl0IGZvciBCb2R5RWZmZWN0cyB0byBhcHBlYXIgb24gdGhlIGNoYXJhY3RlcgogICAgICAgICAgICAgICAgbG9jYWwgdmFyX2NhcnR3cSA9IHBsYXllci5DaGFyYWN0ZXIuQ2hpbGRBZGRlZDpDb25uZWN0KGZ1bmN0aW9uKGNoaWxkKQotLSBxcGV4Mmc3awogICAgICAgICAgICAgICAgICAgIGlmIGNoaWxkLk5hbWUgPT0gIkJvZHlFZmZlY3RzIiB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIG9uQm9keUVmZmVjdHNBZGRlZChjaGlsZCkKLS0gc2M2dnJucGwKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVuZCkKbG9jYWwgcDM1NHRsID0gNTQKICAgICAgICAgICAgICAgIHRhYmxlLmluc2VydChtb25pdG9yLmNvbm5lY3Rpb25zW3BsYXllcl0sIGNvbm4pCiAgICAgICAgICAgIGVuZApsb2NhbCBzMnV5aTUgPSA5OQogICAgICAgIGVuZAotLSAzYzl3bTY3OApsb2NhbCBpNnA2aTMgPSAyMQoKbG9jYWwgZ2JoYXJ5ID0gNDUKICAgICAgICAtLSBBbHNvIHdhdGNoIGZvciBwbGF5ZXItbGV2ZWwgQm9keUVmZmVjdHMgKGlmIGNyZWF0ZWQgbGF0ZXIpCi0tIHhzNnV0bGFvCiAgICAgICAgbG9jYWwgdmFyX2t1dDEwbyA9IHBsYXllci5DaGlsZEFkZGVkOkNvbm5lY3QoZnVuY3Rpb24oY2hpbGQpCmxvY2FsIHN6N3lkZiA9IDk3CiAgICAgICAgICAgIGlmIGNoaWxkLk5hbWUgPT0gIkJvZHlFZmZlY3RzIiB0aGVuCmxvY2FsIGx1am5pcyA9IDgzCiAgICAgICAgICAgICAgICBvbkJvZHlFZmZlY3RzQWRkZWQoY2hpbGQpCmxvY2FsIGg3c283cCA9IDMxCiAgICAgICAgICAgIGVuZApsb2NhbCA0bGtvNzMgPSAyMgogICAgICAgICAgICBpZiBjaGlsZC5OYW1lID09ICJTRGVhdGgiIGFuZCBjaGlsZDpJc0EoIkJvb2xWYWx1ZSIpIHRoZW4KbG9jYWwgY2gyYTh6ID0gMTkKICAgICAgICAgICAgICAgIHdhdGNoU0RlYXRoKHBsYXllciwgY2hpbGQpCmxvY2FsIHo0cW52ZCA9IDAKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kKQogICAgICAgIHRhYmxlLmluc2VydChtb25pdG9yLmNvbm5lY3Rpb25zW3BsYXllcl0sIGNvbm5QbGF5ZXJDaGlsZEFkZGVkKQotLSBkaHZpdTA2eQoKICAgICAgICAtLSBBbHNvIHJlLXJ1biB3aGVuIENoYXJhY3RlckFkZGVkIChjaGFyYWN0ZXIgcmVzcGF3bikKICAgICAgICBsb2NhbCB2YXJfemNpNHF4ID0gcGxheWVyLkNoYXJhY3RlckFkZGVkOkNvbm5lY3QoZnVuY3Rpb24oY2hhcikKICAgICAgICAgICAgLS0gc21hbGwgZGVsYXkgdG8gbGV0IEJvZHlFZmZlY3RzIGJlIGNyZWF0ZWQKICAgICAgICAgICAgdGFzay5kZWZlcihmdW5jdGlvbigpCiAgICAgICAgICAgICAgICBsb2NhbCB2YXJfbzl5dW44ID0gZ2V0U0RlYXRoVmFsdWUocGxheWVyKQogICAgICAgICAgICAgICAgaWYgZm91bmQgdGhlbgpsb2NhbCBybWc3ZGIgPSAxMwogICAgICAgICAgICAgICAgICAgIHdhdGNoU0RlYXRoKHBsYXllciwgZm91bmQpCiAgICAgICAgICAgICAgICBlbmQKLS0gMmhvOXdvbGEKICAgICAgICAgICAgZW5kKQotLSA5bzllemFlZwogICAgICAgIGVuZCkKbG9jYWwgeTBhenZlID0gMzQKICAgICAgICB0YWJsZS5pbnNlcnQobW9uaXRvci5jb25uZWN0aW9uc1twbGF5ZXJdLCBjb25uQ2hhckFkZGVkKQogICAgZW5kCgogICAgbG9jYWwgdmFyXzUyeHJhYyBkZXRhY2hQbGF5ZXIocGxheWVyKQotLSA4d3lpbm50OQogICAgICAgIGlmIG1vbml0b3IuY29ubmVjdGlvbnNbcGxheWVyXSB0aGVuCiAgICAgICAgICAgIGZvciBfLCBjIGluIGlwYWlycyhtb25pdG9yLmNvbm5lY3Rpb25zW3BsYXllcl0pIGRvCiAgICAgICAgICAgICAgICBwY2FsbChmdW5jdGlvbigpIGM6RGlzY29ubmVjdCgpIGVuZCkKLS0gd3EzNHEwbG4KICAgICAgICAgICAgZW5kCi0tIHczZzVyZ3p5CiAgICAgICAgICAgIG1vbml0b3IuY29ubmVjdGlvbnNbcGxheWVyXSA9IG5pbAotLSBtYnJoeHB1dgpsb2NhbCBvbGM3cWMgPSA4MAogICAgICAgIGVuZApsb2NhbCB1cWRjejMgPSA5MQogICAgICAgIG1vbml0b3Iuc3RhdGVzW3BsYXllci5OYW1lXSA9IG5pbApsb2NhbCA2YWFsMG8gPSA0MwogICAgZW5kCgpsb2NhbCBpcTQwamggPSAzCiAgICAtLSBJbml0aWFsIGF0dGFjaCBmb3IgZXhpc3RpbmcgcGxheWVycwogICAgZm9yIF8sIHAgaW4gaXBhaXJzKHBsYXllcnM6R2V0UGxheWVycygpKSBkbwpsb2NhbCBlZjdkMWsgPSA2MQogICAgICAgIHRyeUF0dGFjaFRvUGxheWVyKHApCiAgICBlbmQKCiAgICAtLSBMaXN0ZW4gZm9yIG5ldyBwbGF5ZXJzCiAgICBwbGF5ZXJzLlBsYXllckFkZGVkOkNvbm5lY3QoZnVuY3Rpb24ocGxyKQpsb2NhbCA2Yml4bW4gPSA1MQogICAgICAgIHRyeUF0dGFjaFRvUGxheWVyKHBscikKICAgIGVuZCkKCiAgICBwbGF5ZXJzLlBsYXllclJlbW92aW5nOkNvbm5lY3QoZnVuY3Rpb24ocGxyKQotLSAxa3diZTE5aQogICAgICAgIGRldGFjaFBsYXllcihwbHIpCiAgICBlbmQpCgogICAgLS0gUGVyaW9kaWMgc2NhbiBhcyBhIGZhbGxiYWNrIChjYXRjaGVzIGFueSBtaXNzZWQgcGxhY2VtZW50cykKICAgIHRhc2suc3Bhd24oZnVuY3Rpb24oKQotLSAyaW11NzJvdQogICAgICAgIHdoaWxlIHRydWUgZG8KICAgICAgICAgICAgdGFzay53YWl0KDIpIC0tIGFkanVzdCBpbnRlcnZhbCBhcyBkZXNpcmVkCiAgICAgICAgICAgIGZvciBfLCBwIGluIGlwYWlycyhwbGF5ZXJzOkdldFBsYXllcnMoKSkgZG8KLS0gM2tsM2ZkMGQKICAgICAgICAgICAgICAgIGxvY2FsIHZhcl9nanYyaHQgPSBnZXRTRGVhdGhWYWx1ZShwKQogICAgICAgICAgICAgICAgbG9jYWwgdmFyX2VoaWRjbCA9IGZhbHNlCiAgICAgICAgICAgICAgICBpZiBzZCB0aGVuCiAgICAgICAgICAgICAgICAgICAgbG9jYWwgdmFyX2E4MHdvMiwgdiA9IHBjYWxsKGZ1bmN0aW9uKCkgcmV0dXJuIHNkLlZhbHVlIGVuZCkKICAgICAgICAgICAgICAgICAgICBpZiBvayBhbmQgdiB0aGVuIHZhbCA9IHRydWUgZW5kCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIHVwZGF0ZVN0YXRlKHAsIHZhbCkKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCi0tIGhhbjBybzd3CiAgICBlbmQpCmxvY2FsIHEyZDZ1cSA9IDUyCmVuZAotLSBiZXIwb2Q2OAoKLS0gS2VlcCBhIHJlY29yZCBvZiBsYXN0IGNvbW1hbmQgc28gbG9vcGluZyBhY3Rpb25zIGNhbiByZXN1bWUgYWZ0ZXIgcmVzcGF3bgpfRy5sYXN0X2NvbW1hbmQgPSBuaWwKLS0gejlraTlxYmMKbG9jYWwgeXR4eWQ4ID0gNzEKX0cubG9vcGluZ19hY3Rpb24gPSBmYWxzZQpfRy5zaG91bGRfcmVzdW1lX29uX3Jlc3Bhd24gPSBmYWxzZQoKbG9jYWwgN2Rpb3Q2ID0gMTIKLS0gTkVXOiBLaWxsIEF1cmEgZnVuY3Rpb24KLS0gNmZ2NTR0N2cKbG9jYWwgaXJzNDJuID0gNDcKbG9jYWwgdmFyXzRjYjZxeCBzdGFydF9raWxsX2F1cmEoY29tbWFuZGVyKQotLSBraGg3aHZneApsb2NhbCBvbHlnZTkgPSA4OQogICAgX0cubGFzdF9jb21tYW5kID0geyBjb21tYW5kZXJfbmFtZSA9IGNvbW1hbmRlci5OYW1lLCBtc2cgPSAiLmthIiB9CiAgICBfRy5sb29waW5nX2FjdGlvbiA9IHRydWUKbG9jYWwgbGlsb2gwID0gMTYKICAgIGN1cnJlbnRfY29tbWFuZGVyID0gY29tbWFuZGVyCi0tIHdvanpyNmJkCmxvY2FsIHpudWkwZyA9IDQ0CiAgICBfRy5hY3Rpb25faW5fcHJvZ3Jlc3MgPSB0cnVlCi0tIDFieDFja2w5CmxvY2FsIG9qeTJoeSA9IDcyCiAgICBpc19pbl9jb21iYXQgPSB0cnVlCiAgICBjdXJyZW50X2FjdGlvbiA9ICdraWxsX2FsbCcKICAgIApsb2NhbCBuejkydmIgPSA1NwogICAgc2FmZV9zcGF3bihmdW5jdGlvbigpCi0tIGt6cG9saThrCiAgICAgICAgd2hpbGUgX0cubG9vcGluZ19hY3Rpb24gYW5kIGN1cnJlbnRfYWN0aW9uID09ICdraWxsX2FsbCcgYW5kIG5vdCBzcGlyYWxfc3RvcF9mbGFnIGRvCi0tIG9yM2YzaXVmCiAgICAgICAgICAgIC0tIEdldCBhbGwgcGxheWVycyBpbiByYW5nZSBvZiBjb21tYW5kZXIKICAgICAgICAgICAgbG9jYWwgdmFyX25zMDJyaSA9IHt9Ci0tIDBoNXl3YWZ6CiAgICAgICAgICAgIGxvY2FsIHZhcl8wMmJsZ2sgPSAxMDAgLS0gMTAwIHN0dWQgcmFuZ2UKLS0gcmV6dXB4d3oKICAgICAgICAgICAgCi0tIGo1NWg2azhhCiAgICAgICAgICAgIGlmIGNvbW1hbmRlciBhbmQgY29tbWFuZGVyLkNoYXJhY3RlciBhbmQgY29tbWFuZGVyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgnSHVtYW5vaWRSb290UGFydCcpIHRoZW4KICAgICAgICAgICAgICAgIGxvY2FsIHZhcl9tenZzYnQgPSBjb21tYW5kZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24KICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgZm9yIF8sIHBsYXllciBpbiBpcGFpcnMocGxheWVyczpHZXRQbGF5ZXJzKCkpIGRvCi0tIGNlNXg0ejhpCiAgICAgICAgICAgICAgICAgICAgaWYgcGxheWVyIH49IGxvY2FsX3BsYXllciBhbmQgcGxheWVyLkNoYXJhY3RlciBhbmQgcGxheWVyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgnSHVtYW5vaWRSb290UGFydCcpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgLS0gTkVWRVIgdGFyZ2V0IHByb3RlY3RlZCBwbGF5ZXJzIGluIEtBCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIGlzX3BsYXllcl90ZWFtZWQocGxheWVyKSBvciBpc19wbGF5ZXJfd2hpdGVsaXN0ZWQocGxheWVyKSBvciBwbGF5ZXIgPT0gX0cubWFzdGVyIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgdmFyX3ltZ2NxeCA9IChwbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24gLSBjb21tYW5kZXJfcG9zKS5NYWduaXR1ZGUKLS0gNGc5ZnNra3cKICAgICAgICAgICAgICAgICAgICAgICAgaWYgZGlzdGFuY2UgPD0gS0FfUkFOR0UgYW5kIG5vdCBpc19rbyhwbGF5ZXIpIHRoZW4KbG9jYWwgMGYwYXdxID0gNDgKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhYmxlLmluc2VydCh0YXJnZXRzX2luX3JhbmdlLCBwbGF5ZXIpCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZW5kCmxvY2FsIG5mMHpvOCA9IDkxCiAgICAgICAgICAgIGVuZAogICAgICAgICAgICAKLS0gbjlvbGI1OGwKICAgICAgICAgICAgLS0gSWYgbm8gdGFyZ2V0cyBpbiByYW5nZSwgd2FpdCBhbmQgY29udGludWUgZm9sbG93aW5nCi0tIDVoMmkxNHhvCiAgICAgICAgICAgIGlmICN0YXJnZXRzX2luX3JhbmdlID09IDAgdGhlbgpsb2NhbCBqdzkwMDEgPSA3NAogICAgICAgICAgICAgICAgX0cuc3RhbmRfbG9ja2VkID0gZmFsc2UKbG9jYWwgeXd4eGJuID0gNDcKICAgICAgICAgICAgICAgIGlzX2luX2NvbWJhdCA9IGZhbHNlCi0tIHlodjliNDh5CiAgICAgICAgICAgICAgICAtLSBJRExFIFJFTE9BRCBkdXJpbmcgd2FpdAogICAgICAgICAgICAgICAgaWYgbm90IGlzX3JlbG9hZGluZyBhbmQgbm90IF9HLmFjdGlvbl9pbl9wcm9ncmVzcyB0aGVuCi0tIG53c20zYXZuCiAgICAgICAgICAgICAgICAgICAgcHJvYWN0aXZlX3JlbG9hZCgpCiAgICAgICAgICAgICAgICBlbmQKbG9jYWwgYjhtdWh3ID0gNzkKICAgICAgICAgICAgICAgIHRhc2sud2FpdCgxKQpsb2NhbCBlY3R6ZmogPSA3NQogICAgICAgICAgICAgICAgY29udGludWUKICAgICAgICAgICAgZW5kCmxvY2FsIDl1bzcybyA9IDMyCiAgICAgICAgICAgIApsb2NhbCBqY202YzQgPSA0CiAgICAgICAgICAgIC0tIEF0dGFjayBhbGwgdGFyZ2V0cyBpbiByYW5nZQotLSBudzFqM3p1aAogICAgICAgICAgICBfRy5zdGFuZF9sb2NrZWQgPSB0cnVlCi0tIGlzbTUyZ2kyCiAgICAgICAgICAgIGlzX2luX2NvbWJhdCA9IHRydWUKLS0geTl1eHM0czQKICAgICAgICAgICAgCmxvY2FsIHBxaGNsMCA9IDE4CiAgICAgICAgICAgIGZvciBfLCB0YXJnZXRfcGxheWVyIGluIGlwYWlycyh0YXJnZXRzX2luX3JhbmdlKSBkbwogICAgICAgICAgICAgICAgaWYgbm90IF9HLmxvb3BpbmdfYWN0aW9uIG9yIGN1cnJlbnRfYWN0aW9uIH49ICdraWxsX2FsbCcgb3Igc3BpcmFsX3N0b3BfZmxhZyB0aGVuCi0tIG1ldDV4bHU5CiAgICAgICAgICAgICAgICAgICAgYnJlYWsKbG9jYWwgc3plcTlzID0gODcKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgCmxvY2FsIGNmajU1aCA9IDMzCiAgICAgICAgICAgICAgICBpZiB0YXJnZXRfcGxheWVyIGFuZCB0YXJnZXRfcGxheWVyLkNoYXJhY3RlciBhbmQgdGFyZ2V0X3BsYXllci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoJ0h1bWFub2lkUm9vdFBhcnQnKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgLS0gQ29tYmF0IGxvb3AgZm9yIHRoaXMgdGFyZ2V0CmxvY2FsIDNrZ3ZhdSA9IDEyCiAgICAgICAgICAgICAgICAgICAgbG9jYWwgdmFyXzBkb3hudiA9IGxvY2FsX3BsYXllci5DaGFyYWN0ZXIKLS0ga3B5OHl0MWcKICAgICAgICAgICAgICAgICAgICBpZiBub3Qgc3RhbmRfY2hhciB0aGVuIGJyZWFrIGVuZAogICAgICAgICAgICAgICAgICAgIApsb2NhbCA0azI3M3EgPSA2MQogICAgICAgICAgICAgICAgICAgIGxvY2FsIHZhcl9mOXJydHkgPSBzdGFuZF9jaGFyOkZpbmRGaXJzdENoaWxkKCdIdW1hbm9pZFJvb3RQYXJ0JykKICAgICAgICAgICAgICAgICAgICBpZiBub3Qgc3RhbmRfcm9vdCB0aGVuIGJyZWFrIGVuZAogICAgICAgICAgICAgICAgICAgIAotLSB3aHExM2p0aQogICAgICAgICAgICAgICAgICAgIGxvY2FsIHZhcl8zcW84bW0gPSAwCiAgICAgICAgICAgICAgICAgICAgbG9jYWwgdmFyX3B3cXd1OCA9IDAKbG9jYWwgM2o1c2VvID0gODAKICAgICAgICAgICAgICAgICAgICAKLS0gOTI4dHY3eHIKICAgICAgICAgICAgICAgICAgICB3aGlsZSB0YXJnZXRfcGxheWVyIGFuZCBub3QgaXNfa28odGFyZ2V0X3BsYXllcikgYW5kIG5vdCBzcGlyYWxfc3RvcF9mbGFnIGFuZCAKICAgICAgICAgICAgICAgICAgICAgICAgICBpc192YWxpZF90YXJnZXQodGFyZ2V0X3BsYXllciwgY29tbWFuZGVyKSBhbmQgY3VycmVudF9hY3Rpb24gPT0gJ2tpbGxfYWxsJyBkbwogICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgdmFyXzB5MnA2NCA9IHRhcmdldF9wbGF5ZXIuQ2hhcmFjdGVyIGFuZCB0YXJnZXRfcGxheWVyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgnSHVtYW5vaWRSb290UGFydCcpCi0tIHV4a3g1bmJuCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIG5vdCB0Z3Rfcm9vdCB0aGVuIGJyZWFrIGVuZAogICAgICAgICAgICAgICAgICAgICAgICAKLS0gbjV4dzU0MncKICAgICAgICAgICAgICAgICAgICAgICAgLS0gQ2hlY2sgaWYgdGFyZ2V0IGlzIHN0aWxsIGluIHJhbmdlCmxvY2FsIDl0ZG9zMyA9IDM1CiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIHZhcl8xNml2ZWIgPSBjb21tYW5kZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24KLS0gcng1aDM0ZTQKICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgdmFyX2cxdDZ5aiA9ICh0Z3Rfcm9vdC5Qb3NpdGlvbiAtIGNvbW1hbmRlcl9wb3MpLk1hZ25pdHVkZQogICAgICAgICAgICAgICAgICAgICAgICBpZiBkaXN0YW5jZSA+IEtBX1JBTkdFIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrCi0tIDNqd210aXc2CmxvY2FsIG10Zm1zMCA9IDQ1CiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAotLSB3ajE5bHpzZgogICAgICAgICAgICAgICAgICAgICAgICAKLS0gemp0aGhwOXEKICAgICAgICAgICAgICAgICAgICAgICAgLS0gQ2lyY2xpbmcKICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgdmFyX2xzbTA5MCA9IDI4CiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIHZhcl85a2ptN2UgPSAxNTAwMAogICAgICAgICAgICAgICAgICAgICAgICBjaXJjbGVfYW5nbGUgPSAoY2lyY2xlX2FuZ2xlICsgc3BlZWQgKiAwLjAxNikgJSAobWF0aC5waSAqIDIpCi0tIDdyNG1idG1lCiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIHZhcl8zMmR1MWcgPSBtYXRoLmNvcyhjaXJjbGVfYW5nbGUpICogcmFkaXVzCiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIHZhcl9xYXB3bGUgPSBtYXRoLnNpbihjaXJjbGVfYW5nbGUpICogcmFkaXVzCiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIHZhcl9hemU5ZnAgPSAyCmxvY2FsIHVmMm9rZSA9IDkKICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIHZhcl9xdTlvZjMgPSB0Z3Rfcm9vdC5Qb3NpdGlvbiArIFZlY3RvcjMubmV3KHgsIHksIHopCmxvY2FsIHB2cXVoYSA9IDgzCiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIHZhcl9qZXJhaXEgPSBDRnJhbWUubG9va0F0KGNpcmNsZV9wb3MsIHRndF9yb290LlBvc2l0aW9uKQogICAgICAgICAgICAgICAgICAgICAgICAKLS0gb3p3ZGFucnAKICAgICAgICAgICAgICAgICAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQotLSB6c3JhOTh6YwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzYWJsZV9waHlzaWNzKHN0YW5kX2NoYXIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmFibGVfd2FsbF9jbGlwcGluZyhzdGFuZF9jaGFyKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhbmRfcm9vdC5DRnJhbWUgPSBmYWNlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGFuZF9yb290LlZlbG9jaXR5ID0gVmVjdG9yMy56ZXJvCi0tIDlraXhuN3A0CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGFuZF9yb290LlJvdFZlbG9jaXR5ID0gVmVjdG9yMy56ZXJvCmxvY2FsIG0zdXdpYiA9IDczCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZCkKICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgIC0tIFZvaWQgc3BhbSBpZiBlbmFibGVkCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIF9HLnZvaWRfc3BhbV9tb2RlIHRoZW4KLS0gMW52azc2Y3IKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBlcmZvcm1fdm9pZF9zcGFtKCkKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgIApsb2NhbCBlcGN2M2QgPSAzMwogICAgICAgICAgICAgICAgICAgICAgICAtLSBFbnN1cmUgd2UgaGF2ZSBndW4KICAgICAgICAgICAgICAgICAgICAgICAgaWYgbm90IGhhc19ndW4oKSB0aGVuCmxvY2FsIDVmNHUwZiA9IDI0CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBub3QgaW50ZXJydXB0X2FuZF9idXlfZ3VuKCkgdGhlbgotLSA0NzF2MjBsaAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNwaXJhbF9zdG9wX2ZsYWcgPSB0cnVlCmxvY2FsIHZ2MDAzZCA9IDIzCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAotLSBkcWgxeWxkcgogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgIC0tIEJ1eSBhcm1vciBpZiBuZWVkZWQgZHVyaW5nIGNvbWJhdAogICAgICAgICAgICAgICAgICAgICAgICBpZiBzZXR0aW5ncy5hdXRvX2FybW9yIHRoZW4KbG9jYWwgMzdtNGJiID0gNzAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIHZhcl92em1ydnUgPSBsb2NhbF9wbGF5ZXI6RmluZEZpcnN0Q2hpbGQoJ0RhdGFGb2xkZXInKQotLSB5aXRmbWkwMwpsb2NhbCBlMzg4Z2wgPSAxNgogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgZGF0YV9mb2xkZXIgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIHZhcl85eHRvMHogPSBkYXRhX2ZvbGRlcjpGaW5kRmlyc3RDaGlsZCgnSW5mb3JtYXRpb24nKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIGluZm9fZm9sZGVyIHRoZW4KLS0gNmF4bnJycGkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgdmFyX2N2ZWtueSA9IGluZm9fZm9sZGVyOkZpbmRGaXJzdENoaWxkKCJBcm1vclNhdmUiKQpsb2NhbCAxbTBzNncgPSAxMwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBhcm1vcl9pbmZvIGFuZCAodG9udW1iZXIoYXJtb3JfaW5mby5WYWx1ZSkgb3IgMCkgPCBzZXR0aW5ncy5hcm1vcl90aHJlc2hvbGQgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnV5X2FybW9yKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVxdWlwX2d1bigpCi0tIGhycDIydGVkCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXNrLndhaXQoMC4yKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKLS0gNmZvYWRrc2gKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIG5vdCBzdGFuZF9jaGFyOkZpbmRGaXJzdENoaWxkT2ZDbGFzcygnVG9vbCcpIHRoZW4KbG9jYWwgb2hycXo0ID0gNzgKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVxdWlwX2d1bigpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXNrLndhaXQoMC4xKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgbm90IHN0YW5kX2NoYXI6RmluZEZpcnN0Q2hpbGRPZkNsYXNzKCdUb29sJykgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIG5vdCBpc19yZWxvYWRpbmcgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb19idXlfYW5kX3JlbG9hZCgpCi0tIG14cHdsZTZyCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCi0tIHI0Nzh1ZnZ6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFzay53YWl0KDAuMykKLS0gZ2psejl3cWIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBub3Qgc3RhbmRfY2hhcjpGaW5kRmlyc3RDaGlsZE9mQ2xhc3MoJ1Rvb2wnKSB0aGVuCi0tIGc2cXJwNjNtCmxvY2FsIHNxdG5ybiA9IDQ3CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCmxvY2FsIGFxMHBwYiA9IDQ2CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKbG9jYWwgeDhueXgwID0gNzIKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCi0tIHY5emN3Z2Y3CiAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICBpZiBuZWVkX3JlbG9hZCgpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvX2J1eV9hbmRfcmVsb2FkKCkKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCi0tIDNnM2Q0YzU1CiAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAtLSBTaG9vdCAtIE1BWElNVU0gU1BFRUQKICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgdmFyXzM1MGhxNyA9IHN0YW5kX2NoYXI6RmluZEZpcnN0Q2hpbGRPZkNsYXNzKCdUb29sJykKICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgdmFyX3Fyc3A0eCA9IHRhcmdldF9wbGF5ZXIuQ2hhcmFjdGVyIGFuZCAodGFyZ2V0X3BsYXllci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoJ0hlYWQnKSBvciB0YXJnZXRfcGxheWVyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgnVXBwZXJUb3JzbycpKQotLSBycXJpdDVzbQogICAgICAgICAgICAgICAgICAgICAgICBpZiB0b29sX2VxdWlwcGVkIGFuZCB0b29sX2VxdWlwcGVkOkZpbmRGaXJzdENoaWxkKCdIYW5kbGUnKSBhbmQgdGFyZ2V0X3BhcnQgYW5kIHRpY2soKSAtIGxhc3Rfc2hvb3RfdGltZSA+PSBzZXR0aW5ncy5zaG9vdF9kZWxheSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYXN0X3Nob290X3RpbWUgPSB0aWNrKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgdmFyX21sbnF6OSA9IHRvb2xfZXF1aXBwZWQuSGFuZGxlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCB2YXJfZHcyZDc2ID0gdG9vbF9oYW5kbGUuU2l6ZS5aIC8gMiArIDAuNQogICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgdmFyXzVyYnB2eiA9IHRvb2xfaGFuZGxlLlBvc2l0aW9uICsgKHRvb2xfaGFuZGxlLkNGcmFtZS5Mb29rVmVjdG9yICogYmFycmVsX2xlbmd0aCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgdmFyXzV0MXFmcyA9IHByZWRpY3RfcGxheWVyX3Bvc2l0aW9uKHRhcmdldF9wbGF5ZXIsIDAuMSkgb3IgdGFyZ2V0X3BhcnQuUG9zaXRpb24KICAgICAgICAgICAgICAgICAgICAgICAgICAgIApsb2NhbCBtdTYxejYgPSA4OAogICAgICAgICAgICAgICAgICAgICAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQpsb2NhbCAwZDVwc2cgPSA4NQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNhZmVfZmlyZV9zaG9vdCh0b29sX2hhbmRsZSwgZ3VuX3BvcywgdGFyZ2V0X3Bvc19wcmVkLCB0YXJnZXRfcGFydCwgVmVjdG9yMy5uZXcoMCwgMCwgLTEpKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kKQotLSBoNHhyeGQ2YwogICAgICAgICAgICAgICAgICAgICAgICBlbmQKbG9jYWwgdGlyNmdoID0gODMKICAgICAgICAgICAgICAgICAgICAgICAgCi0tIHFxdnhzM2tzCiAgICAgICAgICAgICAgICAgICAgICAgIHRhc2sud2FpdCgwLjAwMSkgLS0gTWluaW1hbCB3YWl0IGZvciBtYXhpbXVtIHNwZWVkCiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIAotLSB5YTA1MW53bwogICAgICAgICAgICB0YXNrLndhaXQoMC4xKQogICAgICAgIGVuZAotLSBiMzB0bDkwawogICAgICAgIAotLSB3YjN3a2k4ZQpsb2NhbCBpNGN5czEgPSA2MAogICAgICAgIC0tIENsZWFuIHVwIHdoZW4gS0Egc3RvcHMKICAgICAgICBzcGlyYWxfcnVubmluZyA9IGZhbHNlCi0tIHFibXJxNmUzCiAgICAgICAgc3BpcmFsX3N0b3BfZmxhZyA9IGZhbHNlCiAgICAgICAgX0cuc3RhbmRfbG9ja2VkID0gZmFsc2UKLS0gbGgza2t5ZTgKICAgICAgICBjdXJyZW50X2FjdGlvbiA9IG5pbAotLSBuYjlva2RiOQogICAgICAgIGN1cnJlbnRfY29tbWFuZGVyID0gbmlsCiAgICAgICAgX0cuYWN0aW9uX2luX3Byb2dyZXNzID0gZmFsc2UKICAgICAgICBpc19pbl9jb21iYXQgPSBmYWxzZQotLSB4cnc4c2VsdAogICAgICAgIHN0b3Bfc3BlY3RhdGluZygpCiAgICAgICAgbGFzdF9hY3Rpdml0eV90aW1lID0gdGljaygpCiAgICAgICAgX0cubG9vcGluZ19hY3Rpb24gPSBmYWxzZQogICAgICAgIF9HLmxhc3RfY29tbWFuZCA9IG5pbAotLSA4YW8wYzMydAogICAgZW5kKQplbmQKCi0tIENvbW1hbmQgcHJvY2Vzc2luZyBmdW5jdGlvbgpsb2NhbCB2YXJfOThwcDVoIHByb2Nlc3NfY29tbWFuZChjb21tYW5kZXIsIG1zZykKICAgIC0tIE5FVzogQ2hlY2sgcGVybWlzc2lvbnMgZmlyc3QKLS0gNXk0NndhY3QKICAgIGlmIG5vdCBjYW5fdXNlX2NvbW1hbmQoY29tbWFuZGVyKSB0aGVuCiAgICAgICAgcmV0dXJuCiAgICBlbmQKICAgCiAgICBsYXN0X2FjdGl2aXR5X3RpbWUgPSB0aWNrKCkKLS0gM3lzMGhiMXAKICAKLS0gZmZ1czJjZm8KICAgIGxvY2FsIHZhcl9kNzA0eXMgPSBzZXR0aW5ncy5wcmVmaXgKCiAgICAtLSBFbW90ZSBjaGFuZ2UgY29tbWFuZApsb2NhbCA1Z3kxa2kgPSAyMAogICAgaWYgbXNnOnN1YigxLCAjcHJlZml4ICsgMikgPT0gcHJlZml4IC4uICdlICcgYW5kIGNhbl91c2VfY29tbWFuZChjb21tYW5kZXIpIHRoZW4KICAgICAgICBsb2NhbCB2YXJfYmd3a2FzID0gbXNnOnN1YigjcHJlZml4ICsgMyk6Z3N1YignXiVzKiguLSklcyokJywgJyUxJyk6bG93ZXIoKQotLSAzNmpibmJhcwogICAgICAgIGlmIGVtb3Rlc1tlbW90ZV9uYW1lXSB0aGVuCi0tIDR2M3BrMjJ0CiAgICAgICAgICAgIEVNT1RFX0lEID0gZW1vdGVzW2Vtb3RlX25hbWVdCi0tIGNuaGw3amV4CiAgICAgICAgICAgIFN0b3BUcmFjaygpCmxvY2FsIGliaDR5YiA9IDU2CiAgICAgICAgICAgIHRhc2sud2FpdCgwLjEpCmxvY2FsIG94a2ZlbiA9IDE3CiAgICAgICAgICAgIHBsYXlFbW90ZSgpCiAgICAgICAgICAgIAogICAgICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgICAgICBsb2NhbCB2YXJfa3Bvejk5ID0gIkVtb3RlIGNoYW5nZWQgdG8gIiAuLiBlbW90ZV9uYW1lCiAgICAgICAgICAgICAgICBpZiB0ZXh0X2NoYXRfc2VydmljZS5DaGF0VmVyc2lvbiA9PSBFbnVtLkNoYXRWZXJzaW9uLlRleHRDaGF0U2VydmljZSB0aGVuCiAgICAgICAgICAgICAgICAgICAgbG9jYWwgdmFyX3FybHd5YyA9IHRleHRfY2hhdF9zZXJ2aWNlLlRleHRDaGFubmVsczpGaW5kRmlyc3RDaGlsZCgnUkJYR2VuZXJhbCcpCiAgICAgICAgICAgICAgICAgICAgaWYgY2hhbm5lbCB0aGVuIGNoYW5uZWw6U2VuZEFzeW5jKG1lc3NhZ2UpIGVuZAotLSBhOGZuY245Zwpsb2NhbCB6enN3YTMgPSA1CiAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgbG9jYWwgdmFyX3JucnZ3YyA9IHJlcGxpY2F0ZWRfc3RvcmFnZTpGaW5kRmlyc3RDaGlsZCgnRGVmYXVsdENoYXRTeXN0ZW1DaGF0RXZlbnRzJykKICAgICAgICAgICAgICAgICAgICBpZiBldmVudHMgYW5kIGV2ZW50czpGaW5kRmlyc3RDaGlsZCgnU2F5TWVzc2FnZVJlcXVlc3QnKSB0aGVuCi0tIDdrdW5qeTA4CmxvY2FsIHR1enozZCA9IDY1CiAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50cy5TYXlNZXNzYWdlUmVxdWVzdDpGaXJlU2VydmVyKG1lc3NhZ2UsICdBbGwnKQogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZCkKICAgICAgICBlbmQKICAgICAgICByZXR1cm4KICAgIGVuZAotLSA4cXppOWZ2bQogIAotLSA3NXd2ejBtMgogICAgLS0gU2F5IGNvbW1hbmQgKG1hc3RlciBvbmx5KQpsb2NhbCBxNm5vcm4gPSAxCiAgICBpZiBtc2c6c3ViKDEsICNwcmVmaXggKyA0KSA9PSBwcmVmaXggLi4gJ3NheSAnIGFuZCBjYW5fdXNlX2NvbW1hbmQoY29tbWFuZGVyLCAic2F5IikgdGhlbgogICAgICAgIGxvY2FsIHZhcl96b2s2eDAgPSBtc2c6c3ViKCNwcmVmaXggKyA1KQogICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkKbG9jYWwgOXkxM3F1ID0gOTUKICAgICAgICAgICAgaWYgdGV4dF9jaGF0X3NlcnZpY2UuQ2hhdFZlcnNpb24gPT0gRW51bS5DaGF0VmVyc2lvbi5UZXh0Q2hhdFNlcnZpY2UgdGhlbgogICAgICAgICAgICAgICAgbG9jYWwgdmFyX3c0eGJwNyA9IHRleHRfY2hhdF9zZXJ2aWNlLlRleHRDaGFubmVsczpGaW5kRmlyc3RDaGlsZCgnUkJYR2VuZXJhbCcpCiAgICAgICAgICAgICAgICBpZiBjaGFubmVsIHRoZW4gY2hhbm5lbDpTZW5kQXN5bmMobWVzc2FnZSkgZW5kCmxvY2FsIG5pajJvZiA9IDE2CiAgICAgICAgICAgIGVsc2UKLS0gdTBnbHJyYzYKbG9jYWwgMWJjM2cyID0gNTMKICAgICAgICAgICAgICAgIGxvY2FsIHZhcl9mazV3bjEgPSByZXBsaWNhdGVkX3N0b3JhZ2U6RmluZEZpcnN0Q2hpbGQoJ0RlZmF1bHRDaGF0U3lzdGVtQ2hhdEV2ZW50cycpCiAgICAgICAgICAgICAgICBpZiBldmVudHMgYW5kIGV2ZW50czpGaW5kRmlyc3RDaGlsZCgnU2F5TWVzc2FnZVJlcXVlc3QnKSB0aGVuCi0tIHlzcmR6bXdiCiAgICAgICAgICAgICAgICAgICAgZXZlbnRzLlNheU1lc3NhZ2VSZXF1ZXN0OkZpcmVTZXJ2ZXIobWVzc2FnZSwgJ0FsbCcpCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kCi0tIDZ3ZzA1eHN1CiAgICAgICAgZW5kKQogICAgICAgIHJldHVybgpsb2NhbCBvYnZ2b24gPSAzMQogICAgZW5kCiAgCi0tIHp5MjF0YXV1CiAgICAtLSBDb21tYW5kcyBsaXN0IChDSEFOR0VEIHRvIDMgbWVzc2FnZXMpCmxvY2FsIG9kcm10bCA9IDczCiAgICBpZiBtc2cgPT0gcHJlZml4IC4uICdjbWRzJyB0aGVuCi0tIGxqY2gwbXhjCiAgICAgICAgbG9jYWwgdmFyX3ViOHZzOCA9IHsKICAgICAgICAgICAgIkJhc2ljOiAiIC4uIHByZWZpeCAuLiAidnNoICh2YW5pc2gpLCAiIC4uIHByZWZpeCAuLiAiZiAodW52YW5pc2gpLCAiIC4uIHByZWZpeCAuLiAidnMgKHZvaWQgc3BhbSksICIgLi4gcHJlZml4IC4uICJ1bnZzIChzdG9wIHNwYW0pLCAiIC4uIHByZWZpeCAuLiAic3RvcCAoc3RvcCBhbGwpIiwKLS0gZHk1cGMyYjkKICAgICAgICAgICAgIkNvbWJhdDogIiAuLiBwcmVmaXggLi4gImsgcGxyIChraWxsKSwgIiAuLiBwcmVmaXggLi4gImxrIHBsciAobG9vcCBraWxsKSwgIiAuLiBwcmVmaXggLi4gInNrIHBsciAoc3RvbXApLCAiIC4uIHByZWZpeCAuLiAibHNrIHBsciAobG9vcCBzdG9tcCksICIgLi4gcHJlZml4IC4uICJiIHBsciAoYnJpbmcpLCAiIC4uIHByZWZpeCAuLiAic2t5IHBsciAoc2t5IGRyb3ApLCAiIC4uIHByZWZpeCAuLiAia2EgKGtpbGwgYXVyYSkiLAotLSBpYmIwZGY4dgogICAgICAgICAgICAiU3lzdGVtOiAiIC4uIHByZWZpeCAuLiAiY2cgZ3VuLCAiIC4uIHByZWZpeCAuLiAiYS91bmEgKGF1dG8gYXJtb3IpLCAiIC4uIHByZWZpeCAuLiAiYXMvdW5hcyAoYXV0byBzYXZlKSwgIiAuLiBwcmVmaXggLi4gImMvdW5jIChjYXNoIGF1cmEpLCAiIC4uIHByZWZpeCAuLiAicmUgKGZvcmNlIHJlc2V0KSwgIiAuLiBwcmVmaXggLi4gInJlaiAocmVqb2luKSwgIiAuLiBwcmVmaXggLi4gImUgZW1vdGUsICIgLi4gcHJlZml4IC4uICJtL3VubSAoYXV0byBtYXNrKSwgIiAuLiBwcmVmaXggLi4gInNwaXQvdW5zcGl0IChhdXRvIHNwaXQpIgpsb2NhbCAwZW53ZnUgPSA4NQogICAgICAgIH0KICAgICAgCi0tIDdpZTlrOGJyCiAgICAgICAgc2FmZV9zcGF3bihmdW5jdGlvbigpCiAgICAgICAgICAgIGZvciBpLCBjbWRfbXNnIGluIGlwYWlycyhjb21tYW5kc19ncm91cHMpIGRvCiAgICAgICAgICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgICAgICAgICAgaWYgdGV4dF9jaGF0X3NlcnZpY2UuQ2hhdFZlcnNpb24gPT0gRW51bS5DaGF0VmVyc2lvbi5UZXh0Q2hhdFNlcnZpY2UgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCB2YXJfN3h0ejU4ID0gdGV4dF9jaGF0X3NlcnZpY2UuVGV4dENoYW5uZWxzOkZpbmRGaXJzdENoaWxkKCdSQlhHZW5lcmFsJykKICAgICAgICAgICAgICAgICAgICAgICAgaWYgY2hhbm5lbCB0aGVuIGNoYW5uZWw6U2VuZEFzeW5jKGNtZF9tc2cpIGVuZAotLSA3dnBjYzk0cwogICAgICAgICAgICAgICAgICAgIGVsc2UKLS0gZDYwMzZmcmwKICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgdmFyX3Y3OXJ2NiA9IHJlcGxpY2F0ZWRfc3RvcmFnZTpGaW5kRmlyc3RDaGlsZCgnRGVmYXVsdENoYXRTeXN0ZW1DaGF0RXZlbnRzJykKICAgICAgICAgICAgICAgICAgICAgICAgaWYgZXZlbnRzIGFuZCBldmVudHM6RmluZEZpcnN0Q2hpbGQoJ1NheU1lc3NhZ2VSZXF1ZXN0JykgdGhlbgpsb2NhbCA1bTI5YWkgPSA2OQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnRzLlNheU1lc3NhZ2VSZXF1ZXN0OkZpcmVTZXJ2ZXIoY21kX21zZywgJ0FsbCcpCi0tIHd6cGJjazZ2CiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGVuZApsb2NhbCBmYzU3aHogPSA3NwogICAgICAgICAgICAgICAgZW5kKQogICAgICAgICAgICAgIAotLSB2dzlqdmNsMQogICAgICAgICAgICAgICAgaWYgaSA8ICNjb21tYW5kc19ncm91cHMgdGhlbiB0YXNrLndhaXQoMSkgZW5kCi0tIHF4NzZod2pmCmxvY2FsIGxqbWkzeCA9IDg3CiAgICAgICAgICAgIGVuZAotLSAwd3k0NzAyOQogICAgICAgIGVuZCkKbG9jYWwgbTI0djNzID0gNjUKICAgICAgCmxvY2FsIDRrNTh5ZCA9IDQzCiAgICAgICAgcmV0dXJuCiAgICBlbmQKbG9jYWwgcG4zYnU3ID0gNzMKICAKLS0gcWpzOTBhYmEKICAgIC0tIFBvc2l0aW9uIGNvbW1hbmRzCiAgICBpZiBtc2cgPT0gcHJlZml4IC4uICdwb3MgbCcgdGhlbgotLSA1ZG1obXNpNAogICAgICAgIG9mZnNldF9tb2RlID0gJ2wnCiAgICBlbHNlaWYgbXNnID09IHByZWZpeCAuLiAncG9zIHInIHRoZW4KLS0gYmNvbnYwbXIKbG9jYWwgMDA4M2xqID0gMTMKICAgICAgICBvZmZzZXRfbW9kZSA9ICdyJwogICAgZWxzZWlmIG1zZyA9PSBwcmVmaXggLi4gJ3BvcyBtJyB0aGVuCiAgICAgICAgb2Zmc2V0X21vZGUgPSAnbScKICAKLS0gdjloamNyOGsKICAgIC0tIFZvaWQgY29tbWFuZHMgLSBDSEFOR0VEIHRvIG9ubHkgLnZzaCBhbmQgLmYKICAgIGVsc2VpZiBtc2cgPT0gcHJlZml4IC4uICd2c2gnIHRoZW4KICAgICAgICBfRy52b2lkX21vZGUgPSB0cnVlCiAgICAgICAgX0cucGVyc2lzdGVudF9kYXRhLnZvaWRfbW9kZSA9IHRydWUKICAgIGVsc2VpZiBtc2cgPT0gcHJlZml4IC4uICdmJyB0aGVuCiAgICAgICAgX0cudm9pZF9tb2RlID0gZmFsc2UKICAgICAgICBfRy5wZXJzaXN0ZW50X2RhdGEudm9pZF9tb2RlID0gZmFsc2UKICAKICAgIC0tIFZvaWQtc3BhbSB0b2dnbGUgKG1hc3RlciBvbmx5KQogICAgZWxzZWlmIG1zZyA9PSBwcmVmaXggLi4gJ3ZzJyBhbmQgY2FuX3VzZV9jb21tYW5kKGNvbW1hbmRlciwgInZzIikgdGhlbgogICAgICAgIF9HLnZvaWRfc3BhbV9tb2RlID0gdHJ1ZQotLSBvbmg4MjdzbAogICAgICAgIF9HLnBlcnNpc3RlbnRfZGF0YS52b2lkX3NwYW1fbW9kZSA9IHRydWUKLS0gZThwYnI2NmMKICAgIGVsc2VpZiBtc2cgPT0gcHJlZml4IC4uICd1bnZzJyBhbmQgY2FuX3VzZV9jb21tYW5kKGNvbW1hbmRlciwgInZzIikgdGhlbgogICAgICAgIF9HLnZvaWRfc3BhbV9tb2RlID0gZmFsc2UKICAgICAgICBfRy5wZXJzaXN0ZW50X2RhdGEudm9pZF9zcGFtX21vZGUgPSBmYWxzZQotLSBwYXEwMW9yagogIApsb2NhbCBnZnRucTkgPSAwCiAgICAtLSBTdG9wIGNvbW1hbmQKICAgIGVsc2VpZiBtc2cgPT0gcHJlZml4IC4uICdzdG9wJyB0aGVuCiAgICAgICAgb3JiaXRpbmcsIHRhcmdldCwgc25hcF9iYWNrLCBzcGlyYWxfc3RvcF9mbGFnID0gZmFsc2UsIG5pbCwgdHJ1ZSwgdHJ1ZQogICAgICAgIGN1cnJlbnRfYWN0aW9uID0gbmlsCiAgICAgICAgY3VycmVudF9jb21tYW5kZXIgPSBuaWwKICAgICAgICBfRy5hY3Rpb25faW5fcHJvZ3Jlc3MgPSBmYWxzZQotLSB3YW14NmtueQogICAgICAgIGlzX2luX2NvbWJhdCA9IGZhbHNlCmxvY2FsIDJjbDFmeSA9IDQ3CiAgICAgICAgc3RvcF9zcGVjdGF0aW5nKCkKICAgICAgICBfRy5wcm90ZWN0aW9uX3F1ZXVlID0ge30KLS0geGNuNG1qZHcKbG9jYWwgbnQ3OWU3ID0gNDEKICAgICAgICAtLSBjbGVhciBsb29waW5nIGZsYWdzCiAgICAgICAgX0cubG9vcGluZ19hY3Rpb24gPSBmYWxzZQotLSA2bHo3anMwZQogICAgICAgIF9HLmxhc3RfY29tbWFuZCA9IG5pbAotLSBmbzByd3pndgogIAogICAgLS0gUmVzZXQgY29tbWFuZAogICAgZWxzZWlmIG1zZyA9PSBwcmVmaXggLi4gJ3JlJyB0aGVuCmxvY2FsIGk5MGs4diA9IDYyCiAgICAgICAgZm9yY2VfcmVzZXQoKQotLSA5OGN2Y2N0egogICAgICAgIHJldHVybgotLSB3d2oydTgxegogIAogICAgLS0gUmVqb2luIGNvbW1hbmQgKG1hc3RlciBvbmx5KQogICAgZWxzZWlmIG1zZyA9PSBwcmVmaXggLi4gJ3JlaicgYW5kIGNhbl91c2VfY29tbWFuZChjb21tYW5kZXIsICJyZWoiKSB0aGVuCiAgICAgICAgcmVqb2luX3NlcnZlcigpCiAgICAgICAgcmV0dXJuCmxvY2FsIHZvOTJsciA9IDQ4CiAgCiAgICAtLSBUZWFtIGNvbW1hbmRzIChNYXN0ZXIgb25seSkKbG9jYWwgZHBrcGJmID0gMTQKICAgIGVsc2VpZiBtc2c6c3ViKDEsICNwcmVmaXggKyAyKSA9PSBwcmVmaXggLi4gJ3QgJyBhbmQgY2FuX3VzZV9jb21tYW5kKGNvbW1hbmRlciwgInRlYW0iKSB0aGVuCiAgICAgICAgbG9jYWwgdmFyX3plbHAyNCA9IG1zZzpzdWIoI3ByZWZpeCArIDMpOmdzdWIoJ14lcyooLi0pJXMqJCcsICclMScpCmxvY2FsIHc4eWlmNCA9IDk0CiAgICAgICAgbG9jYWwgdmFyX3g2Y202MiwgbmFtZSA9IGFkZF90ZWFtZWRfcGxheWVyKHRhcmdldF9uYW1lKQotLSBuZG94Z210bQogICAgICAgIGlmIHN1Y2Nlc3MgdGhlbgogICAgICAgICAgICBhbm5vdW5jZV9jaGFuZ2UoInRlYW0iLCBuYW1lLCB0cnVlKQotLSBvZXZva2h3Nwpsb2NhbCB6b2hueTYgPSA0MgogICAgICAgIGVuZAogICAgZWxzZWlmIG1zZzpzdWIoMSwgI3ByZWZpeCArIDQpID09IHByZWZpeCAuLiAndW50ICcgYW5kIGNhbl91c2VfY29tbWFuZChjb21tYW5kZXIsICJ0ZWFtIikgdGhlbgotLSBhbXRtbmJtcAogICAgICAgIGxvY2FsIHZhcl9mN25wc3UgPSBtc2c6c3ViKCNwcmVmaXggKyA1KTpnc3ViKCdeJXMqKC4tKSVzKiQnLCAnJTEnKQogICAgICAgIGlmIHRhcmdldF9uYW1lOmxvd2VyKCkgPT0gJ2FsbCcgdGhlbgotLSByNGdibjZ0dgogICAgICAgICAgICBfRy50ZWFtZWRfcGxheWVycyA9IHt9CiAgICAgICAgICAgIF9HLnBlcnNpc3RlbnRfZGF0YS50ZWFtZWRfcGxheWVycyA9IHt9CmxvY2FsIHQyZzlobyA9IDEzCiAgICAgICAgICAgIGFubm91bmNlX2NoYW5nZSgiYWxsIiwgInRlYW1lZCBwbGF5ZXJzIiwgZmFsc2UpCi0tIHcyNGUyY2F2CmxvY2FsIHlwd2N3eiA9IDI3CiAgICAgICAgZWxzZQogICAgICAgICAgICBsb2NhbCB2YXJfdGJ3ZnR3LCBuYW1lID0gcmVtb3ZlX3RlYW1lZF9wbGF5ZXIodGFyZ2V0X25hbWUpCiAgICAgICAgICAgIGlmIHN1Y2Nlc3MgdGhlbgpsb2NhbCBzOHV6bmIgPSAzNgogICAgICAgICAgICAgICAgYW5ub3VuY2VfY2hhbmdlKCJ0ZWFtIiwgbmFtZSwgZmFsc2UpCiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAotLSA1d3Z5dGFxaAogIAogICAgLS0gV2hpdGVsaXN0IGNvbW1hbmRzIChNYXN0ZXIgb25seSkKICAgIGVsc2VpZiBtc2c6c3ViKDEsICNwcmVmaXggKyAzKSA9PSBwcmVmaXggLi4gJ3dsICcgYW5kIGNhbl91c2VfY29tbWFuZChjb21tYW5kZXIsICJ3aGl0ZWxpc3QiKSB0aGVuCi0tIG41dXJ1cjE3CiAgICAgICAgbG9jYWwgdmFyX3VtM2RvNCA9IG1zZzpzdWIoI3ByZWZpeCArIDQpOmdzdWIoJ14lcyooLi0pJXMqJCcsICclMScpCi0tIGZqdHkzOGUwCiAgICAgICAgbG9jYWwgdmFyX3JlZ2JwOCwgbmFtZSA9IGFkZF93aGl0ZWxpc3RlZF9wbGF5ZXIodGFyZ2V0X25hbWUpCmxvY2FsIDN5aTFvaSA9IDc0CiAgICAgICAgaWYgc3VjY2VzcyB0aGVuCiAgICAgICAgICAgIGFubm91bmNlX2NoYW5nZSgid2hpdGVsaXN0IiwgbmFtZSwgdHJ1ZSkKICAgICAgICBlbmQKbG9jYWwgd3Fmd3o2ID0gODEKICAgIGVsc2VpZiBtc2c6c3ViKDEsICNwcmVmaXggKyA1KSA9PSBwcmVmaXggLi4gJ3Vud2wgJyBhbmQgY2FuX3VzZV9jb21tYW5kKGNvbW1hbmRlciwgIndoaXRlbGlzdCIpIHRoZW4KLS0gMXFreGs1bXMKICAgICAgICBsb2NhbCB2YXJfMzR4YWNsID0gbXNnOnN1YigjcHJlZml4ICsgNik6Z3N1YignXiVzKiguLSklcyokJywgJyUxJykKLS0gbmJ3aDl5aDAKICAgICAgICBpZiB0YXJnZXRfbmFtZTpsb3dlcigpID09ICdhbGwnIHRoZW4KbG9jYWwgdWludWN1ID0gOQogICAgICAgICAgICBfRy53aGl0ZWxpc3RlZF9wbGF5ZXJzID0ge30KICAgICAgICAgICAgX0cucGVyc2lzdGVudF9kYXRhLndoaXRlbGlzdGVkX3BsYXllcnMgPSB7fQotLSB6YzZwb3JmZwogICAgICAgICAgICBhbm5vdW5jZV9jaGFuZ2UoImFsbCIsICJ3aGl0ZWxpc3RlZCBwbGF5ZXJzIiwgZmFsc2UpCiAgICAgICAgZWxzZQogICAgICAgICAgICBsb2NhbCB2YXJfNjRxNnVvLCBuYW1lID0gcmVtb3ZlX3doaXRlbGlzdGVkX3BsYXllcih0YXJnZXRfbmFtZSkKICAgICAgICAgICAgaWYgc3VjY2VzcyB0aGVuCiAgICAgICAgICAgICAgICBhbm5vdW5jZV9jaGFuZ2UoIndoaXRlbGlzdCIsIG5hbWUsIGZhbHNlKQotLSB5Z2pndGhoNAogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAKICAgIC0tIEZvbGxvdyBvdmVycmlkZSAobWFzdGVyIG9ubHkpCiAgICBlbHNlaWYgbXNnOnN1YigxLCAjcHJlZml4ICsgMikgPT0gcHJlZml4IC4uICdzICcgYW5kIGNhbl91c2VfY29tbWFuZChjb21tYW5kZXIsICJmb2xsb3dfb3ZlcnJpZGUiKSB0aGVuCiAgICAgICAgbG9jYWwgdmFyX2hhNjU3MiA9IG1zZzpzdWIoI3ByZWZpeCArIDMpOmdzdWIoJ14lcyooLi0pJXMqJCcsICclMScpCiAgICAgICAgaWYgdGFyZ2V0X25hbWU6bG93ZXIoKSA9PSAnbWFzdGVyJyB0aGVuCiAgICAgICAgICAgIC0tIHB1c2ggY3VycmVudCBmb2xsb3cgaW50byBoaXN0b3J5Ci0tIDVqZHI1cXlxCmxvY2FsIHlpNDZzNSA9IDY4CiAgICAgICAgICAgIHRhYmxlLmluc2VydChmb2xsb3dfaGlzdG9yeSwgZm9sbG93X292ZXJyaWRlKQogICAgICAgICAgICBmb2xsb3dfb3ZlcnJpZGUgPSBuaWwKLS0gZXpoenVucTEKICAgICAgICAgICAgX0cucGVyc2lzdGVudF9kYXRhLmZvbGxvd19vdmVycmlkZSA9IG5pbApsb2NhbCBpenVtZnMgPSA2NwogICAgICAgIGVsc2UKICAgICAgICAgICAgbG9jYWwgdmFyX2t4ajJ6NCA9IGZpbmRfcGFydGlhbF9wbGF5ZXIodGFyZ2V0X25hbWUpCi0tIDJkeTVyajg3CmxvY2FsIHByem9sOSA9IDgwCiAgICAgICAgICAgIGlmIHAgdGhlbgogICAgICAgICAgICAgICAgLS0gcHVzaCBjdXJyZW50IGZvbGxvdyBvbnRvIGhpc3RvcnkKICAgICAgICAgICAgICAgIHRhYmxlLmluc2VydChmb2xsb3dfaGlzdG9yeSwgZm9sbG93X292ZXJyaWRlKQpsb2NhbCBzMmxpNmsgPSA2MgogICAgICAgICAgICAgICAgZm9sbG93X292ZXJyaWRlID0gcAotLSBqMDh0NmxoZQogICAgICAgICAgICAgICAgX0cucGVyc2lzdGVudF9kYXRhLmZvbGxvd19vdmVycmlkZSA9IHAKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgCiAgICAtLSBDYXNoIEF1cmEgY29tbWFuZHMgKENIQU5HRUQgdG8gb25seSAuYyBhbmQgLnVuYykKbG9jYWwgeXkwNDN0ID0gNwogICAgZWxzZWlmIG1zZyA9PSBwcmVmaXggLi4gJ2MnIGFuZCBjYW5fdXNlX2NvbW1hbmQoY29tbWFuZGVyLCAiY2FzaF9hdXJhIikgdGhlbgotLSB4czRjNm84dgogICAgICAgIGNhc2hfYXVyYV9lbmFibGVkID0gdHJ1ZQotLSA4OG8yYzk1OAogICAgZWxzZWlmIG1zZyA9PSBwcmVmaXggLi4gJ3VuYycgYW5kIGNhbl91c2VfY29tbWFuZChjb21tYW5kZXIsICJjYXNoX2F1cmEiKSB0aGVuCi0tIHk2c2IzaW82CiAgICAgICAgY2FzaF9hdXJhX2VuYWJsZWQgPSBmYWxzZQogIAogICAgLS0gQ2hhbmdlIGd1biBjb21tYW5kCmxvY2FsIDRsMHBjYiA9IDM3CiAgICBlbHNlaWYgbXNnOnN1YigxLCAjcHJlZml4ICsgMykgPT0gcHJlZml4IC4uICdjZyAnIGFuZCBjYW5fdXNlX2NvbW1hbmQoY29tbWFuZGVyKSB0aGVuCmxvY2FsIGQ5cTgxcyA9IDc5CiAgICAgICAgbG9jYWwgdmFyXzI5aXBxdCA9IG1zZzpzdWIoI3ByZWZpeCArIDQpOmdzdWIoJ14lcyooLi0pJXMqJCcsICclMScpOmxvd2VyKCkKICAgICAgICBsb2NhbCB2YXJfOGQwcWZ4ID0gZmFsc2UKLS0gbHN5YzhzaXgKbG9jYWwgM3IwZDd5ID0gOAogICAgICAKLS0gMzg3cG01M2oKICAgICAgICBmb3Iga2V5LCBfIGluIHBhaXJzKGd1bl9jb25maWdzKSBkbwotLSBuaG05djBpOAogICAgICAgICAgICBpZiBrZXk6bG93ZXIoKTpmaW5kKGd1bl9uYW1lLCAxLCB0cnVlKSB0aGVuCmxvY2FsIDlwZWFkZSA9IDEwCiAgICAgICAgICAgICAgICBjdXJyZW50X2d1bl90eXBlID0ga2V5CiAgICAgICAgICAgICAgICBfRy5wZXJzaXN0ZW50X2RhdGEuZ3VuX3R5cGUgPSBrZXkKICAgICAgICAgICAgICAgIHBjYWxsKG1vbml0b3JfZXF1aXBfcmVzdHJpY3Rpb25zKQogICAgICAgICAgICAgICAgZm91bmQgPSB0cnVlCi0tIDZqbzA2dTd4CiAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgICAgICAgICAgbG9jYWwgdmFyX3lwaWp4ZyA9ICJHdW4gY2hhbmdlZCB0byAiIC4uIGtleQotLSBkZTFldnQ5MApsb2NhbCByMXFhNDIgPSA4MQogICAgICAgICAgICAgICAgICAgIGlmIHRleHRfY2hhdF9zZXJ2aWNlLkNoYXRWZXJzaW9uID09IEVudW0uQ2hhdFZlcnNpb24uVGV4dENoYXRTZXJ2aWNlIHRoZW4KLS0gdmY4YTBkZHYKICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgdmFyX3kxc2tuNyA9IHRleHRfY2hhdF9zZXJ2aWNlLlRleHRDaGFubmVsczpGaW5kRmlyc3RDaGlsZCgnUkJYR2VuZXJhbCcpCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIGNoYW5uZWwgdGhlbiBjaGFubmVsOlNlbmRBc3luYyhtZXNzYWdlKSBlbmQKLS0gcWh1N3J5eDkKICAgICAgICAgICAgICAgICAgICBlbHNlCi0tIHF6b3IyeXozCmxvY2FsIDd5MWMxaCA9IDM1CiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIHZhcl9ndDQzNW8gPSByZXBsaWNhdGVkX3N0b3JhZ2U6RmluZEZpcnN0Q2hpbGQoJ0RlZmF1bHRDaGF0U3lzdGVtQ2hhdEV2ZW50cycpCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIGV2ZW50cyBhbmQgZXZlbnRzOkZpbmRGaXJzdENoaWxkKCdTYXlNZXNzYWdlUmVxdWVzdCcpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50cy5TYXlNZXNzYWdlUmVxdWVzdDpGaXJlU2VydmVyKG1lc3NhZ2UsICdBbGwnKQogICAgICAgICAgICAgICAgICAgICAgICBlbmQKLS0gamZ5aWdtcDIKICAgICAgICAgICAgICAgICAgICBlbmQKLS0gM3FiN2x5MzEKICAgICAgICAgICAgICAgIGVuZCkKICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIGJyZWFrCiAgICAgICAgICAgIGVuZAotLSA5MDV4em42ZQogICAgICAgIGVuZAogIAogICAgLS0gQXV0byBhcm1vciBjb21tYW5kcyAobWFzdGVyIG9ubHkpCiAgICBlbHNlaWYgbXNnID09IHByZWZpeCAuLiAnYScgYW5kIGNhbl91c2VfY29tbWFuZChjb21tYW5kZXIsICJhdXRvX2FybW9yIikgdGhlbgotLSByNm13and1bQogICAgICAgIHNldHRpbmdzLmF1dG9fYXJtb3IgPSB0cnVlCiAgICBlbHNlaWYgbXNnID09IHByZWZpeCAuLiAndW5hJyBhbmQgY2FuX3VzZV9jb21tYW5kKGNvbW1hbmRlciwgImF1dG9fYXJtb3IiKSB0aGVuCmxvY2FsIHBmZTJnZyA9IDk1CiAgICAgICAgc2V0dGluZ3MuYXV0b19hcm1vciA9IGZhbHNlCiAgICAgICAKLS0gMmcycWJ6ZGUKICAgIC0tIEF1dG8gc2F2ZSBjb21tYW5kcwpsb2NhbCBxMGp3ZmcgPSAxMAogICAgZWxzZWlmIG1zZyA9PSBwcmVmaXggLi4gJ2FzJyBhbmQgY2FuX3VzZV9jb21tYW5kKGNvbW1hbmRlcikgdGhlbgogICAgICAgIF9HLnBlcnNpc3RlbnRfZGF0YS5hdXRvX3NhdmUgPSB0cnVlCi0tIDE3M3Y1dm5hCiAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAgICBsb2NhbCB2YXJfdmVmcWxvID0gIkF1dG8tc2F2ZSBlbmFibGVkIgogICAgICAgICAgICBpZiB0ZXh0X2NoYXRfc2VydmljZS5DaGF0VmVyc2lvbiA9PSBFbnVtLkNoYXRWZXJzaW9uLlRleHRDaGF0U2VydmljZSB0aGVuCmxvY2FsIGVkMHo2bSA9IDMzCiAgICAgICAgICAgICAgICBsb2NhbCB2YXJfbmJ4eHFyID0gdGV4dF9jaGF0X3NlcnZpY2UuVGV4dENoYW5uZWxzOkZpbmRGaXJzdENoaWxkKCdSQlhHZW5lcmFsJyk7IGlmIGNoYW5uZWwgdGhlbiBjaGFubmVsOlNlbmRBc3luYyhtZXNzYWdlKSBlbmQKICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgbG9jYWwgdmFyX2w0djF2OSA9IHJlcGxpY2F0ZWRfc3RvcmFnZTpGaW5kRmlyc3RDaGlsZCgnRGVmYXVsdENoYXRTeXN0ZW1DaGF0RXZlbnRzJykKICAgICAgICAgICAgICAgIGlmIGV2ZW50cyBhbmQgZXZlbnRzOkZpbmRGaXJzdENoaWxkKCdTYXlNZXNzYWdlUmVxdWVzdCcpIHRoZW4KICAgICAgICAgICAgICAgICAgICBldmVudHMuU2F5TWVzc2FnZVJlcXVlc3Q6RmlyZVNlcnZlcihtZXNzYWdlLCAnQWxsJykKbG9jYWwgaWw1MngyID0gOTcKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQKICAgICAgICBlbmQpCmxvY2FsIGJmaGMxcCA9IDc1CiAgICBlbHNlaWYgbXNnID09IHByZWZpeCAuLiAndW5hcycgYW5kIGNhbl91c2VfY29tbWFuZChjb21tYW5kZXIpIHRoZW4KICAgICAgICBfRy5wZXJzaXN0ZW50X2RhdGEuYXV0b19zYXZlID0gZmFsc2UKLS0gYWw0c2YyZjIKICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgIGxvY2FsIHZhcl9naDhhOHggPSAiQXV0by1zYXZlIGRpc2FibGVkIgotLSB3dDlzcTZlMQogICAgICAgICAgICBpZiB0ZXh0X2NoYXRfc2VydmljZS5DaGF0VmVyc2lvbiA9PSBFbnVtLkNoYXRWZXJzaW9uLlRleHRDaGF0U2VydmljZSB0aGVuCi0tIHlvNHNmeHh0CiAgICAgICAgICAgICAgICBsb2NhbCB2YXJfaW5ldWZqID0gdGV4dF9jaGF0X3NlcnZpY2UuVGV4dENoYW5uZWxzOkZpbmRGaXJzdENoaWxkKCdSQlhHZW5lcmFsJyk7IGlmIGNoYW5uZWwgdGhlbiBjaGFubmVsOlNlbmRBc3luYyhtZXNzYWdlKSBlbmQKICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgbG9jYWwgdmFyXzQ0cG1udyA9IHJlcGxpY2F0ZWRfc3RvcmFnZTpGaW5kRmlyc3RDaGlsZCgnRGVmYXVsdENoYXRTeXN0ZW1DaGF0RXZlbnRzJykKICAgICAgICAgICAgICAgIGlmIGV2ZW50cyBhbmQgZXZlbnRzOkZpbmRGaXJzdENoaWxkKCdTYXlNZXNzYWdlUmVxdWVzdCcpIHRoZW4KICAgICAgICAgICAgICAgICAgICBldmVudHMuU2F5TWVzc2FnZVJlcXVlc3Q6RmlyZVNlcnZlcihtZXNzYWdlLCAnQWxsJykKICAgICAgICAgICAgICAgIGVuZApsb2NhbCAzYXpscXMgPSAxMAogICAgICAgICAgICBlbmQKLS0gZ2JlbGpxcDUKICAgICAgICBlbmQpCi0tIGdwNXViMWxsCgogICAgLS0gTkVXOiBBdXRvIE1hc2sgQ29tbWFuZHMgKE1hc3RlciBvbmx5KQpsb2NhbCA1amR2ZWwgPSA4MwogICAgZWxzZWlmIG1zZyA9PSBwcmVmaXggLi4gJ20nIGFuZCBjb21tYW5kZXIgPT0gX0cubWFzdGVyIHRoZW4KLS0gdTBsNmFiNm4KICAgICAgICBfRy5wZXJzaXN0ZW50X2RhdGEuYXV0b19tYXNrID0gdHJ1ZQotLSBwZ3JydmU1aQogICAgICAgIHNhZmVfc3Bhd24oZnVuY3Rpb24oKQogICAgICAgICAgICB0b2dnbGVfbWFza19zZXF1ZW5jZSgpCi0tIGt5ZWNsYTd1CiAgICAgICAgZW5kKQogICAgZWxzZWlmIG1zZyA9PSBwcmVmaXggLi4gJ3VubScgYW5kIGNvbW1hbmRlciA9PSBfRy5tYXN0ZXIgdGhlbgogICAgICAgIF9HLnBlcnNpc3RlbnRfZGF0YS5hdXRvX21hc2sgPSBmYWxzZQogICAgICAgIHNhZmVfc3Bhd24oZnVuY3Rpb24oKQogICAgICAgICAgICB0b2dnbGVfbWFza19zZXF1ZW5jZSgpCiAgICAgICAgZW5kKQoKbG9jYWwgM3djajB6ID0gOAogICAgLS0gTkVXOiBBdXRvIFNwaXQgQ29tbWFuZHMgKE1hc3RlciBvbmx5KQogICAgZWxzZWlmIG1zZyA9PSBwcmVmaXggLi4gJ3NwaXQnIGFuZCBjb21tYW5kZXIgPT0gX0cubWFzdGVyIHRoZW4KICAgICAgICBfRy5wZXJzaXN0ZW50X2RhdGEuYXV0b19zcGl0ID0gdHJ1ZQogICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkKbG9jYWwgYWx1dDVqID0gMzcKICAgICAgICAgICAgbG9jYWwgdmFyX253Z3RkZCA9ICJBdXRvIHNwaXQgZW5hYmxlZCIKICAgICAgICAgICAgaWYgdGV4dF9jaGF0X3NlcnZpY2UuQ2hhdFZlcnNpb24gPT0gRW51bS5DaGF0VmVyc2lvbi5UZXh0Q2hhdFNlcnZpY2UgdGhlbgpsb2NhbCBoOWk1YXkgPSA0MwogICAgICAgICAgICAgICAgbG9jYWwgdmFyX2o4dm90eCA9IHRleHRfY2hhdF9zZXJ2aWNlLlRleHRDaGFubmVsczpGaW5kRmlyc3RDaGlsZCgnUkJYR2VuZXJhbCcpOyBpZiBjaGFubmVsIHRoZW4gY2hhbm5lbDpTZW5kQXN5bmMobWVzc2FnZSkgZW5kCiAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgIGxvY2FsIHZhcl94NnJ0YXEgPSByZXBsaWNhdGVkX3N0b3JhZ2U6RmluZEZpcnN0Q2hpbGQoJ0RlZmF1bHRDaGF0U3lzdGVtQ2hhdEV2ZW50cycpCmxvY2FsIHo1cGxtNCA9IDkKICAgICAgICAgICAgICAgIGlmIGV2ZW50cyBhbmQgZXZlbnRzOkZpbmRGaXJzdENoaWxkKCdTYXlNZXNzYWdlUmVxdWVzdCcpIHRoZW4KICAgICAgICAgICAgICAgICAgICBldmVudHMuU2F5TWVzc2FnZVJlcXVlc3Q6RmlyZVNlcnZlcihtZXNzYWdlLCAnQWxsJykKLS0gMzQ4cHFycTcKICAgICAgICAgICAgICAgIGVuZAotLSBja2kzOWM1Nwpsb2NhbCBoZHBlejQgPSAzNQogICAgICAgICAgICBlbmQKLS0gOWZsN2txaHQKbG9jYWwgYm5jZjBxID0gNDAKICAgICAgICBlbmQpCmxvY2FsIHJteTg0cyA9IDY2CiAgICBlbHNlaWYgbXNnID09IHByZWZpeCAuLiAndW5zcGl0JyBhbmQgY29tbWFuZGVyID09IF9HLm1hc3RlciB0aGVuCiAgICAgICAgX0cucGVyc2lzdGVudF9kYXRhLmF1dG9fc3BpdCA9IGZhbHNlCi0tIHo1ZGd4ZmV0CiAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQpsb2NhbCA4eTdvZnMgPSAyNgogICAgICAgICAgICBsb2NhbCB2YXJfeWNjMXF3ID0gIkF1dG8gc3BpdCBkaXNhYmxlZCIKLS0gbXh6eDFlZzYKICAgICAgICAgICAgaWYgdGV4dF9jaGF0X3NlcnZpY2UuQ2hhdFZlcnNpb24gPT0gRW51bS5DaGF0VmVyc2lvbi5UZXh0Q2hhdFNlcnZpY2UgdGhlbgotLSAwM2V2dmNrcQogICAgICAgICAgICAgICAgbG9jYWwgdmFyXzZ5c3YwYiA9IHRleHRfY2hhdF9zZXJ2aWNlLlRleHRDaGFubmVsczpGaW5kRmlyc3RDaGlsZCgnUkJYR2VuZXJhbCcpOyBpZiBjaGFubmVsIHRoZW4gY2hhbm5lbDpTZW5kQXN5bmMobWVzc2FnZSkgZW5kCmxvY2FsIHBmd2hscCA9IDEzCiAgICAgICAgICAgIGVsc2UKLS0gcGNmcDFqeDYKICAgICAgICAgICAgICAgIGxvY2FsIHZhcl9kZzFic24gPSByZXBsaWNhdGVkX3N0b3JhZ2U6RmluZEZpcnN0Q2hpbGQoJ0RlZmF1bHRDaGF0U3lzdGVtQ2hhdEV2ZW50cycpCmxvY2FsIDF3OW5nYyA9IDQyCiAgICAgICAgICAgICAgICBpZiBldmVudHMgYW5kIGV2ZW50czpGaW5kRmlyc3RDaGlsZCgnU2F5TWVzc2FnZVJlcXVlc3QnKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgZXZlbnRzLlNheU1lc3NhZ2VSZXF1ZXN0OkZpcmVTZXJ2ZXIobWVzc2FnZSwgJ0FsbCcpCi0tIDNyZGxzY3JvCiAgICAgICAgICAgICAgICBlbmQKbG9jYWwgZHI5NWdtID0gMzYKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kKQogIAogICAgLS0gS2lsbCBBdXJhIGNvbW1hbmQKLS0gejAxZmUxcGYKICAgIGVsc2VpZiBtc2cgPT0gcHJlZml4IC4uICdrYScgYW5kIGNhbl91c2VfY29tbWFuZChjb21tYW5kZXIpIHRoZW4KLS0gOWJmdjB5MGYKICAgICAgICAtLSBTdG9wIHByZXZpb3VzIGFjdGlvbgogICAgICAgIGlmIF9HLmFjdGlvbl9pbl9wcm9ncmVzcyB0aGVuCmxvY2FsIDU0NmJvYSA9IDM4CiAgICAgICAgICAgIHNwaXJhbF9zdG9wX2ZsYWcgPSB0cnVlCiAgICAgICAgICAgIHRhc2sud2FpdCgwLjIpCi0tIGZsY2dxYjJkCiAgICAgICAgZW5kCiAgICAgIApsb2NhbCBmMjRnaXUgPSA1MAogICAgICAgIHNhZmVfc3Bhd24oZnVuY3Rpb24oKQogICAgICAgICAgICB3aGlsZSBzcGlyYWxfcnVubmluZyBkbwogICAgICAgICAgICAgICAgdGFzay53YWl0KDAuMSkKLS0gYjA1MmN3OHgKICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIHN0YXJ0X2tpbGxfYXVyYShjb21tYW5kZXIpCi0tIGMxM3hyM3QxCiAgICAgICAgZW5kKQpsb2NhbCByNmQ2YWkgPSAxNQogICAgICAgIHJldHVybgoKICAgIC0tIFNpbmdsZSB0YXJnZXQgY29tbWFuZHMKLS0gM2NxbWc5ODQKICAgIGVsc2VpZiAobXNnOnN1YigxLCAjcHJlZml4ICsgMikgPT0gcHJlZml4IC4uICdrICcgb3IKLS0geDBtZmpjZmIKICAgICAgICAgICAgbXNnOnN1YigxLCAjcHJlZml4ICsgMykgPT0gcHJlZml4IC4uICdsayAnIG9yCi0tIDloNTVtaDVpCmxvY2FsIHR3NngxayA9IDQKICAgICAgICAgICAgbXNnOnN1YigxLCAjcHJlZml4ICsgMykgPT0gcHJlZml4IC4uICdzayAnIG9yCi0tIGlnZnZuNTQ1CmxvY2FsIHVxdXhocSA9IDc5CiAgICAgICAgICAgIG1zZzpzdWIoMSwgI3ByZWZpeCArIDQpID09IHByZWZpeCAuLiAnbHNrICcgb3IKLS0gNXBwMnl0aTcKICAgICAgICAgICAgbXNnOnN1YigxLCAjcHJlZml4ICsgMikgPT0gcHJlZml4IC4uICdiICcgb3IKbG9jYWwgeWx1NmhjID0gNTUKICAgICAgICAgICAgbXNnOnN1YigxLCAjcHJlZml4ICsgNCkgPT0gcHJlZml4IC4uICdza3kgJykgYW5kIGNhbl91c2VfY29tbWFuZChjb21tYW5kZXIpIHRoZW4KbG9jYWwgdWhuOGk5ID0gMTAKICAgICAgCiAgICAgICAgLS0gKENIQU5HRUQpIEludGVycnVwdCBwcmV2aW91cyBhY3Rpb24gaWYgYSBuZXcgb25lIGlzIGNvbW1hbmRlZAotLSBqcG0yaGtkbgogICAgICAgIGlmIF9HLmFjdGlvbl9pbl9wcm9ncmVzcyB0aGVuCi0tIDkzbmJpdHFxCmxvY2FsIDU4dWY3MyA9IDI5CiAgICAgICAgICAgIHNwaXJhbF9zdG9wX2ZsYWcgPSB0cnVlCi0tIDRqMHc2bmQxCiAgICAgICAgICAgIHRhc2sud2FpdCgwLjIpIC0tIEdpdmUgdGltZSBmb3IgdGhlIG9sZCBhY3Rpb24gdG8gc3RvcAogICAgICAgIGVuZApsb2NhbCByNGE0NnIgPSA2OQogICAgICAKLS0gazMxamV0aWcKICAgICAgICBsb2NhbCB2YXJfdTFjdGpkID0gbXNnOnN1YigxLCAjcHJlZml4ICsgMykgPT0gcHJlZml4IC4uICdsayAnIG9yIG1zZzpzdWIoMSwgI3ByZWZpeCArIDQpID09IHByZWZpeCAuLiAnbHNrICcKLS0gNjQ3eG5ydjUKICAgICAgICBsb2NhbCB2YXJfdG52dHgxID0gbXNnOnN1YigxLCAjcHJlZml4ICsgMykgPT0gcHJlZml4IC4uICdzayAnIG9yIG1zZzpzdWIoMSwgI3ByZWZpeCArIDQpID09IHByZWZpeCAuLiAnbHNrICcKLS0geGg3MmR6bDkKICAgICAgICBsb2NhbCB2YXJfYjVxdTk4ID0gbXNnOnN1YigxLCAjcHJlZml4ICsgMikgPT0gcHJlZml4IC4uICdiICcKICAgICAgICBsb2NhbCB2YXJfMHhsaXo4ID0gbXNnOnN1YigxLCAjcHJlZml4ICsgNCkgPT0gcHJlZml4IC4uICdza3kgJwogICAgICAKLS0gZDE4cnd5NzUKICAgICAgICBsb2NhbCB2YXJfeHdhbmo4Ci0tIHBlN3FwaWZjCiAgICAgICAgaWYgZG9fYnJpbmcgdGhlbgogICAgICAgICAgICB0ZXJtID0gbXNnOnN1YigjcHJlZml4ICsgMyk6Z3N1YignXiVzKiguLSklcyokJywgJyUxJykKbG9jYWwgNjFwOWQ1ID0gMQogICAgICAgIGVsc2VpZiBkb19za3kgdGhlbgotLSB2ZXRvdG9sdwogICAgICAgICAgICB0ZXJtID0gbXNnOnN1YigjcHJlZml4ICsgNSk6Z3N1YignXiVzKiguLSklcyokJywgJyUxJykKbG9jYWwgY3FncDNrID0gOTkKICAgICAgICBlbHNlaWYgZG9fc3RvbXAgYW5kIGlzX2xvb3Bfa2lsbCB0aGVuCiAgICAgICAgICAgIHRlcm0gPSBtc2c6c3ViKCNwcmVmaXggKyA1KTpnc3ViKCdeJXMqKC4tKSVzKiQnLCAnJTEnKQotLSBkaGdneWZnNgpsb2NhbCA3eHJmbnIgPSAxNwogICAgICAgIGVsc2VpZiBkb19zdG9tcCB0aGVuCi0tIDVicW5ncjk5CmxvY2FsIDFtOWF0byA9IDAKICAgICAgICAgICAgdGVybSA9IG1zZzpzdWIoI3ByZWZpeCArIDQpOmdzdWIoJ14lcyooLi0pJXMqJCcsICclMScpCmxvY2FsIDZjMnAwZiA9IDEzCiAgICAgICAgZWxzZQogICAgICAgICAgICB0ZXJtID0gKGlzX2xvb3Bfa2lsbCBhbmQgbXNnOnN1YigjcHJlZml4ICsgNCkgb3IgbXNnOnN1YigjcHJlZml4ICsgMykpOmdzdWIoJ14lcyooLi0pJXMqJCcsICclMScpCiAgICAgICAgZW5kCiAgICAgIAogICAgICAgIGlmIHNwaXJhbF9ydW5uaW5nIHRoZW4KICAgICAgICAgICAgc3BpcmFsX3N0b3BfZmxhZyA9IHRydWUKICAgICAgICBlbmQKbG9jYWwgZDNmOWRlID0gOTMKICAgICAgCiAgICAgICAgdGFzay53YWl0KDAuMSkKICAgICAgCiAgICAgICAgc2FmZV9zcGF3bihmdW5jdGlvbigpCiAgICAgICAgICAgIC0tIFNhdmUgbGFzdCBjb21tYW5kIGZvciBwb3RlbnRpYWwgcmVzdW1lIG9uIGRlYXRoIChvbmx5IGZvciBsb29wIGFjdGlvbnMpCiAgICAgICAgICAgIGxvY2FsIHZhcl9hdGlxdXogPSBpc19sb29wX2tpbGwKICAgICAgICAgICAgX0cubGFzdF9jb21tYW5kID0geyBjb21tYW5kZXJfbmFtZSA9IChjb21tYW5kZXIgYW5kIGNvbW1hbmRlci5OYW1lKSBhbmQgY29tbWFuZGVyLk5hbWUgb3IgKGNvbW1hbmRlciBvciAiIikuTmFtZSwgbXNnID0gbXNnIH0KbG9jYWwgbmpieDIzID0gNTMKICAgICAgICAgICAgX0cubG9vcGluZ19hY3Rpb24gPSBpc19sb29wCi0tIGU5c2J4YW00CmxvY2FsIDdscjU0ayA9IDI0CiAgICAgICAgICAgIGN1cnJlbnRfY29tbWFuZGVyID0gY29tbWFuZGVyCiAgICAgICAgICAgIF9HLmFjdGlvbl9pbl9wcm9ncmVzcyA9IHRydWUKICAgICAgICAgICAgaXNfaW5fY29tYmF0ID0gdHJ1ZQotLSA2cHhsbzAyNwogICAgICAgICAgCiAgICAgICAgICAgIC0tIE5FVzogRGlzYWJsZSBhdXRvIHNwaXQgZHVyaW5nIGNvbWJhdCBhY3Rpb25zCmxvY2FsIDQycTgxdSA9IDcwCiAgICAgICAgICAgIGxvY2FsIHZhcl83aXhuYmYgPSBfRy5wZXJzaXN0ZW50X2RhdGEuYXV0b19zcGl0CiAgICAgICAgICAgIF9HLnBlcnNpc3RlbnRfZGF0YS5hdXRvX3NwaXQgPSBmYWxzZQogICAgICAgICAgCmxvY2FsIGxva2pnYiA9IDM5CiAgICAgICAgICAgIHdoaWxlIHNwaXJhbF9ydW5uaW5nIGRvCiAgICAgICAgICAgICAgICB0YXNrLndhaXQoMC4xKQotLSBrdTVjaXhobgogICAgICAgICAgICBlbmQKICAgICAgICAgIAogICAgICAgICAgICBsb2NhbCB2YXJfMDhiNmNxID0gZmluZF9wYXJ0aWFsX3BsYXllcih0ZXJtKQogICAgICAgICAgICAtLSAoQ0hBTkdFRCkgTmV3IHZhbGlkYXRpb24gbG9naWMgZm9yIG1hc3RlciBvdmVycmlkZSBhbmQgaW52YWxpZCB0YXJnZXQgbWVzc2FnZXMKICAgICAgICAgICAgaWYgbm90IHRndCB0aGVuCiAgICAgICAgICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgICAgICAgICAgbG9jYWwgdmFyX3V4bmk5diA9ICJDYW5ub3QgZmluZCBwbGF5ZXI6ICIgLi4gdGVybQogICAgICAgICAgICAgICAgICAgIGlmIHRleHRfY2hhdF9zZXJ2aWNlLkNoYXRWZXJzaW9uID09IEVudW0uQ2hhdFZlcnNpb24uVGV4dENoYXRTZXJ2aWNlIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgdmFyXzhscm00dyA9IHRleHRfY2hhdF9zZXJ2aWNlLlRleHRDaGFubmVsczpGaW5kRmlyc3RDaGlsZCgnUkJYR2VuZXJhbCcpOyBpZiBjaGFubmVsIHRoZW4gY2hhbm5lbDpTZW5kQXN5bmMobWVzc2FnZSkgZW5kCiAgICAgICAgICAgICAgICAgICAgZWxzZQotLSBkbWJiaXY2ZAogICAgICAgICAgICAgICAgICAgICAgICByZXBsaWNhdGVkX3N0b3JhZ2UuRGVmYXVsdENoYXRTeXN0ZW1DaGF0RXZlbnRzLlNheU1lc3NhZ2VSZXF1ZXN0OkZpcmVTZXJ2ZXIobWVzc2FnZSwgJ0FsbCcpCiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbmQpCi0tIHNhaDF5aHpqCiAgICAgICAgICAgICAgICBfRy5hY3Rpb25faW5fcHJvZ3Jlc3MgPSBmYWxzZTsgaXNfaW5fY29tYmF0ID0gZmFsc2U7IF9HLmxvb3BpbmdfYWN0aW9uID0gZmFsc2U7IF9HLnBlcnNpc3RlbnRfZGF0YS5hdXRvX3NwaXQgPSB3YXNfYXV0b19zcGl0OyByZXR1cm4KbG9jYWwgY2syZDU2ID0gNzUKICAgICAgICAgICAgZW5kCgogICAgICAgICAgICBsb2NhbCB2YXJfeDh4OW4yID0gaXNfcGxheWVyX3RlYW1lZCh0Z3QpIG9yIGlzX3BsYXllcl93aGl0ZWxpc3RlZCh0Z3QpCi0tIDB2bDg4Y2l4CmxvY2FsIHV5bW95ZCA9IDc4CiAgICAgICAgICAgIGlmIGNvbW1hbmRlciA9PSBfRy5tYXN0ZXIgdGhlbiBpc19wcm90ZWN0ZWQgPSBmYWxzZSBlbmQgLS0gTWFzdGVyIG92ZXJyaWRlCiAgICAgICAgICAgIApsb2NhbCA4ZmtnbjYgPSAzMwogICAgICAgICAgICBpZiBpc19wcm90ZWN0ZWQgb3IgdGd0ID09IF9HLm1hc3RlciB0aGVuCiAgICAgICAgICAgICAgICBwY2FsbChmdW5jdGlvbigpCi0tIHF4NTluamh4CiAgICAgICAgICAgICAgICAgICAgbG9jYWwgdmFyX2EzdWdkdCA9ICJDYW5ub3QgdGFyZ2V0ICIgLi4gdGd0Lk5hbWUgLi4gIi4gUGxheWVyIGlzIHByb3RlY3RlZC4iCmxvY2FsIGdueGpuNCA9IDUzCiAgICAgICAgICAgICAgICAgICAgaWYgdGV4dF9jaGF0X3NlcnZpY2UuQ2hhdFZlcnNpb24gPT0gRW51bS5DaGF0VmVyc2lvbi5UZXh0Q2hhdFNlcnZpY2UgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCB2YXJfZjN3ZWdsID0gdGV4dF9jaGF0X3NlcnZpY2UuVGV4dENoYW5uZWxzOkZpbmRGaXJzdENoaWxkKCdSQlhHZW5lcmFsJyk7IGlmIGNoYW5uZWwgdGhlbiBjaGFubmVsOlNlbmRBc3luYyhtZXNzYWdlKSBlbmQKbG9jYWwgMG1lOHFhID0gODUKICAgICAgICAgICAgICAgICAgICBlbHNlCi0tIDFoMXBoaGlnCiAgICAgICAgICAgICAgICAgICAgICAgIHJlcGxpY2F0ZWRfc3RvcmFnZS5EZWZhdWx0Q2hhdFN5c3RlbUNoYXRFdmVudHMuU2F5TWVzc2FnZVJlcXVlc3Q6RmlyZVNlcnZlcihtZXNzYWdlLCAnQWxsJykKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVuZCkKLS0gdTU2ajNlMGQKbG9jYWwgZ3QwdTFuID0gMjIKICAgICAgICAgICAgICAgIF9HLmFjdGlvbl9pbl9wcm9ncmVzcyA9IGZhbHNlOyBpc19pbl9jb21iYXQgPSBmYWxzZTsgX0cubG9vcGluZ19hY3Rpb24gPSBmYWxzZTsgX0cucGVyc2lzdGVudF9kYXRhLmF1dG9fc3BpdCA9IHdhc19hdXRvX3NwaXQ7IHJldHVybgotLSB2ZTd4YnNxNwpsb2NhbCBpdzQ4azUgPSA2MAogICAgICAgICAgICBlbmQKLS0gamRveDZxdzIKbG9jYWwgN3VhdGlpID0gNjkKICAgICAgICAgICAgCiAgICAgICAgICAgIGN1cnJlbnRfYWN0aW9uID0gZG9fYnJpbmcgYW5kICdicmluZycgb3IgZG9fc2t5IGFuZCAnc2t5JyBvciBkb19zdG9tcCBhbmQgJ3N0b21wJyBvciAna2lsbCcKICAgICAgICAgICAgc3RhcnRfc3BlY3RhdGluZyh0Z3QpCmxvY2FsIHQ0OHI4YiA9IDc2CiAgICAgICAgICAKLS0gMG9kbWJoamUKICAgICAgICAgICAgbG9jYWwgdmFyX3VlbXRodCA9IGxvY2FsX3BsYXllci5DaGFyYWN0ZXIgb3IgbG9jYWxfcGxheWVyLkNoYXJhY3RlckFkZGVkOldhaXQoKQotLSA4dXliM3F3bwpsb2NhbCBvcG94ZnAgPSAzMQogICAgICAgICAgICBsb2NhbCB2YXJfdG0ybzVjID0gc3RhbmRfY2hhcjpXYWl0Rm9yQ2hpbGQoJ0h1bWFub2lkUm9vdFBhcnQnKQotLSBic3U4dHhidwpsb2NhbCB4aWp5OTkgPSAxNAogICAgICAgICAgCiAgICAgICAgICAgIHBjYWxsKHVuZXF1aXBfYWxsKQogICAgICAgICAgICBfRy5zdGFuZF9sb2NrZWQgPSB0cnVlCiAgICAgICAgICAKICAgICAgICAgICAgLS0gRW5zdXJlIHdlIGhhdmUgZ3VuICh3aXRoIGZhc3RlciB3YWl0KQogICAgICAgICAgICBpZiBub3QgaGFzX2d1bigpIHRoZW4KbG9jYWwgMGhma2p0ID0gODYKICAgICAgICAgICAgICAgIGlmIG5vdCBpbnRlcnJ1cHRfYW5kX2J1eV9ndW4oKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgX0cuc3RhbmRfbG9ja2VkID0gZmFsc2U7IGN1cnJlbnRfYWN0aW9uID0gbmlsOyBjdXJyZW50X2NvbW1hbmRlciA9IG5pbDsKbG9jYWwgN2FxazN5ID0gNTgKICAgICAgICAgICAgICAgICAgICBfRy5hY3Rpb25faW5fcHJvZ3Jlc3MgPSBmYWxzZTsgaXNfaW5fY29tYmF0ID0gZmFsc2U7IHN0b3Bfc3BlY3RhdGluZygpOyBfRy5sb29waW5nX2FjdGlvbiA9IGZhbHNlOyBfRy5wZXJzaXN0ZW50X2RhdGEuYXV0b19zcGl0ID0gd2FzX2F1dG9fc3BpdDsgcmV0dXJuCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kCiAgICAgICAgICAKICAgICAgICAgICAgZXF1aXBfZ3VuKCkKLS0gcGZteWp5MDkKICAgICAgICAgIAogICAgICAgICAgICBzcGlyYWxfcnVubmluZyA9IHRydWUKLS0gdDBuOTByc2cKICAgICAgICAgICAgc3BpcmFsX3N0b3BfZmxhZyA9IGZhbHNlIC0tIFJlc2V0IHN0b3AgZmxhZyBmb3IgbmV3IGFjdGlvbgogICAgICAgICAgICBsb2NhbCB2YXJfazlyeHFzID0gMAogICAgICAgICAgICBsb2NhbCB2YXJfY3lydW9jID0gMCAtLSBORVc6IENvbnNpc3RlbnQgY2lyY2xlIGRpcmVjdGlvbgogICAgICAgICAgCiAgICAgICAgICAgIHJlcGVhdAotLSB0MHFzb2hnMwogICAgICAgICAgICAgICAgLS0gRm9yIGxzaywgdXNlIFNEZWF0aCB0byBkZXRlY3Qgc3RvbXBpbmcgYW5kIGhhbmRsZSByZXNwYXduIHByb3Blcmx5CiAgICAgICAgICAgICAgICBpZiBpc19sb29wIGFuZCBkb19zdG9tcCBhbmQgdGd0IGFuZCBpc19rbyh0Z3QpIHRoZW4KICAgICAgICAgICAgICAgICAgICAtLSBXYWl0IGZvciB0YXJnZXQgdG8gYmUgc3RvbXBlZCAoU0RlYXRoIHRydWUpCiAgICAgICAgICAgICAgICAgICAgbG9jYWwgdmFyX2V6cW55bCA9IHRpY2soKQogICAgICAgICAgICAgICAgICAgIHdoaWxlIHRndCBhbmQgbm90IHNkZWF0aFN0YXRlc1t0Z3QuTmFtZV0gYW5kIG5vdCBzcGlyYWxfc3RvcF9mbGFnIGFuZCB0aWNrKCkgLSB3YWl0X3N0YXJ0IDwgMzAgZG8KICAgICAgICAgICAgICAgICAgICAgICAgaWYgbm90IHRndCBvciBub3QgaXNfdmFsaWRfdGFyZ2V0KHRndCwgY29tbWFuZGVyKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzcGlyYWxfc3RvcF9mbGFnID0gdHJ1ZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWsKLS0gOXA0eGM5emoKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgIC0tIElETEUgUkVMT0FEIGR1cmluZyB3YWl0CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIG5vdCBpc19yZWxvYWRpbmcgYW5kIG5vdCBfRy5hY3Rpb25faW5fcHJvZ3Jlc3MgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvYWN0aXZlX3JlbG9hZCgpCi0tIGtwczhqNDh6CiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAotLSB0anMzbWNpZwogICAgICAgICAgICAgICAgICAgICAgICB0YXNrLndhaXQoMC41KQogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIAotLSBxcG1veGdwagogICAgICAgICAgICAgICAgICAgIC0tIElmIHRhcmdldCB3YXMgc3RvbXBlZCwgd2FpdCBmb3IgcmVzcGF3biAoU0RlYXRoIGZhbHNlKSBhbmQgdGhlbiB3YWl0IDE3IHNlY29uZHMKICAgICAgICAgICAgICAgICAgICBpZiB0Z3QgYW5kIHNkZWF0aFN0YXRlc1t0Z3QuTmFtZV0gYW5kIG5vdCBzcGlyYWxfc3RvcF9mbGFnIHRoZW4KLS0gMjZwdGMyOWoKICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQoIltMU0tdIFRhcmdldCBzdG9tcGVkIGRldGVjdGVkIHZpYSBTRGVhdGgsIHdhaXRpbmcgZm9yIHJlc3Bhd24uLi4iKQotLSBzOHZqajB0eApsb2NhbCBjaWE3aTUgPSA0MwogICAgICAgICAgICAgICAgICAgICAgICAKLS0gcWx4ZG4wZjIKbG9jYWwgNW5uaXkyID0gNwogICAgICAgICAgICAgICAgICAgICAgICAtLSBXYWl0IGZvciBTRGVhdGggdG8gYmVjb21lIGZhbHNlIChyZXNwYXduZWQpCiAgICAgICAgICAgICAgICAgICAgICAgIHdhaXRfc3RhcnQgPSB0aWNrKCkKICAgICAgICAgICAgICAgICAgICAgICAgd2hpbGUgdGd0IGFuZCBzZGVhdGhTdGF0ZXNbdGd0Lk5hbWVdIGFuZCBub3Qgc3BpcmFsX3N0b3BfZmxhZyBhbmQgdGljaygpIC0gd2FpdF9zdGFydCA8IDMwIGRvCi0tIGp6MDN3cHNtCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXNrLndhaXQoMC41KQogICAgICAgICAgICAgICAgICAgICAgICBlbmQKbG9jYWwgb25iZGh0ID0gOAogICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgLS0gV2FpdCAxNyBzZWNvbmRzIGFmdGVyIHJlc3Bhd24KbG9jYWwgZG05aGNkID0gODcKICAgICAgICAgICAgICAgICAgICAgICAgaWYgdGd0IGFuZCBub3Qgc2RlYXRoU3RhdGVzW3RndC5OYW1lXSBhbmQgbm90IHNwaXJhbF9zdG9wX2ZsYWcgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgX0cuc3RhbmRfbG9ja2VkID0gZmFsc2UKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzX2luX2NvbWJhdCA9IGZhbHNlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmludCgiW0xTS10gVGFyZ2V0IHJlc3Bhd25lZCwgd2FpdGluZyAxNyBzZWNvbmRzLi4uIikKICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgdmFyX2NoOWRkcCA9IHRpY2soKQotLSBnZWdvajJ2Ywpsb2NhbCA5cXc3MTQgPSA2MwogICAgICAgICAgICAgICAgICAgICAgICAgICAgd2hpbGUgdGljaygpIC0gd2FpdF9zdGFydCA8IDE3IGFuZCBub3Qgc3BpcmFsX3N0b3BfZmxhZyBkbwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC0tIElETEUgUkVMT0FEIGR1cmluZyB3YWl0CmxvY2FsIDd4a3BlYSA9IDc5CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgbm90IGlzX3JlbG9hZGluZyBhbmQgbm90IF9HLmFjdGlvbl9pbl9wcm9ncmVzcyB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb2FjdGl2ZV9yZWxvYWQoKQotLSB2OGRnMmptOAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhc2sud2FpdCgwLjEpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgICAgIApsb2NhbCBvY2hpeDQgPSA2NAogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgc3BpcmFsX3N0b3BfZmxhZyB0aGVuIGJyZWFrIGVuZAogICAgICAgICAgICAgICAgICAgICAgICBlbmQKLS0geDI1NWd4MDkKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICAtLSBXYWl0IGZvciBLTyAoZm9yIG90aGVyIGxvb3BlZCBhY3Rpb25zKQogICAgICAgICAgICAgICAgICAgIGlmIGlzX2xvb3AgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICB3aGlsZSB0Z3QgYW5kIGlzX2tvKHRndCkgYW5kIG5vdCBzcGlyYWxfc3RvcF9mbGFnIGRvCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBub3QgdGd0IG9yIG5vdCBpc192YWxpZF90YXJnZXQodGd0LCBjb21tYW5kZXIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzcGlyYWxfc3RvcF9mbGFnID0gdHJ1ZSAtLSBTdG9wIGxvb3AgaWYgdGFyZ2V0IGJlY29tZXMgaW52YWxpZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgICAKLS0gZ3RhM2h2c2oKICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9HLnN0YW5kX2xvY2tlZCA9IGZhbHNlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc19pbl9jb21iYXQgPSBmYWxzZQotLSA2Y29neDhiZgogICAgICAgICAgICAgICAgICAgICAgICAgICAgLS0gSURMRSBSRUxPQUQgZHVyaW5nIHdhaXQKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIG5vdCBpc19yZWxvYWRpbmcgYW5kIG5vdCBfRy5hY3Rpb25faW5fcHJvZ3Jlc3MgdGhlbgotLSBqOHIwdTBodgpsb2NhbCB6bWozYXggPSA3OQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb2FjdGl2ZV9yZWxvYWQoKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXNrLndhaXQoMC41KQotLSA2eGk0ejJibgogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBlbmQKLS0gb2RjOW80djIKICAgICAgICAgICAgICAgIGVuZAotLSBtcGYyN3Q3NAogICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgaWYgc3BpcmFsX3N0b3BfZmxhZyBvciAodGd0IGFuZCBub3QgaXNfdmFsaWRfdGFyZ2V0KHRndCwgY29tbWFuZGVyKSkgdGhlbgogICAgICAgICAgICAgICAgICAgIGJyZWFrCmxvY2FsIHR3ZWh1ZCA9IDg3CiAgICAgICAgICAgICAgICBlbmQKbG9jYWwgemliOWwxID0gMTAKICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIF9HLnN0YW5kX2xvY2tlZCA9IHRydWUKICAgICAgICAgICAgICAgIGlzX2luX2NvbWJhdCA9IHRydWUKICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIC0tIENvbWJhdCBsb29wCiAgICAgICAgICAgICAgICB3aGlsZSB0Z3QgYW5kIG5vdCBpc19rbyh0Z3QpIGFuZCBub3Qgc3BpcmFsX3N0b3BfZmxhZyBhbmQgaXNfdmFsaWRfdGFyZ2V0KHRndCwgY29tbWFuZGVyKSBkbwogICAgICAgICAgICAgICAgICAgIGlmIG5vdCBsb2NhbF9wbGF5ZXIuQ2hhcmFjdGVyIHRoZW4gYnJlYWsgZW5kCi0tIDduZXN1OTg4CiAgICAgICAgICAgICAgICAgIAotLSBjdnRia245dAogICAgICAgICAgICAgICAgICAgIHN0YW5kX2NoYXIgPSBsb2NhbF9wbGF5ZXIuQ2hhcmFjdGVyCiAgICAgICAgICAgICAgICAgICAgc3RhbmRfcm9vdCA9IHN0YW5kX2NoYXI6RmluZEZpcnN0Q2hpbGQoJ0h1bWFub2lkUm9vdFBhcnQnKQogICAgICAgICAgICAgICAgICAgIGlmIG5vdCBzdGFuZF9yb290IHRoZW4gYnJlYWsgZW5kCi0tIDdmeGY3eG8yCiAgICAgICAgICAgICAgICAgIApsb2NhbCBvMDFoejEgPSAyOQogICAgICAgICAgICAgICAgICAgIGxvY2FsIHZhcl82Y3lscG8gPSB0Z3QuQ2hhcmFjdGVyIGFuZCB0Z3QuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCdIdW1hbm9pZFJvb3RQYXJ0JykKICAgICAgICAgICAgICAgICAgICBpZiBub3QgdGd0X3Jvb3QgdGhlbgotLSBxd2NzbTF0NwogICAgICAgICAgICAgICAgICAgICAgICBzcGlyYWxfc3RvcF9mbGFnID0gdHJ1ZQpsb2NhbCBvejU5YXEgPSA3NgogICAgICAgICAgICAgICAgICAgICAgICBicmVhawogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAtLSBVUERBVEVEOiBNVUNIIGZhc3RlciBjaXJjbGluZyB3aXRoIGNvbnNpc3RlbnQgZGlyZWN0aW9uCiAgICAgICAgICAgICAgICAgICAgbG9jYWwgdmFyX3F6Z21xMCA9IDI4IC0tIEluY3JlYXNlZCB0byAyOCBzdHVkcwotLSBudWMzdDN0agogICAgICAgICAgICAgICAgICAgIGxvY2FsIHZhcl9zZWswbGYgPSAxNTAwMCAtLSBNVUNIIGZhc3RlciBjaXJjbGluZwogICAgICAgICAgICAgICAgICAgIGNpcmNsZV9hbmdsZSA9IChjaXJjbGVfYW5nbGUgKyBzcGVlZCAqIDAuMDE2KSAlIChtYXRoLnBpICogMikgLS0gQ29uc2lzdGVudCBkaXJlY3Rpb24KICAgICAgICAgICAgICAgICAgICBsb2NhbCB2YXJfM2N6bHp6ID0gbWF0aC5jb3MoY2lyY2xlX2FuZ2xlKSAqIHJhZGl1cwogICAgICAgICAgICAgICAgICAgIGxvY2FsIHZhcl82MHRnZXEgPSBtYXRoLnNpbihjaXJjbGVfYW5nbGUpICogcmFkaXVzCiAgICAgICAgICAgICAgICAgICAgbG9jYWwgdmFyX2wzMTF1aCA9IDIgLS0gRml4ZWQgaGVpZ2h0IGZvciBjb25zaXN0ZW50IGNpcmNsaW5nCiAgICAgICAgICAgICAgICAgIApsb2NhbCBqZnZua3QgPSAyCiAgICAgICAgICAgICAgICAgICAgbG9jYWwgdmFyXzB5NmtqbCA9IHRndF9yb290LlBvc2l0aW9uICsgVmVjdG9yMy5uZXcoeCwgeSwgeikKICAgICAgICAgICAgICAgICAgICBsb2NhbCB2YXJfNTJ3dzA0ID0gQ0ZyYW1lLmxvb2tBdChjaXJjbGVfcG9zLCB0Z3Rfcm9vdC5Qb3NpdGlvbikKICAgICAgICAgICAgICAgICAgCmxvY2FsIHVlcnB3YSA9IDg1CiAgICAgICAgICAgICAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAgICAgICAgICAgICAgICBkaXNhYmxlX3BoeXNpY3Moc3RhbmRfY2hhcikKbG9jYWwgNTc5dHRvID0gNTcKICAgICAgICAgICAgICAgICAgICAgICAgZW5hYmxlX3dhbGxfY2xpcHBpbmcoc3RhbmRfY2hhcikKICAgICAgICAgICAgICAgICAgICAgICAgc3RhbmRfcm9vdC5DRnJhbWUgPSBmYWNlCi0tIDU1dHJvM3F3CiAgICAgICAgICAgICAgICAgICAgICAgIHN0YW5kX3Jvb3QuVmVsb2NpdHkgPSBWZWN0b3IzLnplcm8KICAgICAgICAgICAgICAgICAgICAgICAgc3RhbmRfcm9vdC5Sb3RWZWxvY2l0eSA9IFZlY3RvcjMuemVybwpsb2NhbCB4MTFoMTAgPSA5NgogICAgICAgICAgICAgICAgICAgIGVuZCkKLS0gaXh5cTByM2cKICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgLS0gVm9pZCBzcGFtOiBhbHdheXMgb2JleSBnbG9iYWwgdm9pZCBzcGFtIHNldHRpbmcKLS0gZjVqaXFwc2MKbG9jYWwgbjBzZjhoID0gNzEKICAgICAgICAgICAgICAgICAgICBpZiBfRy52b2lkX3NwYW1fbW9kZSB0aGVuCmxvY2FsIG45Ym4waSA9IDcxCiAgICAgICAgICAgICAgICAgICAgICAgIHBlcmZvcm1fdm9pZF9zcGFtKCkKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgaWYgbm90IGhhc19ndW4oKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIG5vdCBpbnRlcnJ1cHRfYW5kX2J1eV9ndW4oKSB0aGVuCmxvY2FsIDk1ZTY5YiA9IDU4CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzcGlyYWxfc3RvcF9mbGFnID0gdHJ1ZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWsKbG9jYWwgbG13YTIxID0gNjYKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgZW5kCgpsb2NhbCBqMGFyYXQgPSA0NAogICAgICAgICAgICAgICAgICAgIC0tIChDSEFOR0VEKSBCdXkgYXJtb3IgZHVyaW5nIGNvbWJhdCBpZiBuZWVkZWQKICAgICAgICAgICAgICAgICAgICBpZiBzZXR0aW5ncy5hdXRvX2FybW9yIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgdmFyX3VvNTBxaiA9IGxvY2FsX3BsYXllcjpGaW5kRmlyc3RDaGlsZCgnRGF0YUZvbGRlcicpCmxvY2FsIHY5bzdlbCA9IDI4CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIGRhdGFfZm9sZGVyIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIHZhcl9lMTN3OHIgPSBkYXRhX2ZvbGRlcjpGaW5kRmlyc3RDaGlsZCgnSW5mb3JtYXRpb24nKQotLSBvcnZ3Y2J4aAogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgaW5mb19mb2xkZXIgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIHZhcl9xd3p5Z2MgPSBpbmZvX2ZvbGRlcjpGaW5kRmlyc3RDaGlsZCgiQXJtb3JTYXZlIikKLS0gbWtuMWFnZmkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBhcm1vcl9pbmZvIGFuZCAodG9udW1iZXIoYXJtb3JfaW5mby5WYWx1ZSkgb3IgMCkgPCBzZXR0aW5ncy5hcm1vcl90aHJlc2hvbGQgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmludCgiW0NPTUJBVF0gQXJtb3IgbG93LCBwYXVzaW5nIHRvIGJ1eS4iKQotLSBkbjU3OG5hMAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBidXlfYXJtb3IoKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmludCgiW0NPTUJBVF0gQXJtb3IgcHVyY2hhc2VkLCByZXN1bWluZyBhdHRhY2suIikKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXF1aXBfZ3VuKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFzay53YWl0KDAuMikKbG9jYWwgNnhxbzRyID0gODYKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKbG9jYWwgNG5qdnJqID0gOTYKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZApsb2NhbCBrMmhicGQgPSA3OAogICAgICAgICAgICAgICAgICAgICAgICBlbmQKLS0gd2R4YTN6eGQKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgaWYgbm90IHN0YW5kX2NoYXI6RmluZEZpcnN0Q2hpbGRPZkNsYXNzKCdUb29sJykgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBlcXVpcF9ndW4oKQogICAgICAgICAgICAgICAgICAgICAgICB0YXNrLndhaXQoMC4xKSAtLSBGYXN0ZXIgd2FpdAotLSA2cjA5MHlyYwogICAgICAgICAgICAgICAgICAgICAgICBpZiBub3Qgc3RhbmRfY2hhcjpGaW5kRmlyc3RDaGlsZE9mQ2xhc3MoJ1Rvb2wnKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBub3QgaXNfcmVsb2FkaW5nIHRoZW4KLS0gNXQ2enBjaGsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb19idXlfYW5kX3JlbG9hZCgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKLS0gajhranp0cDIKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhc2sud2FpdCgwLjMpIC0tIEZhc3RlciB3YWl0Ci0tIHlzaWdyYm1nCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBub3Qgc3RhbmRfY2hhcjpGaW5kRmlyc3RDaGlsZE9mQ2xhc3MoJ1Rvb2wnKSB0aGVuCi0tIGdnZDRzMnFvCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3BpcmFsX3N0b3BfZmxhZyA9IHRydWUKLS0gMjIwZTN1MWoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhawotLSA1Y3lvZ2tyZwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICBpZiBuZWVkX3JlbG9hZCgpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgZG9fYnV5X2FuZF9yZWxvYWQoKQpsb2NhbCAxMGRoNGEgPSA5OQogICAgICAgICAgICAgICAgICAgIGVuZAotLSAyb3d6ZmFpZAogICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAtLSBTaG9vdCAtIE1VQ0ggZmFzdGVyIHNob290aW5nIHdpdGggbWluaW1hbCBkZWxheQogICAgICAgICAgICAgICAgICAgIGxvY2FsIHZhcl92bXFyaGkgPSBzdGFuZF9jaGFyOkZpbmRGaXJzdENoaWxkT2ZDbGFzcygnVG9vbCcpCiAgICAgICAgICAgICAgICAgICAgLS0gKENIQU5HRUQpIFRhcmdldCBIZWFkLCBmYWxsYmFjayB0byBVcHBlclRvcnNvCiAgICAgICAgICAgICAgICAgICAgbG9jYWwgdmFyX29yeDhkciA9IHRndC5DaGFyYWN0ZXIgYW5kICh0Z3QuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCdIZWFkJykgb3IgdGd0LkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgnVXBwZXJUb3JzbycpKQpsb2NhbCA5b256MHkgPSA2NwogICAgICAgICAgICAgICAgICAgIGlmIHRvb2xfZXF1aXBwZWQgYW5kIHRvb2xfZXF1aXBwZWQ6RmluZEZpcnN0Q2hpbGQoJ0hhbmRsZScpIGFuZCB0YXJnZXRfcGFydCBhbmQgdGljaygpIC0gbGFzdF9zaG9vdF90aW1lID49IHNldHRpbmdzLnNob290X2RlbGF5IHRoZW4KLS0gM3V1YXhvdGYKICAgICAgICAgICAgICAgICAgICAgICAgbGFzdF9zaG9vdF90aW1lID0gdGljaygpCiAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgdmFyXzB5bWlycSA9IHRvb2xfZXF1aXBwZWQuSGFuZGxlCmxvY2FsIDRmdDBvdSA9IDY2CiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIHZhcl9wcjFlZzAgPSB0b29sX2hhbmRsZS5TaXplLlogLyAyICsgMC41CiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIHZhcl9jMjVzNG4gPSB0b29sX2hhbmRsZS5Qb3NpdGlvbiArICh0b29sX2hhbmRsZS5DRnJhbWUuTG9va1ZlY3RvciAqIGJhcnJlbF9sZW5ndGgpCmxvY2FsIGdmcW1nbiA9IDM0CiAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgdmFyXzAxangzMCA9IHByZWRpY3RfcGxheWVyX3Bvc2l0aW9uKHRndCwgMC4xKSBvciB0YXJnZXRfcGFydC5Qb3NpdGlvbgogICAgICAgICAgICAgICAgICAgICAgCi0tIGFhbXppcG1oCiAgICAgICAgICAgICAgICAgICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNhZmVfZmlyZV9zaG9vdCh0b29sX2hhbmRsZSwgZ3VuX3BvcywgdGFyZ2V0X3Bvc19wcmVkLCB0YXJnZXRfcGFydCwgVmVjdG9yMy5uZXcoMCwgMCwgLTEpKQogICAgICAgICAgICAgICAgICAgICAgICBlbmQpCi0tIGdnMGxjeTczCiAgICAgICAgICAgICAgICAgICAgZW5kCi0tIHdlbDR2b2o3CiAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgIHRhc2sud2FpdCgwLjAwMSkgLS0gTWluaW1hbCB3YWl0IGZvciBtYXhpbXVtIHNwZWVkCi0tIDI3bWt3Nms3CiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAKLS0gbmNld2tvYmsKICAgICAgICAgICAgICAgIC0tIFNreSBkcm9wCiAgICAgICAgICAgICAgICBpZiBkb19za3kgYW5kIHRndCBhbmQgdGd0LkNoYXJhY3RlciBhbmQgaXNfa28odGd0KSBhbmQgaXNfdmFsaWRfdGFyZ2V0KHRndCwgY29tbWFuZGVyKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgc2t5X2Ryb3BfcGxheWVyKHRndCwgY29tbWFuZGVyKQotLSBwODVnMTRzYQpsb2NhbCBzY3FpeXEgPSAxMAogICAgICAgICAgICAgICAgICAgIGJyZWFrCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAKbG9jYWwgem51dmVhID0gMTQKICAgICAgICAgICAgICAgIC0tIEJyaW5nIChNb3JlIHJvYnVzdCBwaWNrdXApIC0gRklYRUQ6IEltcHJvdmVkIHBpY2t1cCBwb3NpdGlvbmluZwpsb2NhbCBmZGZpNmQgPSA5OQogICAgICAgICAgICAgICAgaWYgZG9fYnJpbmcgYW5kIHRndCBhbmQgdGd0LkNoYXJhY3RlciBhbmQgaXNfa28odGd0KSBhbmQgaXNfdmFsaWRfdGFyZ2V0KHRndCwgY29tbWFuZGVyKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgbG9jYWwgdmFyX2RnMm5vMiA9IHRndC5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoJ1VwcGVyVG9yc28nKQogICAgICAgICAgICAgICAgICAgIGlmIHRvcnNvIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgc3RhbmRfY2hhciA9IGxvY2FsX3BsYXllci5DaGFyYWN0ZXIKLS0gcjZpanoyeHgKICAgICAgICAgICAgICAgICAgICAgICAgc3RhbmRfcm9vdCA9IHN0YW5kX2NoYXIgYW5kIHN0YW5kX2NoYXI6RmluZEZpcnN0Q2hpbGQoJ0h1bWFub2lkUm9vdFBhcnQnKQogICAgICAgICAgICAgICAgICAgICAgICBpZiBzdGFuZF9yb290IHRoZW4KLS0gbGF1czMzOHgKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC0tIERpc2FibGUgYXV0byBzcGl0IGR1cmluZyBicmluZwotLSB5NDZsOTNqMAogICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgdmFyX2xocmRkciA9IF9HLnBlcnNpc3RlbnRfZGF0YS5hdXRvX3NwaXQKICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9HLnBlcnNpc3RlbnRfZGF0YS5hdXRvX3NwaXQgPSBmYWxzZQotLSB1Z2pjYXExcApsb2NhbCAxbnF4OTQgPSAyNgogICAgICAgICAgICAgICAgICAgICAgICAgICAKbG9jYWwgbGxtazVnID0gNDcKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIHZhcl9paGhvem8gPSAwCmxvY2FsIGMzbWs3MSA9IDE1CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCB2YXJfM3IxcHJmID0gNQotLSB0ajBraGRwOQogICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgdmFyX3F1cGVvYSA9IGZhbHNlCmxvY2FsIGRxM21teSA9IDgzCiAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aGlsZSBwaWNrdXBfYXR0ZW1wdHMgPCBtYXhfYXR0ZW1wdHMgYW5kIG5vdCBzdWNjZXNzIGFuZCBpc192YWxpZF90YXJnZXQodGd0LCBjb21tYW5kZXIpIGRvCi0tIDZuZWN6d2diCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9yc28gPSB0Z3QuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCdVcHBlclRvcnNvJykKLS0gNzNjenZrNGoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBub3QgdG9yc28gdGhlbiBicmVhayBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCmxvY2FsIDgxZzl5cSA9IDQ4CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLS0gRklYRUQ6IEJldHRlciBwaWNrdXAgcG9zaXRpb25pbmcgLSBzdGF5IGFib3ZlIHRvcnNvCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgdmFyX2tjazQ5dCA9IHRvcnNvLlBvc2l0aW9uICsgVmVjdG9yMy5uZXcoMCwgNS41LCAwKQotLSBoaTRlcjhzcQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhbmRfcm9vdC5DRnJhbWUgPSBDRnJhbWUubmV3KHBpY2t1cF9wb3MpCi0tIGp6ODh0Y2N4CmxvY2FsIGRqb3dleSA9IDYxCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YW5kX3Jvb3QuVmVsb2NpdHkgPSBWZWN0b3IzLnplcm8KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQpCmxvY2FsIG5vajc1NSA9IDEwCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhc2sud2FpdCgwLjI1KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByZXNzX2tleShFbnVtLktleUNvZGUuRykKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXNrLndhaXQoMC43KSAtLSBJbmNyZWFzZWQgd2FpdAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBpY2t1cF9hdHRlbXB0cyA9IHBpY2t1cF9hdHRlbXB0cyArIDEKLS0gdGpyZDc2aWIKbG9jYWwgNXZvcnYxID0gNTkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCi0tIGJhbXZ4NmpkCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHN0YW5kX3Jvb3QuUG9zaXRpb24gLSB0b3Jzby5Qb3NpdGlvbikuTWFnbml0dWRlIDwgMTAgdGhlbgotLSBhY2JvdjR3eQpsb2NhbCBoa2o2OTAgPSA5CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3MgPSB0cnVlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrCi0tIGE3bHFteGZiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIHN1Y2Nlc3MgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIHZhcl9tdmdoOGQgPSBjb21tYW5kZXIgYW5kIGNvbW1hbmRlci5DaGFyYWN0ZXIKbG9jYWwgYTJrejRpID0gMTgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBjb21tYW5kZXJfY2hhciBhbmQgY29tbWFuZGVyX2NoYXI6RmluZEZpcnN0Q2hpbGQoJ0h1bWFub2lkUm9vdFBhcnQnKSB0aGVuCi0tIHc3aXdmaHR4CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIHZhcl9za3drdm0gPSBjb21tYW5kZXJfY2hhci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uCmxvY2FsIGQ0NWJpNCA9IDQwCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIHZhcl85OG4zMHcgPSBjb21tYW5kZXJfcG9zICsgVmVjdG9yMy5uZXcoMCwgMTAsIDApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKLS0gYXh5NjlwbTkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQotLSA4bmNsNjI2aQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhbmRfcm9vdC5DRnJhbWUgPSBDRnJhbWUubmV3KHNhZmVfZHJvcF9wb3MpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXNrLndhaXQoMC41KQotLSA5ZnMxN2ZlNAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmVzc19rZXkoRW51bS5LZXlDb2RlLkcpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKLS0gYXZ0bW45cTMKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgX0cudm9pZF9zcGFtX21vZGUgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFzay53YWl0KDAuNSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBlcmZvcm1fdm9pZF9zcGFtKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCi0tIGJxb2M4bDVnCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKLS0gcXIzd3I2amkKICAgICAgICAgICAgICAgICAgICAgICAgICAgCmxvY2FsIGM5cnk2ciA9IDU3CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfRy5wZXJzaXN0ZW50X2RhdGEuYXV0b19zcGl0ID0gd2FzX2F1dG9fc3BpdF9icmluZyAtLSBSZXN0b3JlIGF1dG8gc3BpdApsb2NhbCAzbWx0Y2QgPSA4OAogICAgICAgICAgICAgICAgICAgICAgICBlbmQKbG9jYWwgcmk4bjh5ID0gNDYKICAgICAgICAgICAgICAgICAgICBlbmQKLS0gbnRvZnNjZWwKbG9jYWwgczMyZ3B2ID0gODAKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgLS0gU3RvbXAKICAgICAgICAgICAgICAgIGlmIGRvX3N0b21wIGFuZCB0Z3QgYW5kIHRndC5DaGFyYWN0ZXIgYW5kIGlzX2tvKHRndCkgYW5kIGlzX3ZhbGlkX3RhcmdldCh0Z3QsIGNvbW1hbmRlcikgdGhlbgpsb2NhbCBkOXVwY2cgPSAxMwogICAgICAgICAgICAgICAgICAgIGltcHJvdmVkX3N0b21wKHRndCwgY29tbWFuZGVyKQogICAgICAgICAgICAgICAgICAgIF9HLnN0YW5kX2xvY2tlZCA9IGZhbHNlCiAgICAgICAgICAgICAgICAgICAgaXNfaW5fY29tYmF0ID0gZmFsc2UKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgIAogICAgICAgICAgICB1bnRpbCBub3QgaXNfbG9vcCBvciBzcGlyYWxfc3RvcF9mbGFnIG9yIG5vdCBpc192YWxpZF90YXJnZXQodGd0LCBjb21tYW5kZXIpCi0tIGs0OTg5azN4CiAgICAgICAgICAKICAgICAgICAgICAgc3BpcmFsX3J1bm5pbmcgPSBmYWxzZQogICAgICAgICAgICBzcGlyYWxfc3RvcF9mbGFnID0gZmFsc2UKLS0gZ3ZrZjh6d3MKICAgICAgICAgICAgX0cuc3RhbmRfbG9ja2VkID0gZmFsc2UKLS0gb2lzcXM3MWwKICAgICAgICAgICAgY3VycmVudF9hY3Rpb24gPSBuaWwKICAgICAgICAgICAgY3VycmVudF9jb21tYW5kZXIgPSBuaWwKICAgICAgICAgICAgX0cuYWN0aW9uX2luX3Byb2dyZXNzID0gZmFsc2UKICAgICAgICAgICAgaXNfaW5fY29tYmF0ID0gZmFsc2UKICAgICAgICAgICAgc3RvcF9zcGVjdGF0aW5nKCkKICAgICAgICAgICAgbGFzdF9hY3Rpdml0eV90aW1lID0gdGljaygpCiAgICAgICAgICAgIC0tIFJlc3RvcmUgYXV0byBzcGl0IHN0YXRlCmxvY2FsIDZrMDl6dyA9IDQzCiAgICAgICAgICAgIF9HLnBlcnNpc3RlbnRfZGF0YS5hdXRvX3NwaXQgPSB3YXNfYXV0b19zcGl0Ci0tIGJ6eDE2ZDg1CiAgICAgICAgICAgIC0tIGNsZWFyIGxvb3AgZmxhZyBpZiBzdG9wcGluZwogICAgICAgICAgICBpZiBub3QgaXNfbG9vcCB0aGVuCiAgICAgICAgICAgICAgICBfRy5sb29waW5nX2FjdGlvbiA9IGZhbHNlCi0tIHQ0bmt4aTVnCiAgICAgICAgICAgICAgICBfRy5sYXN0X2NvbW1hbmQgPSBuaWwKICAgICAgICAgICAgZW5kCi0tIDlyaHJ0dGprCiAgICAgICAgZW5kKQogICAgZW5kCi0tIDh4MmhjbzA0CmVuZApsb2NhbCBhbWgzM2YgPSAzCi0tIEluaXRpYWxpemUgbWFzdGVyCmlmIHNldHRpbmdzLm1hc3Rlcl91c2VybmFtZSBhbmQgc2V0dGluZ3MubWFzdGVyX3VzZXJuYW1lIH49ICJZT1VSX1VTRVJOQU1FX0hFUkUiIHRoZW4KICAgIF9HLm1hc3RlciA9IGZpbmRfcGFydGlhbF9wbGF5ZXIoc2V0dGluZ3MubWFzdGVyX3VzZXJuYW1lKQpsb2NhbCBzMm41N2QgPSA3OAplbmQKLS0gSW5pdGlhbGl6ZSBwZXJzaXN0ZW50IGRhdGEKLS0geDRkbnl1cGkKX0cucGVyc2lzdGVudF9kYXRhLnZvaWRfbW9kZSA9IF9HLnZvaWRfbW9kZQpsb2NhbCBybWRsZDEgPSA3NwpfRy5wZXJzaXN0ZW50X2RhdGEudm9pZF9zcGFtX21vZGUgPSBfRy52b2lkX3NwYW1fbW9kZQpfRy5wZXJzaXN0ZW50X2RhdGEuZ3VuX3R5cGUgPSBjdXJyZW50X2d1bl90eXBlCl9HLnBlcnNpc3RlbnRfZGF0YS50ZWFtZWRfcGxheWVycyA9IF9HLnRlYW1lZF9wbGF5ZXJzCl9HLnBlcnNpc3RlbnRfZGF0YS53aGl0ZWxpc3RlZF9wbGF5ZXJzID0gX0cud2hpdGVsaXN0ZWRfcGxheWVycwpfRy5wZXJzaXN0ZW50X2RhdGEuYXV0b19zYXZlID0gc2V0dGluZ3MuYXV0b19zYXZlCl9HLnBlcnNpc3RlbnRfZGF0YS5mb2xsb3dfb3ZlcnJpZGUgPSBmb2xsb3dfb3ZlcnJpZGUKLS0gb2RodDBzcHEKX0cucGVyc2lzdGVudF9kYXRhLmF1dG9fbWFzayA9IGZhbHNlIC0tIEluaXRpYWxpemUgYXV0byBtYXNrCl9HLnBlcnNpc3RlbnRfZGF0YS5hdXRvX3NwaXQgPSBmYWxzZSAtLSBJbml0aWFsaXplIGF1dG8gc3BpdAotLSBJbml0aWFsaXplIGtpY2sgbGlzdGVuZXIKaW5pdGlhbGl6ZV9raWNrX2xpc3RlbmVyKCkKLS0gbDZ4eG5sbHMKLS0gSW5pdGlhbGl6ZSBTRGVhdGggbW9uaXRvcgppbml0aWFsaXplX3NkZWF0aF9tb25pdG9yKCkKbG9jYWwgdTBmdTZjID0gOTIKLS0gQ2hhdCBjb25uZWN0aW9ucwpsb2NhbCB2YXJfd211aW50ID0ge30KbG9jYWwgcnpieDBvID0gNzkKbG9jYWwgdmFyX3hyNmMyNyBjb25uZWN0X3BsYXllcl9jaGF0KHBscikKICAgIGlmIHBsciA9PSBsb2NhbF9wbGF5ZXIgb3IgYWxsX2NoYXRfY29ubnNbcGxyXSB0aGVuIHJldHVybiBlbmQKICAKbG9jYWwgaDVlZmc3ID0gOAogICAgbG9jYWwgdmFyX3NmaDBndCA9IHNhZmVfY29ubmVjdChwbHIuQ2hhdHRlZCwgZnVuY3Rpb24obXNnKQogICAgICAgIC0tIE5FVzogT25seSBwcm9jZXNzIGNvbW1hbmRzIGZyb20gbWFzdGVyIG9yIHdoaXRlbGlzdGVkIHBsYXllcnMKICAgICAgICBpZiBjYW5fdXNlX2NvbW1hbmQocGxyKSB0aGVuCiAgICAgICAgICAgIHByb2Nlc3NfY29tbWFuZChwbHIsIG1zZzpsb3dlcigpKQogICAgICAgIGVuZAotLSAxMDhjMmk4aAogICAgZW5kLCB0cnVlKQogIAogICAgYWxsX2NoYXRfY29ubnNbcGxyXSA9IGNvbm4KLS0gdzh3enc1ZGcKZW5kCmZvciBfLCBwbHIgaW4gaXBhaXJzKHBsYXllcnM6R2V0UGxheWVycygpKSBkbwotLSBtaGpxdzB6dwogICAgY29ubmVjdF9wbGF5ZXJfY2hhdChwbHIpCmVuZApzYWZlX2Nvbm5lY3QocGxheWVycy5QbGF5ZXJBZGRlZCwgY29ubmVjdF9wbGF5ZXJfY2hhdCwgdHJ1ZSkKLS0gcGQ4ZnF6M2QKbG9jYWwgZ24zOWQ3ID0gMjAKc2FmZV9jb25uZWN0KHBsYXllcnMuUGxheWVyUmVtb3ZpbmcsIGZ1bmN0aW9uKHBscikKICAgIGlmIGFsbF9jaGF0X2Nvbm5zW3Bscl0gdGhlbgogICAgICAgIGFsbF9jaGF0X2Nvbm5zW3Bscl06RGlzY29ubmVjdCgpCi0tIG55M2lkcXFjCiAgICAgICAgcGVyc2lzdGVudF9jb25uZWN0aW9uc1thbGxfY2hhdF9jb25uc1twbHJdXSA9IG5pbAotLSBzZWdrZmJqZAogICAgICAgIGFsbF9jaGF0X2Nvbm5zW3Bscl0gPSBuaWwKbG9jYWwgOTRsYjQwID0gMwogICAgZW5kCi0tIGdwbXRhMHptCiAgCmxvY2FsIGVlazRscSA9IDg0CiAgICBpZiBwbHIgPT0gX0cubWFzdGVyIHRoZW4KLS0gbm9wM3RxZWoKICAgICAgICAtLSBJZiBtYXN0ZXIgbGVhdmVzLCBnbyB0byB2b2lkIGFuZCB3YWl0IHRoZXJlIHVudGlsIG1hc3RlciByZWpvaW5zIChwZXJzaXN0KQogICAgICAgIF9HLm1hc3RlciA9IG5pbAogICAgICAgIHNwaXJhbF9zdG9wX2ZsYWcgPSB0cnVlCiAgICAgICAgY3VycmVudF9hY3Rpb24gPSBuaWwKICAgICAgICBjdXJyZW50X2NvbW1hbmRlciA9IG5pbApsb2NhbCB6cDZ3a2kgPSA3NQogICAgICAgIF9HLnN0YW5kX2xvY2tlZCA9IGZhbHNlCiAgICAgICAgX0cuYWN0aW9uX2luX3Byb2dyZXNzID0gZmFsc2UKICAgICAgICBpc19pbl9jb21iYXQgPSBmYWxzZQotLSBlanIxMGE4egogICAgICAgIHN0b3Bfc3BlY3RhdGluZygpCiAgICAgICAgX0cudm9pZF9tb2RlID0gdHJ1ZQpsb2NhbCA0NXFwamggPSAxNAogICAgICAgIF9HLnBlcnNpc3RlbnRfZGF0YS52b2lkX21vZGUgPSB0cnVlCmxvY2FsIGxwcjZuZSA9IDU3CiAgICAgICAgcHJpbnQoIltNQVNURVJdIE1hc3RlciBsZWZ0IC0gZ29pbmcgdG8gdm9pZCBhbmQgd2FpdGluZyBmb3IgcmVqb2luLiIpCiAgICBlbHNlaWYgdGFyZ2V0IGFuZCBwbHIgPT0gdGFyZ2V0IHRoZW4KICAgICAgICBzcGlyYWxfc3RvcF9mbGFnID0gdHJ1ZQpsb2NhbCB2ejUyc2sgPSAzNgogICAgICAgIGN1cnJlbnRfYWN0aW9uID0gbmlsCiAgICAgICAgY3VycmVudF9jb21tYW5kZXIgPSBuaWwKICAgICAgICBfRy5zdGFuZF9sb2NrZWQgPSBmYWxzZQotLSBjeTRocXdyMwogICAgICAgIF9HLmFjdGlvbl9pbl9wcm9ncmVzcyA9IGZhbHNlCi0tIGJkeWU3OXFsCiAgICAgICAgaXNfaW5fY29tYmF0ID0gZmFsc2UKbG9jYWwgbDg4anlnID0gNTYKICAgICAgICBzdG9wX3NwZWN0YXRpbmcoKQpsb2NhbCBkZXJndmEgPSA2MAogICAgZW5kCiAgCmxvY2FsIGx4cnh5dCA9IDIKICAgIC0tIElmIHRoZSBwbGF5ZXIgbGVhdmluZyBpcyB0aGUgY3VycmVudCBmb2xsb3cgdGFyZ2V0LCByZXN0b3JlIHByZXZpb3VzIGZvbGxvdyBmcm9tIGhpc3RvcnkKICAgIGlmIGZvbGxvd19vdmVycmlkZSBhbmQgcGxyID09IGZvbGxvd19vdmVycmlkZSB0aGVuCi0tIDlqMnF6YmMxCiAgICAgICAgZm9sbG93X292ZXJyaWRlID0gbmlsCiAgICAgICAgLS0gcG9wIGhpc3RvcnkgdW50aWwgd2UgZ2V0IGEgdmFsaWQgcGxheWVyIG9yIG5pbAogICAgICAgIHdoaWxlICNmb2xsb3dfaGlzdG9yeSA+IDAgZG8KICAgICAgICAgICAgbG9jYWwgdmFyXzJndXA5ZCA9IHRhYmxlLnJlbW92ZShmb2xsb3dfaGlzdG9yeSkKICAgICAgICAgICAgaWYgcHJldiBhbmQgcHJldi5QYXJlbnQgdGhlbgotLSB3Z2V6aDBmZQogICAgICAgICAgICAgICAgZm9sbG93X292ZXJyaWRlID0gcHJldgogICAgICAgICAgICAgICAgYnJlYWsKLS0gejY3bzdxODUKICAgICAgICAgICAgZW5kCi0tIDQxamtzc3dnCiAgICAgICAgZW5kCiAgICAgICAgX0cucGVyc2lzdGVudF9kYXRhLmZvbGxvd19vdmVycmlkZSA9IGZvbGxvd19vdmVycmlkZQogICAgZW5kCi0tIHZlZXh4bzI4CiAgCiAgICBpZiBwbHIgYW5kIHBsci5OYW1lIHRoZW4KICAgICAgICBfRy50ZWFtZWRfcGxheWVyc1twbHIuTmFtZV0gPSBuaWwKLS0gdm9uaGpxYTIKICAgICAgICBfRy53aGl0ZWxpc3RlZF9wbGF5ZXJzW3Bsci5OYW1lXSA9IG5pbAogICAgICAgIHBsYXllcl9wb3NpdGlvbnNbcGxyLk5hbWVdID0gbmlsCmxvY2FsIG5sOHM1ciA9IDI4CiAgICAgICAgbGFzdF90YXJnZXRfbWVzc2FnZVtwbHIuTmFtZV0gPSBuaWwKLS0gYW9lbXh4eGIKICAgICAgICBzZGVhdGhTdGF0ZXNbcGxyLk5hbWVdID0gbmlsIC0tIFJlbW92ZSBmcm9tIFNEZWF0aCBzdGF0ZXMKICAgICAgICAtLSBBbHNvIHJlbW92ZSBmcm9tIHBlcnNpc3RlbnQgZGF0YQogICAgICAgIF9HLnBlcnNpc3RlbnRfZGF0YS50ZWFtZWRfcGxheWVyc1twbHIuTmFtZV0gPSBuaWwKICAgICAgICBfRy5wZXJzaXN0ZW50X2RhdGEud2hpdGVsaXN0ZWRfcGxheWVyc1twbHIuTmFtZV0gPSBuaWwKICAgIGVuZAplbmQsIHRydWUpCi0tIEhhbmRsZSByZXNwYXduCnNhZmVfY29ubmVjdChsb2NhbF9wbGF5ZXIuQ2hhcmFjdGVyQWRkZWQsIGZ1bmN0aW9uKGNoYXIpCiAgICB0YXNrLndhaXQoMikKICAKbG9jYWwgMDM2Y242ID0gMjYKICAgIC0tIFJlc3RvcmUgcGVyc2lzdGVudCBkYXRhIGFmdGVyIHJlc3Bhd24KbG9jYWwgcnpuNDVsID0gMjIKICAgIF9HLnZvaWRfbW9kZSA9IF9HLnBlcnNpc3RlbnRfZGF0YS52b2lkX21vZGUKLS0gcXBvMmZkNzUKICAgIF9HLnZvaWRfc3BhbV9tb2RlID0gX0cucGVyc2lzdGVudF9kYXRhLnZvaWRfc3BhbV9tb2RlCiAgICBjdXJyZW50X2d1bl90eXBlID0gX0cucGVyc2lzdGVudF9kYXRhLmd1bl90eXBlCiAgICBfRy50ZWFtZWRfcGxheWVycyA9IF9HLnBlcnNpc3RlbnRfZGF0YS50ZWFtZWRfcGxheWVycwpsb2NhbCAza2Z4cmIgPSA4MgogICAgX0cud2hpdGVsaXN0ZWRfcGxheWVycyA9IF9HLnBlcnNpc3RlbnRfZGF0YS53aGl0ZWxpc3RlZF9wbGF5ZXJzCmxvY2FsIDdwcXJzOCA9IDgKICAgIGZvbGxvd19vdmVycmlkZSA9IF9HLnBlcnNpc3RlbnRfZGF0YS5mb2xsb3dfb3ZlcnJpZGUgLS0gUmVzdG9yZSBmb2xsb3cgb3ZlcnJpZGUKLS0gcmFpZjUyOXoKICAgIF9HLnBlcnNpc3RlbnRfZGF0YS5hdXRvX3NwaXQgPSBfRy5wZXJzaXN0ZW50X2RhdGEuYXV0b19zcGl0IC0tIFJlc3RvcmUgYXV0byBzcGl0CiAgCiAgICAtLSBSZXNldCBhbGwgc3RhdGUgdmFyaWFibGVzIG9uIHJlc3Bhd24KbG9jYWwgOGFuNGs4ID0gOTEKICAgIHNwaXJhbF9ydW5uaW5nID0gZmFsc2UKbG9jYWwgdm12NHE1ID0gNjcKICAgIHNwaXJhbF9zdG9wX2ZsYWcgPSB0cnVlCi0tIDNjeDVpcW55CiAgICBfRy5zdGFuZF9sb2NrZWQgPSBmYWxzZQpsb2NhbCBzaHA0N3ggPSA1MQogICAgY3VycmVudF9hY3Rpb24gPSBuaWwKbG9jYWwgN3pvZmRzID0gNTMKICAgIGN1cnJlbnRfY29tbWFuZGVyID0gbmlsCiAgICBfRy5hY3Rpb25faW5fcHJvZ3Jlc3MgPSBmYWxzZQpsb2NhbCBiZHljZmIgPSAyMQogICAgaXNfaW5fY29tYmF0ID0gZmFsc2UKbG9jYWwgYnV5cjJpID0gMTEKICAgIHN0b3Bfc3BlY3RhdGluZygpCiAgICBpc19yZWxvYWRpbmcgPSBmYWxzZQotLSB1cmw0NWgzagogIAogICAgLS0gQ2xlYW4gdXAgYW55IHBlbmRpbmcgYWN0aW9ucwotLSBsc3B4c2JhbgogICAgX0cucHJvdGVjdGlvbl9xdWV1ZSA9IHt9Ci0tIGZteGV3czkyCiAgCiAgICAtLSBSZXNldCBtb3ZlbWVudCB2YXJpYWJsZXMgYnV0IGtlZXAgcGVyc2lzdGVudCBkYXRhCiAgICBvZmZzZXRfbW9kZSwgZm9sbG93X2Rpc3RhbmNlLCBmb2xsb3dfaGVpZ2h0LCBmb2xsb3dfbGVycF9zcGVlZCA9ICdsJywgNC41LCAzLCAxCi0tIGk5d2swcmI2CmxvY2FsIGd4cXMxNiA9IDc5CiAgICBvcmJpdGluZywgdGFyZ2V0LCBvcmJpdF9yYWRpdXMsIG9yYml0X3NwZWVkID0gZmFsc2UsIG5pbCwgMTUsIG1hdGgucGkgKiA2NAogICAgc25hcF9iYWNrLCBzbmFwX2Rpc3RhbmNlID0gZmFsc2UsIDE1Ci0tIDRqMGh0bTRqCiAgICBzcGlyYWxfcnVubmluZywgc3BpcmFsX3N0b3BfZmxhZyA9IGZhbHNlLCBmYWxzZQogICAgc3BpcmFsX3JhZGl1cywgc3BpcmFsX2R1cmF0aW9uID0gMTUsIDYKbG9jYWwgbmxvZGtnID0gOTUKICAgIGlzX3JlbG9hZGluZyA9IGZhbHNlCi0tIDdiYzBtbzBxCiAgICBjdXJyZW50X2FjdGlvbiA9IG5pbAogICAgY3VycmVudF9jb21tYW5kZXIgPSBuaWwKICAgIC0tIGZvbGxvd19vdmVycmlkZSBpcyBhbHJlYWR5IHJlc3RvcmVkIGFib3ZlCiAgCiAgICAtLSBDbGVhbiB1cCBub24tcGVyc2lzdGVudCBjb25uZWN0aW9ucyB0byBwcmV2ZW50IG1lbW9yeSBsZWFrcwpsb2NhbCBraHY2YXQgPSAxNAogICAgY2xlYW51cF9jb25uZWN0aW9ucygpCi0tIGpyZG9vMGRoCmxvY2FsIGJ2OHVsbSA9IDEwCiAgCi0tIDk4bjRhdHBhCiAgICBwY2FsbChtb25pdG9yX2VxdWlwX3Jlc3RyaWN0aW9ucykKLS0gaHZmNWR0encKICAgIHBjYWxsKGZ1bmN0aW9uKCkgZW5hYmxlX3dhbGxfY2xpcHBpbmcoY2hhcikgZW5kKQogICAgcGNhbGwoZnVuY3Rpb24oKSBzYWZlX2NoYXJhY3Rlcl9kZWF0aCgpIGVuZCkKbG9jYWwgbWluN2czID0gNDMKICAgIHNldHVwU2VhdExpc3RlbmVyKGNoYXIpIC0tIE5FVzogU2V0IHVwIHNlYXQgbGlzdGVuZXIKICAgIHBsYXlFbW90ZSgpIC0tIFJlc3RhcnQgZW1vdGUKLS0gY3dxOTlhZGsKbG9jYWwgcXkza3NtID0gNjIKCiAgICAtLSBBVVRPIE1BU0sgUEVSU0lTVEVOQ0UKLS0gdGkzdTRqdDQKICAgIGlmIF9HLnBlcnNpc3RlbnRfZGF0YS5hdXRvX21hc2sgdGhlbgogICAgICAgIHRhc2suZGVsYXkoMiwgZnVuY3Rpb24oKQpsb2NhbCBmYTl4NmEgPSAzNgogICAgICAgICAgICB0b2dnbGVfbWFza19zZXF1ZW5jZSgpCiAgICAgICAgZW5kKQotLSBzZ2o1N3ZzOApsb2NhbCBycWNwenAgPSAyCiAgICBlbmQKLS0gZ3psN2ZvcnMKICAKbG9jYWwgNG14emVjID0gNzIKICAgIGlmIF9HLnNob3VsZF9yZXN1bWVfb25fcmVzcGF3biBhbmQgX0cubGFzdF9jb21tYW5kIHRoZW4KLS0gZHU1emdrdHoKICAgICAgICBzYWZlX3NwYXduKGZ1bmN0aW9uKCkKICAgICAgICAgICAgZW5zdXJlX2d1bl9hZnRlcl9yZXNwYXduKCkKICAgICAgICAgICAgdGFzay53YWl0KDAuNSkKICAgICAgICAgICAgbG9jYWwgdmFyXzRwZ3gyMyA9IF9HLmxhc3RfY29tbWFuZC5jb21tYW5kZXJfbmFtZQogICAgICAgICAgICBsb2NhbCB2YXJfbWRza2V2ID0gcGxheWVyczpGaW5kRmlyc3RDaGlsZChjbWRyX25hbWUpIG9yIF9HLm1hc3RlcgotLSB5cG5idGpzaAogICAgICAgICAgICBpZiBjbWRyIHRoZW4KICAgICAgICAgICAgICAgIHByb2Nlc3NfY29tbWFuZChjbWRyLCBfRy5sYXN0X2NvbW1hbmQubXNnKQpsb2NhbCBiM2twanggPSA1NwogICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICBpZiBfRy5tYXN0ZXIgdGhlbgogICAgICAgICAgICAgICAgICAgIHByb2Nlc3NfY29tbWFuZChfRy5tYXN0ZXIsIF9HLmxhc3RfY29tbWFuZC5tc2cpCi0tIGJnemY0NjM4CiAgICAgICAgICAgICAgICBlbmQKLS0gOXp4ZnV6N3kKICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIF9HLnNob3VsZF9yZXN1bWVfb25fcmVzcGF3biA9IGZhbHNlCmxvY2FsIHkzNWZuciA9IDM1CiAgICAgICAgZW5kKQotLSBxYnpjZGQzawogICAgZW5kCmxvY2FsIGllNGtkNyA9IDUwCmVuZCwgdHJ1ZSkKLS0gTWFpbiB1cGRhdGUgbG9vcApsb2NhbCB2YXJfaHk1dXR0Ci0tIDYydTgzMWY5CmxvY2FsIGV0NWlmcCA9IDczCmhlYXJ0YmVhdF9jb25uZWN0aW9uID0gc2FmZV9jb25uZWN0KHJ1bl9zZXJ2aWNlLkhlYXJ0YmVhdCwgZnVuY3Rpb24oKQogICAgdXBkYXRlX3BsYXllcl9wb3NpdGlvbnMoKQogICAgdXBkYXRlX3NwZWN0YXRlX2NhbWVyYSgpCmxvY2FsIDlwcmZ0aiA9IDYzCiAgCiAgICAtLSBIYW5kbGUgaWRsZSBhY3Rpb25zIG9ubHkgd2hlbiBub3QgYnVzeQogICAgaWYgbm90IF9HLmFjdGlvbl9pbl9wcm9ncmVzcyBhbmQgbm90IGlzX2luX2NvbWJhdCBhbmQgbm90IGlzX3JlbG9hZGluZyB0aGVuCiAgICAgICAgLS0gQ2hlY2sgZm9yIGF1dG8tc2F2ZQpsb2NhbCB2MWE0NXYgPSA0CiAgICAgICAgaWYgX0cucGVyc2lzdGVudF9kYXRhLmF1dG9fc2F2ZSBhbmQgX0cubWFzdGVyIGFuZCBpc19rbyhfRy5tYXN0ZXIpIGFuZCB0aWNrKCkgLSBsYXN0X3NhdmVfdGltZSA+PSAzMCB0aGVuCiAgICAgICAgICAgIGF1dG9fc2F2ZV9tYXN0ZXIoKQotLSAxZTByM3V2bwogICAgICAgIGVuZAotLSB1NDc2eDV4YQogICAgICAKICAgICAgICAtLSBQcm9hY3RpdmUgaWRsZSByZWxvYWQgY2hlY2sKICAgICAgICBpZiB0aWNrKCkgLSBsYXN0X2FjdGl2aXR5X3RpbWUgPiAxMCB0aGVuCiAgICAgICAgICAgIHByb2FjdGl2ZV9yZWxvYWQoKQogICAgICAgIGVuZAogICAgICAKICAgICAgICAtLSBQZXJzaXN0ZW50IGd1biBvd25lcnNoaXAgY2hlY2sKLS0ganhpeTN2dGcKICAgICAgICBpZiBub3QgaGFzX2d1bigpIHRoZW4KICAgICAgICAgICAgbG9jYWwgdmFyX2Fxd2djMCA9IGd1bl9jb25maWdzW2N1cnJlbnRfZ3VuX3R5cGVdCiAgICAgICAgICAgIGlmIGhhc19lbm91Z2hfY2FzaChjb25maWcuY29zdCkgdGhlbgogICAgICAgICAgICAgICAgcHJpbnQoIltJRExFXSBHdW4gbm90IGZvdW5kLiBBdHRlbXB0aW5nIHRvIGJ1eS4iKQogICAgICAgICAgICAgICAgYnV5X2l0ZW0oZmluZF9ndW5fc2hvcF9wYXJ0LCBjdXJyZW50X2d1bl90eXBlLCBjb25maWcuY29zdCwgZmFsc2UpCi0tIDFqM25ucXR6CiAgICAgICAgICAgICAgICBsYXN0X2FjdGl2aXR5X3RpbWUgPSB0aWNrKCkKbG9jYWwgMTU4cWpwID0gMzEKICAgICAgICAgICAgZW5kCmxvY2FsIHY0NjlyYSA9IDk3CiAgICAgICAgZW5kCiAgICBlbmQKLS0gcDJmb2FsbTUKICAKICAgIGlmIF9HLnZvaWRfc3BhbV9tb2RlIHRoZW4KICAgICAgICBwZXJmb3JtX3ZvaWRfc3BhbSgpCiAgICBlbmQKICAKICAgIGlmIHNldHRpbmdzLmF1dG9fYXJtb3IgYW5kIG5vdCBpc19pbl9jb21iYXQgdGhlbgotLSA2end6c2NlOQogICAgICAgIGJ1eV9hcm1vcigpCi0tIDRwOGtoMzRlCiAgICBlbmQKICAKICAgIGlmIF9HLnN0YW5kX2xvY2tlZCB0aGVuIHJldHVybiBlbmQKbG9jYWwgeG01YngwID0gMjAKICAKLS0gMGp1czZyOXoKICAgIGxvY2FsIHZhcl85aDJsamUgPSBmb2xsb3dfb3ZlcnJpZGUgb3IgX0cubWFzdGVyCiAgICBsb2NhbCB2YXJfczN0YjlwID0gbG9jYWxfcGxheWVyLkNoYXJhY3RlcgogICAgaWYgbm90IGNoYXIgdGhlbiByZXR1cm4gZW5kCi0tIHNpOTIxNHo2CmxvY2FsIGQ4bWpnZiA9IDYzCiAgCiAgICBwY2FsbChmdW5jdGlvbigpCi0tIGp3NXgwbXo4CiAgICAgICAgbG9jYWwgdmFyX3dqMnk1OSA9IGNoYXI6RmluZEZpcnN0Q2hpbGRPZkNsYXNzKCdIdW1hbm9pZCcpCiAgICAgICAgaWYgaHVtIGFuZCBodW0uSGVhbHRoIDw9IHNldHRpbmdzLmhlYWx0aF9yZXNldF90aHJlc2hvbGQgdGhlbgotLSA4MWc2dW5pMQpsb2NhbCBkZmtyNjcgPSA2CiAgICAgICAgICAgIGh1bS5IZWFsdGggPSAwCmxvY2FsIHdtbGlhcSA9IDQ5CiAgICAgICAgICAgIHJldHVybgpsb2NhbCAxZDRscWIgPSA2NwogICAgICAgIGVuZAotLSBkYmtldTlyMAogICAgZW5kKQogIAogICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgIGRpc2FibGVfcGh5c2ljcyhjaGFyKQotLSBsMWI2anM4agogICAgICAgIGVuYWJsZV93YWxsX2NsaXBwaW5nKGNoYXIpCiAgICBlbmQpCi0tIGo2b2hpMGt2CmxvY2FsIDQ4aWNnMSA9IDUyCiAgCiAgICBsb2NhbCB2YXJfOHo0MzJsID0gY2hhcjpGaW5kRmlyc3RDaGlsZCgnSHVtYW5vaWRSb290UGFydCcpCi0tIHk0OXlqdzgyCiAgICBpZiBub3Qgcm9vdCB0aGVuIHJldHVybiBlbmQKICAKICAgIGxvY2FsIHZhcl9qbzJ1a2YgPSBjaGFyOkZpbmRGaXJzdENoaWxkT2ZDbGFzcygnSHVtYW5vaWQnKQogIAogICAgLS0gVm9pZCBNb2RlCmxvY2FsIDQ2MTlvbiA9IDQKICAgIGlmIF9HLnZvaWRfbW9kZSB0aGVuCiAgICAgICAgbG9jYWwgdmFyX2Z0enN2biA9IG1hdGgucmFuZG9tKDEwMDAsIDY3Njc2NykgKiAobWF0aC5yYW5kb20oMSwgMikgPT0gMSBhbmQgMSBvciAtMSkKICAgICAgICBsb2NhbCB2YXJfd3lndWFrID0gbWF0aC5yYW5kb20oMTAwMCwgNjc2NzY3KSAqIChtYXRoLnJhbmRvbSgxLCAyKSA9PSAxIGFuZCAxIG9yIC0xKQogICAgICAgIGxvY2FsIHZhcl9uZzB3Z3IgPSBWZWN0b3IzLm5ldyhyYW5kb21feCwgOTk5Njc2NzY3LCByYW5kb21feikKLS0gZzAwYm1pZjUKICAgICAgCiAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAgICByb290LkNGcmFtZSA9IENGcmFtZS5uZXcoc2t5X3BvcykKLS0gZ2FiaDVjejEKICAgICAgICAgICAgcm9vdC5WZWxvY2l0eSwgcm9vdC5Sb3RWZWxvY2l0eSA9IFZlY3RvcjMuemVybywgVmVjdG9yMy56ZXJvCi0tIDIwMXFqOGwwCiAgICAgICAgZW5kKQotLSBtd2xnMXBjMAogICAgICAKLS0gNHZjbTRjZ3oKICAgICAgICBpZiBodW0gdGhlbiBodW0uSGVhbHRoID0gMTAwIGVuZAogICAgICAgIHJldHVybgotLSBoaTltbzFhNAogICAgZW5kCi0tIGxraDBkbWwxCiAgCmxvY2FsIG8xNnV3cyA9IDYxCiAgICBpZiBub3QgbWFzdGVyIG9yIG5vdCBtYXN0ZXIuQ2hhcmFjdGVyIG9yIG5vdCBtYXN0ZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCdIdW1hbm9pZFJvb3RQYXJ0JykgdGhlbgotLSAza3h5ZTV3dAogICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgICAgcm9vdC5WZWxvY2l0eSwgcm9vdC5Sb3RWZWxvY2l0eSA9IFZlY3RvcjMuemVybywgVmVjdG9yMy56ZXJvCiAgICAgICAgZW5kKQotLSBxN3dmZ3h0egogICAgICAgIHJldHVybgotLSAxYnRxczF6cwpsb2NhbCB1ZW10eHkgPSAyMAogICAgZW5kCiAgCi0tIHp1dmVjc24wCiAgICBsb2NhbCB2YXJfOWp2bGYzID0gbWFzdGVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0CmxvY2FsIDZnZXFhcCA9IDEwCiAgICBsb2NhbCB2YXJfbzhnbW5lID0gbV9yb290LkNGcmFtZQotLSBtYjhjcGUxNAogICAgbG9jYWwgdmFyXzRleXJ2ZQotLSBmamJxd3cwMQogIAogICAgaWYgb2Zmc2V0X21vZGUgPT0gJ2wnIHRoZW4KICAgICAgICBwb3MgPSBjZi5Qb3NpdGlvbiAtIChjZi5SaWdodFZlY3RvciAqIGZvbGxvd19kaXN0YW5jZSkgLSAoY2YuTG9va1ZlY3RvciAqIGZvbGxvd19kaXN0YW5jZSAqIDAuNykKICAgIGVsc2VpZiBvZmZzZXRfbW9kZSA9PSAncicgdGhlbgotLSB4eGFwZTF0eQpsb2NhbCBqamxzc2MgPSAxMgogICAgICAgIHBvcyA9IGNmLlBvc2l0aW9uICsgKGNmLlJpZ2h0VmVjdG9yICogZm9sbG93X2Rpc3RhbmNlKSAtIChjZi5Mb29rVmVjdG9yICogZm9sbG93X2Rpc3RhbmNlICogMC43KQotLSBub2xuY2VsMgogICAgZWxzZQogICAgICAgIHBvcyA9IGNmLlBvc2l0aW9uIC0gKGNmLkxvb2tWZWN0b3IgKiBmb2xsb3dfZGlzdGFuY2UpCiAgICBlbmQKICAKICAgIHBvcyA9IHBvcyArIFZlY3RvcjMubmV3KDAsIGZvbGxvd19oZWlnaHQsIDApCi0tIDhtamp6aG1oCiAgICBsb2NhbCB2YXJfbzhtb21nID0gQ0ZyYW1lLm5ldyhwb3MsIHBvcyArIGNmLkxvb2tWZWN0b3IpCi0tIGY5NGNqbTNkCiAgCiAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgLS0gQ0hBTkdFRDogTGVzcyBzbW9vdGggZm9sbG93IChpbnN0YW50IHBvc2l0aW9uaW5nKQotLSB2MzZlY211bApsb2NhbCBjb2UwdXggPSA1NQogICAgICAgIHJvb3QuQ0ZyYW1lID0gdGFyZ2V0X2NmCmxvY2FsIHUzbzV5MSA9IDY2CiAgICAgICAgcm9vdC5Qb3NpdGlvbiA9IHJvb3QuQ0ZyYW1lLlBvc2l0aW9uCi0tIGZsOGtrZzhtCmxvY2FsIHE3aHI5ciA9IDg1CiAgICAgICAgcm9vdC5WZWxvY2l0eSwgcm9vdC5Sb3RWZWxvY2l0eSA9IFZlY3RvcjMuemVybywgVmVjdG9yMy56ZXJvCi0tIDJlcHJlcDExCiAgICBlbmQpCmVuZCwgdHJ1ZSkKLS0gYnZkZWg5ZmkKbG9jYWwgMDAyb21qID0gNDIKLS0gSW5pdGlhbGl6ZQpwY2FsbChtb25pdG9yX2VxdWlwX3Jlc3RyaWN0aW9ucykKbG9jYWwgczhiMDl3ID0gOTMKaWYgbG9jYWxfcGxheWVyLkNoYXJhY3RlciB0aGVuCiAgICBwY2FsbChmdW5jdGlvbigpIGVuYWJsZV93YWxsX2NsaXBwaW5nKGxvY2FsX3BsYXllci5DaGFyYWN0ZXIpIGVuZCkKICAgIHBjYWxsKGZ1bmN0aW9uKCkgc2FmZV9jaGFyYWN0ZXJfZGVhdGgoKSBlbmQpCiAgICBzZXR1cFNlYXRMaXN0ZW5lcihsb2NhbF9wbGF5ZXIuQ2hhcmFjdGVyKQogICAgcGxheUVtb3RlKCkKZW5kCmluaXRpYWxpemVfYnVsbGV0X2RldGVjdGlvbigpCi0tIGUyMHF3ancwCmxvY2FsX3BsYXllci5QbGF5ZXJHdWkuQ2hpbGRSZW1vdmVkOkNvbm5lY3QoZnVuY3Rpb24oY2hpbGQpCi0tIGk1cjNzdDVwCiAgICBpZiBjaGlsZC5OYW1lID09ICdTdGFuZENvbnRyb2wnIHRoZW4KICAgICAgICBjbGVhbnVwX2Nvbm5lY3Rpb25zKCkKICAgICAgICBjbGVhbnVwX3RocmVhZHMoKQotLSBsNDcxOTU4eAogICAgZW5kCi0tIHJmZ2tyeHJxCmVuZCkKLS0gNjdkMDRweGw='))()
